{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":-1,"lists":{"es module":{"treeState":0},"js link":{"treeState":0},"css link":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"Pages and Namespaces","children":{"main":{"name":"main","type":"apogee.Folder","children":{"childPage":{"name":"childPage","type":"apogee.Folder","children":{"a":{"name":"a","type":"apogee.JsonMember","updateData":{"data":"This is cell a on childPage."}},"mainAData":{"name":"mainAData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return otherTopLevelPage.a;","supplementalCode":""}},"aOnChildPage":{"name":"aOnChildPage","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return a;","supplementalCode":""}},"aOnChildPage2":{"name":"aOnChildPage2","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return childPage.a;","supplementalCode":""}},"aOnChildPage3":{"name":"aOnChildPage3","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.childPage.a;","supplementalCode":""}},"aOnMain":{"name":"aOnMain","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.a;","supplementalCode":""}},"bOnMain":{"name":"bOnMain","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return b;","supplementalCode":""}},"bOnMain2":{"name":"bOnMain2","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.b;","supplementalCode":""}}}},"childPageData":{"name":"childPageData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return childPage;","supplementalCode":""}},"a":{"name":"a","type":"apogee.JsonMember","updateData":{"data":"This is cell a on main."}},"b":{"name":"b","type":"apogee.JsonMember","updateData":{"data":"This is cell b on main."}},"aOnChildPage":{"name":"aOnChildPage","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return childPage.a;","supplementalCode":""}},"aOntherTopLevelPage":{"name":"aOntherTopLevelPage","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return otherTopLevelPage.a;","supplementalCode":""}},"aOnMain":{"name":"aOnMain","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return a;","supplementalCode":""}},"aOnMain2":{"name":"aOnMain2","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.a;","supplementalCode":""}},"aFromLocalCode":{"name":"aFromLocalCode","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let a = \"This is a local variable in our formula\";\nreturn a;","supplementalCode":""}},"aOnMain3":{"name":"aOnMain3","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let a = \"This is a local variable in our formula\";\nreturn main.a;","supplementalCode":""}},"aOnChildPage2":{"name":"aOnChildPage2","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.childPage.a;","supplementalCode":""}},"parentPageValue":{"name":"parentPageValue","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"//including the parent value, \"main\", here will cause an error in your formula\n//return main;\n\nreturn \"Uncomment out the first line of code of the formule to see an error\";","supplementalCode":""}},"currentCellValue":{"name":"currentCellValue","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"//including the local cell value here will cause an error in your formula\n//return currentCellValue;\n\nreturn \"Uncomment out the first line of code of the formule to see an error\";","supplementalCode":""}},"globalValue":{"name":"globalValue","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return Math.PI;","supplementalCode":""}}}},"otherTopLevelPage":{"name":"otherTopLevelPage","type":"apogee.Folder","children":{"a":{"name":"a","type":"apogee.JsonMember","updateData":{"data":"This is cell a on otherTopLevelPage."}},"childPageAData":{"name":"childPageAData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.childPage.a;","supplementalCode":""}},"mainAData":{"name":"mainAData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return main.a;","supplementalCode":""}}}}}},"components":{"main":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Basics: Pages and Namespaces"}]},{"type":"paragraph","content":[{"type":"text","text":"A page is the name of a single \"document\" in the workspace. It includes the formatted text and the cells. However, the page is more than just a display. It is a namespace for the cells on that page. In addition to these cells, it can also have child pages."}]},{"type":"paragraph","content":[{"type":"text","text":"To demonstrate what the page is we have added some child pages to this document. We will use this to show how the page relates the cells and to show the scope rules for accessing cells on different pages."}]},{"type":"paragraph","content":[{"type":"text","text":"(To add a page, go to the tree view and open the menu on the object to which you want to add the page. Select the option \"Add Child Page\". Here the create/properties dialog opens where you set the name.)"}]},{"type":"paragraph","content":[{"type":"text","text":"You can view the pages and cells on each in the tree view on the left."}]},{"type":"heading2","content":[{"type":"text","text":"Page as a Namespace"}]},{"type":"paragraph","content":[{"type":"text","text":"Below we illustrate how a page is really a namespace for the cells on it. We can access a page the same way we can access a cell, as if it were a variable."}]},{"type":"apogeeComponent","attrs":{"name":"childPageData","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Scope Rules"}]},{"type":"paragraph","content":[{"type":"text","text":"The rule for access variable names (cells, pages, etc) from a given page is as follows:"}]},{"type":"numberedList","content":[{"type":"listItem","content":[{"type":"text","marks":[{"type":"highlight","attrs":{"color":"yellow"}}],"text":"If there are local variables with the variable name given, those are used first, according to the standard rules of javascript."}]},{"type":"listItem","content":[{"type":"text","marks":[{"type":"highlight","attrs":{"color":"yellow"}}],"text":"If there are not local variables from the calling function/formula, the local page is checked to see if it has a cell (or page) of that name."}]},{"type":"listItem","content":[{"type":"text","marks":[{"type":"highlight","attrs":{"color":"yellow"}}],"text":"If there are no variables on the local page, the parent page is checked. This repeats for each parent page."}]},{"type":"listItem","content":[{"type":"text","marks":[{"type":"highlight","attrs":{"color":"yellow"}}],"text":"If the variable is not found in local code or on any of the pages, lastly global javascript variables are checked."}]}]},{"type":"paragraph","content":[{"type":"text","text":"Accessing data from other pages:"}]},{"type":"paragraph","content":[{"type":"text","text":"We see above we can access a page just by using its name. We can access the child of a page just as you would expect."}]},{"type":"apogeeComponent","attrs":{"name":"aOnChildPage","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"We can also do the following."}]},{"type":"apogeeComponent","attrs":{"name":"aOnChildPage2","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Likewise, we can access the other top level pages as you would expect."}]},{"type":"apogeeComponent","attrs":{"name":"aOntherTopLevelPage","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"A few more examples"}]},{"type":"paragraph","content":[{"type":"text","text":"For completeness, there are a few more cases we can illustrate from the scope rules:"}]},{"type":"paragraph","content":[{"type":"text","text":"Accessing a local variable from the formula:"}]},{"type":"apogeeComponent","attrs":{"name":"aFromLocalCode","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Accessing a variable on the current page:"}]},{"type":"apogeeComponent","attrs":{"name":"aOnMain","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"We can also access a variable on this page by explicitly listing the parent name. "}]},{"type":"apogeeComponent","attrs":{"name":"aOnMain2","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"We can show one more example. We can specify the parent name main to avoid a collision with local code."}]},{"type":"apogeeComponent","attrs":{"name":"aOnMain3","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here was access a global javascript value:"}]},{"type":"apogeeComponent","attrs":{"name":"globalValue","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"One note on global variables - "},{"type":"text","marks":[{"type":"italic"}],"text":"don't create them"},{"type":"text","text":"! Currently this is not always prevented, but holding state in a global variable can break dependency system that ensures proper calculations. "}]},{"type":"heading3","content":[{"type":"text","text":"Things You Can't Do"}]},{"type":"paragraph","content":[{"type":"text","text":"Here is something we can "},{"type":"text","marks":[{"type":"italic"}],"text":"not"},{"type":"text","text":" do, at least not without creating an error."}]},{"type":"paragraph","content":[{"type":"text","text":"You can not access the value of the parent page explicitly. It depends on the cell from which you access it."}]},{"type":"apogeeComponent","attrs":{"name":"parentPageValue","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"You also can not access the value of the cell you are trying to calculate, in a data cell. A function cell can however call itself recursively."}]},{"type":"apogeeComponent","attrs":{"name":"currentCellValue","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Data for this Page to be Accessed Elsewhere"}]},{"type":"paragraph","content":[{"type":"text","text":"Here are some cells we will use to show access from other pages..."}]},{"type":"apogeeComponent","attrs":{"name":"a","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"b","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"childPage":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Child Page"}]},{"type":"heading2","content":[{"type":"text","text":"Data on this Page"}]},{"type":"paragraph","content":[{"type":"text","text":"This page just contains some simple data fields. "}]},{"type":"apogeeComponent","attrs":{"name":"a","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Accessing Data and Avoiding Collisions"}]},{"type":"paragraph","content":[{"type":"text","text":"Here are numerous examples of access cell values."}]},{"type":"heading3","content":[{"type":"text","text":"Accessing Local Data"}]},{"type":"paragraph","content":[{"type":"text","text":"We can access data on this page like this:"}]},{"type":"apogeeComponent","attrs":{"name":"aOnChildPage","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"We can also access it as follows, specifying the path in these cases from the parent or grandparent."}]},{"type":"apogeeComponent","attrs":{"name":"aOnChildPage2","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"aOnChildPage3","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Accessing Data from a Parent"}]},{"type":"paragraph","content":[{"type":"text","text":"It we want to access the cell "},{"type":"text","marks":[{"type":"italic"}],"text":"a"},{"type":"text","text":" from the page "},{"type":"text","marks":[{"type":"italic"}],"text":"main"},{"type":"text","text":", we must specify the parent explicitly because otherwise there is a collision."}]},{"type":"apogeeComponent","attrs":{"name":"aOnMain","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The variable "},{"type":"text","marks":[{"type":"italic"}],"text":"b"},{"type":"text","text":" on "},{"type":"text","marks":[{"type":"italic"}],"text":"main"},{"type":"text","text":" is different. Here there is no collision so if we ask for \"b\" on its own, we get the value of "},{"type":"text","marks":[{"type":"italic"}],"text":"b"},{"type":"text","text":" from "},{"type":"text","marks":[{"type":"italic"}],"text":"main"},{"type":"text","text":"."}]},{"type":"apogeeComponent","attrs":{"name":"bOnMain","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Of course we are still free to specify the parent of b explicitly."}]},{"type":"apogeeComponent","attrs":{"name":"bOnMain2","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Data from Another Page "},{"type":"text","marks":[{"type":"italic"}],"text":"not"},{"type":"text","text":" Sharing any Parents"}]},{"type":"paragraph","content":[{"type":"text","text":"For completeness, here we access data from the page "},{"type":"text","marks":[{"type":"italic"}],"text":"otherTopLevelPage"},{"type":"text","text":". There is only one way to do this."}]},{"type":"apogeeComponent","attrs":{"name":"mainAData","id":0,"state":""}}]}},"children":{"a":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"mainAData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnChildPage":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnChildPage2":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnChildPage3":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnMain":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"bOnMain":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"bOnMain2":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"childPageData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"a":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"b":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"aOnChildPage":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOntherTopLevelPage":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnMain":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnMain2":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aFromLocalCode":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnMain3":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"aOnChildPage2":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"parentPageValue":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"currentCellValue":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"globalValue":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true,"tabShowing":true}},"otherTopLevelPage":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Other Top Level Page"}]},{"type":"paragraph","content":[{"type":"text","text":"This is another page in the top level of the workspace."}]},{"type":"paragraph","content":[{"type":"text","text":"Here is a dummy value for us to access."}]},{"type":"apogeeComponent","attrs":{"name":"a","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"From this page we only have one way of accessing the variables "},{"type":"text","marks":[{"type":"italic"}],"text":"a"},{"type":"text","text":" from those other page."}]},{"type":"apogeeComponent","attrs":{"name":"childPageAData","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"mainAData","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"See the other pages for more exhaustive sets of examples."}]}]}},"children":{"a":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"childPageAData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"mainAData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}