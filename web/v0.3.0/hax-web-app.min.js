/*! hax 0.3.0 */
var haxapp={};haxapp.ui={},haxapp.ui.initResourcePath=function(a){haxapp.ui.RESOURCE_DIR=a},haxapp.ui.getResourcePath=function(a){return haxapp.ui.RESOURCE_DIR+a},haxapp.ui.MENU_ZINDEX=100,haxapp.ui.WINDOW_FRAME_ZINIDEX=10,haxapp.ui.DIALOG_ZINDEX=200,haxapp.ui.idIndex=0,haxapp.ui.idBase="_visiui_id_",haxapp.ui.createId=function(){return haxapp.ui.idBase+haxapp.ui.idIndex++},haxapp.ui.applyStyle=function(a,b){for(var c in b)a.style[c]=b[c]},haxapp.ui.createElement=function(a,b,c){var d=document.createElement(a);if(b)for(var e in b)d[e]=b[e];return c&&haxapp.ui.applyStyle(d,c),d},haxapp.ui.dialogLayer=null,haxapp.ui.BASE_ELEMENT_STYLE={position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",zIndex:1},haxapp.ui.DIALOG_LAYER_STYLE={position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",zIndex:2,pointerEvents:"none"},haxapp.ui.DIALOG_SHIELD_STYLE={position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",pointerEvents:"auto"},haxapp.ui.initWindows=function(a){var b=document.getElementById(a);if(!b)throw hax.util.createError("Container ID not found: "+a);var c={};return c.baseElement=haxapp.ui.createElement("div",null,haxapp.ui.BASE_ELEMENT_STYLE),c.dialogLayer=haxapp.ui.createElement("div",null,haxapp.ui.DIALOG_LAYER_STYLE),b.appendChild(c.baseElement),b.appendChild(c.dialogLayer),haxapp.ui.dialogLayer=c.dialogLayer,c},haxapp.ui.createDialog=function(a){var b=haxapp.ui.createElement("div",null,haxapp.ui.DIALOG_SHIELD_STYLE),c=new haxapp.ui.SimpleParentContainer(b,(!0));return haxapp.ui.dialogLayer.appendChild(b),a.frameColorClass||(a.frameColorClass="visicomp_windowColor"),a.titleBarClass||(a.titleBarClass="visicomp_titleBarClass"),new haxapp.ui.WindowFrame(c,a)},haxapp.ui.closeDialog=function(a){var b=a.getParent();a.hide(),haxapp.ui.dialogLayer.removeChild(b.getContainerElement())},haxapp.ui.ParentContainer={},haxapp.ui.ParentContainer.init=function(a,b){this.containerElement=a,this.eventManager=b,this.windowFrameStack=[],this.prevNewChildX=0,this.prevNewChildY=0,this.wrapCount=0},haxapp.ui.ParentContainer.BASE_ZINDEX=0,haxapp.ui.ParentContainer.DELTA_CHILD_X=75,haxapp.ui.ParentContainer.DELTA_CHILD_Y=75,haxapp.ui.ParentContainer.MIN_WRAP_WIDTH=20,haxapp.ui.ParentContainer.MIN_WRAP_HEIGHT=200,haxapp.ui.ParentContainer.CONTENT_SHOWN="content shown",haxapp.ui.ParentContainer.CONTENT_HIDDEN="content hidden",haxapp.ui.ParentContainer.getContainerElement=function(){return this.containerElement},haxapp.ui.ParentContainer.getEventManager=function(){return this.eventManager},haxapp.ui.ParentContainer.addWindow=function(a){this.containerElement.appendChild(a.getElement()),this.windowFrameStack.push(a),this.updateOrder()},haxapp.ui.ParentContainer.removeWindow=function(a){this.containerElement.removeChild(a.getElement());var b=this.windowFrameStack.indexOf(a);this.windowFrameStack.splice(b,1),this.updateOrder()},haxapp.ui.ParentContainer.bringToFront=function(a){var b=this.windowFrameStack.indexOf(a);this.windowFrameStack.splice(b,1),this.windowFrameStack.push(a),this.updateOrder()},haxapp.ui.ParentContainer.getCenterOnPagePosition=function(a){var b=a.getElement(),c=(this.containerElement.offsetWidth-b.clientWidth)/2,d=(this.containerElement.offsetHeight-b.clientHeight)/2;return[c,d]},haxapp.ui.ParentContainer.getNextWindowPosition=function(){var a=this.prevNewChildX+haxapp.ui.ParentContainer.DELTA_CHILD_X,b=this.prevNewChildY+haxapp.ui.ParentContainer.DELTA_CHILD_Y;return a>this.containerElement.offsetWidth&&a>haxapp.ui.ParentContainer.MIN_WRAP_WIDTH&&b>this.containerElement.offsetHeight&&b>haxapp.ui.ParentContainer.MIN_WRAP_HEIGHT&&(this.wrapCount++,a=haxapp.ui.ParentContainer.DELTA_CHILD_X*(this.wrapCount+1),b=haxapp.ui.ParentContainer.DELTA_CHILD_Y),this.prevNewChildX=a,this.prevNewChildY=b,[a,b]},haxapp.ui.ParentContainer.updateOrder=function(){for(var a=haxapp.ui.ParentContainer.BASE_ZINDEX,b=0;b<this.windowFrameStack.length;b++){var c=this.windowFrameStack[b];c.setZIndex(a++)}},haxapp.ui.ParentHighlighter={},haxapp.ui.ParentHighlighter.init=function(a){this.borderOutlineStyle="solid 3px "+haxapp.ui.ParentHighlighter.getColor(),a.style.border=this.borderOutlineStyle},haxapp.ui.ParentHighlighter.addWindow=function(a){var b=a.getElement();b.style.outline=this.borderOutlineStyle,haxapp.ui.ParentContainer.addWindow.call(this,a)},haxapp.ui.ParentHighlighter.removeWindow=function(a){var b=a.getElement();b.style.outline="",haxapp.ui.ParentContainer.removeWindow.call(this,a)},haxapp.ui.ParentHighlighter.colorIndex=0,haxapp.ui.ParentHighlighter.getColor=function(){var a=haxapp.ui.ParentHighlighter.colorArray[haxapp.ui.ParentHighlighter.colorIndex];return haxapp.ui.ParentHighlighter.colorIndex=(haxapp.ui.ParentHighlighter.colorIndex+1)%haxapp.ui.ParentHighlighter.colorArray.length,a},haxapp.ui.ParentHighlighter.colorArray=["DimGray","Indigo","DarkCyan","LimeGreen","RebeccaPurple","MediumBlue","DarkGoldenRod","Navy","MediumSeaGreen","DarkViolet","ForestGreen","RoyalBlue","Chocolate","Red","Purple","DarkSlateGray","OliveDrab","DarkRed","MidnightBlue","Brown","DarkMagenta","DarkSlateBlue","Green","Sienna","FireBrick","Blue","Olive","SteelBlue","Teal","IndianRed","MediumVioletRed","SlateGray","SaddleBrown","SeaGreen","Chartreuse","LightSeaGreen","DarkBlue","Crimson","Lime","LawnGreen","DarkOliveGreen","OrangeRed","Maroon","DarkOrange","Gray","SpringGreen"],haxapp.ui.WindowFrame=function(a,b){b||(b={}),b.frameColorClass||(b.frameColorClass=haxapp.ui.WindowFrame.DEFAULT_FRAME_COLOR_CLASS),b.titleBarClass||(b.titleBarClass=haxapp.ui.WindowFrame.DEFAULT_TITLE_BAR_CLASS),hax.EventManager.init.call(this),this.parentContainer=a,this.parentElement=a.getContainerElement(),this.options=b,this.windowState=haxapp.ui.WindowFrame.NORMAL,this.coordinateInfo={},this.coordinateInfo.x=0,this.coordinateInfo.y=0,this.coordinateInfo.width=haxapp.ui.WindowFrame.DEFAULT_WINDOW_WIDTH,this.coordinateInfo.height=haxapp.ui.WindowFrame.DEFAULT_WINDOW_HEIGHT,this.isShowing=!1,this.frame=null,this.titleCell=null,this.bodyCell=null,this.headerCell=null,this.titleBar=null,this.titleBarLeftElements=null,this.titleBarRightElements=null,this.header=null,this.body=null,this.content=null,this.minimizeButton=null,this.restoreButton=null,this.maximizeButton=null,this.closable=null,this.windowDragActive=!1,this.moveOffsetX=null,this.moveOffsetX=null,this.moveOnMouseMove=null,this.moveOnMouseLeave=null,this.moveOnMouseUp=null,this.resizeEastActive=!1,this.resizeWestActive=!1,this.resizeNorthActive=!1,this.resizeSouthActive=!1,this.resizeOffsetWidth=null,this.resizeOffsetHeight=null,this.resizeOnMouseUp=null,this.resizeOnMouseMove=null,this.resizeOnMouseLeave=null,this.minWidth=0,this.minHeight=0,this.initUI();var c=this,d=function(a){c.parentContainer.bringToFront(c)},e=this.getElement();e.addEventListener("mousedown",d),this.onShow=function(){c.show()},this.onHide=function(){c.isShowing=!1};var f=this.parentContainer.getEventManager();f.addListener(haxapp.ui.ParentContainer.CONTENT_SHOWN,this.onShow),f.addListener(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this.onHide)},hax.util.mixin(haxapp.ui.WindowFrame,hax.EventManager),haxapp.ui.WindowFrame.MINIMIZED=-1,haxapp.ui.WindowFrame.NORMAL=0,haxapp.ui.WindowFrame.MAXIMIZED=1,haxapp.ui.WindowFrame.MINIMIZE_CMD_IMAGE="/minimize.png",haxapp.ui.WindowFrame.RESTORE_CMD_IMAGE="/restore.png",haxapp.ui.WindowFrame.MAXIMIZE_CMD_IMAGE="/maximize.png",haxapp.ui.WindowFrame.CLOSE_CMD_IMAGE="/close.png",haxapp.ui.WindowFrame.MENU_IMAGE="/hamburger.png",haxapp.ui.WindowFrame.RESIZE_LOCATION_SIZE=10,haxapp.ui.WindowFrame.RESIZE_TOLERANCE=5,haxapp.ui.WindowFrame.RESIZE_EAST=1,haxapp.ui.WindowFrame.RESIZE_WEST=2,haxapp.ui.WindowFrame.RESIZE_SOUTH=4,haxapp.ui.WindowFrame.RESIZE_NORTH=8,haxapp.ui.WindowFrame.RESIZE_NE=haxapp.ui.WindowFrame.RESIZE_NORTH+haxapp.ui.WindowFrame.RESIZE_EAST,haxapp.ui.WindowFrame.RESIZE_NW=haxapp.ui.WindowFrame.RESIZE_NORTH+haxapp.ui.WindowFrame.RESIZE_WEST,haxapp.ui.WindowFrame.RESIZE_SE=haxapp.ui.WindowFrame.RESIZE_SOUTH+haxapp.ui.WindowFrame.RESIZE_EAST,haxapp.ui.WindowFrame.RESIZE_SW=haxapp.ui.WindowFrame.RESIZE_SOUTH+haxapp.ui.WindowFrame.RESIZE_WEST,haxapp.ui.WindowFrame.DEFAULT_WINDOW_HEIGHT=300,haxapp.ui.WindowFrame.DEFAULT_WINDOW_WIDTH=300,haxapp.ui.WindowFrame.DEFAULT_TITLE_BAR_CLASS="visiui_win_titleBarClass",haxapp.ui.WindowFrame.DEFAULT_FRAME_COLOR_CLASS="visiui_win_windowColorClass",haxapp.ui.WindowFrame.TITLE_BAR_LEFT_STYLE={display:"inline",width:"100%"},haxapp.ui.WindowFrame.TITLE_BAR_RIGHT_STYLE={"float":"right",display:"inline"},haxapp.ui.WindowFrame.TITLE_STYLE={display:"inline-block",cursor:"default","font-weight":"bold",color:"darkblue"},haxapp.ui.WindowFrame.COMMAND_BUTTON_STYLE={display:"inline-block",marginRight:"3px"},haxapp.ui.WindowFrame.prototype.getTitle=function(a){return this.title},haxapp.ui.WindowFrame.prototype.setTitle=function(a){null!==a&&void 0!==a&&0!==a.length||(a="&nbsp;"),this.title=a,this.titleElement||(this.titleElement=document.createElement("div"),haxapp.ui.applyStyle(this.titleElement,haxapp.ui.WindowFrame.TITLE_STYLE)),this.titleElement.innerHTML=a,this.titleBarLeftElements.appendChild(this.titleElement)},haxapp.ui.WindowFrame.prototype.getMenu=function(){if(!this.menu){this.menu=haxapp.ui.Menu.createMenuFromImage(haxapp.ui.getResourcePath(haxapp.ui.WindowFrame.MENU_IMAGE));var a=this.titleBarLeftElements.firstChild;a?this.titleBarLeftElements.insertBefore(this.menu.getElement(),a):this.titleBarLeftElements.appendChild(this.menu.getElement())}return this.menu},haxapp.ui.WindowFrame.prototype.loadHeaders=function(a){if(hax.util.removeAllChildren(this.headerElement),a.length>0)for(var b=0;b<a.length;b++)this.headerElement.appendChild(a[b])},haxapp.ui.WindowFrame.prototype.changeParent=function(a){this.hide();var b=this.parentContainer,c=b.getEventManager();c.removeListener(haxapp.ui.ParentContainer.CONTENT_SHOWN,this.onShow),c.removeListener(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this.onHide),this.parentContainer=a,this.parentElement=a.getContainerElement();var d=a.getEventManager();d.addListener(haxapp.ui.ParentContainer.CONTENT_SHOWN,this.onShow),d.addListener(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this.onHide),this.show()},haxapp.ui.WindowFrame.prototype.show=function(){this.isShowing||(this.parentContainer.addWindow(this),this.parentContainer.getContentIsShowing()&&(this.isShowing=!0,this.frameShown(),void 0!==this.coordinateInfo.height&&this.updateCoordinates()))},haxapp.ui.WindowFrame.prototype.hide=function(){this.parentContainer.removeWindow(this),this.isShowing&&(this.isShowing=!1,this.frameHidden())},haxapp.ui.WindowFrame.prototype.deleteWindow=function(){var a=this.parentContainer.getEventManager();a.removeListener(haxapp.ui.ParentContainer.CONTENT_SHOWN,this.onShow),a.removeListener(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this.onHide),this.hide()},haxapp.ui.WindowFrame.prototype.getIsShowing=function(){return this.isShowing},haxapp.ui.WindowFrame.prototype.getContentIsShowing=function(){return this.isShowing&&this.windowState!=haxapp.ui.WindowFrame.MINIMIZED},haxapp.ui.WindowFrame.prototype.setPosition=function(a,b){a<0&&(a=0),b<0&&(b=0),this.coordinateInfo.x=a,this.coordinateInfo.y=b,this.updateCoordinates()},haxapp.ui.WindowFrame.prototype.setSize=function(a,b){this.coordinateInfo.width=a,this.coordinateInfo.height=b,this.updateCoordinates()},haxapp.ui.WindowFrame.prototype.fitToContent=function(a){var b=this.body.offsetWidth,c=this.body.offsetHeight,d=a.offsetWidth,e=a.offsetHeight,f=this.coordinateInfo.width+d-b+haxapp.ui.WindowFrame.FIT_WIDTH_BUFFER,g=this.coordinateInfo.height+e-c+haxapp.ui.WindowFrame.FIT_HEIGHT_BUFFER;this.setSize(f,g)},haxapp.ui.WindowFrame.prototype.centerInParent=function(){var a=this.parentContainer.getCenterOnPagePosition(this);this.setPosition(a[0],a[1])},haxapp.ui.WindowFrame.FIT_HEIGHT_BUFFER=20,haxapp.ui.WindowFrame.FIT_WIDTH_BUFFER=20,haxapp.ui.WindowFrame.prototype.getCoordinateInfo=function(){return this.coordinateInfo},haxapp.ui.WindowFrame.prototype.setCoordinateInfo=function(a){this.coordinateInfo=a,this.updateCoordinates()},haxapp.ui.WindowFrame.prototype.getWindowState=function(){return this.windowState},haxapp.ui.WindowFrame.prototype.setWindowState=function(a){switch(a){case haxapp.ui.WindowFrame.NORMAL:this.restoreContent();break;case haxapp.ui.WindowFrame.MINIMIZED:this.minimizeContent();break;case haxapp.ui.WindowFrame.MAXIMIZED:this.maximizeContent();break;default:alert("Unknown window state: "+a)}},haxapp.ui.WindowFrame.prototype.getElement=function(){return this.frame},haxapp.ui.WindowFrame.prototype.getBody=function(){return this.body},haxapp.ui.WindowFrame.prototype.getParent=function(){return this.parentContainer},haxapp.ui.WindowFrame.prototype.setContent=function(a){for(;this.body.firstChild;)this.body.removeChild(this.body.firstChild);this.content=a,this.content&&this.body.appendChild(this.content)},haxapp.ui.WindowFrame.prototype.setZIndex=function(a){this.frame.style.zIndex=String(a)},haxapp.ui.WindowFrame.prototype.addTitleBarElement=function(a){this.titleBarLeftElements.appendChild(a)},haxapp.ui.WindowFrame.prototype.removeTitleBarElement=function(a){this.titleBarLeftElements.appendRemove(a)},haxapp.ui.WindowFrame.prototype.addRightTitleBarElement=function(a){this.titleBarRightElements.firstChild?this.titleBarRightElements.insertBefore(a,this.titleBarRightElements.firstChild):this.titleBarRightElements.appendChild(a)},haxapp.ui.WindowFrame.prototype.removeRightTitleBarElement=function(a){this.titleBarRightElements.appendRemove(a)},haxapp.ui.WindowFrame.prototype.moveMouseDown=function(a){this.windowState!==haxapp.ui.WindowFrame.MAXIMIZED&&this.parentElement&&(this.windowDragActive=!0,this.moveOffsetX=a.clientX-this.frame.offsetLeft,this.moveOffsetY=a.clientY-this.frame.offsetTop,this.parentElement.addEventListener("mousemove",this.moveOnMouseMove),this.parentElement.addEventListener("mouseleave",this.moveOnMouseLeave),this.parentElement.addEventListener("mouseup",this.moveOnMouseUp))},haxapp.ui.WindowFrame.prototype.moveMouseMove=function(a){if(this.windowDragActive){var b=a.clientX-this.moveOffsetX;b<0&&(b=0);var c=a.clientY-this.moveOffsetY;c<0&&(c=0),this.coordinateInfo.x=b,this.coordinateInfo.y=c,this.updateCoordinates()}},haxapp.ui.WindowFrame.prototype.moveMouseUp=function(a){this.endMove()},haxapp.ui.WindowFrame.prototype.moveMouseLeave=function(a){this.endMove()},haxapp.ui.WindowFrame.prototype.resizeMouseDown=function(a,b){this.windowState!==haxapp.ui.WindowFrame.MAXIMIZED&&b&&(b&haxapp.ui.WindowFrame.RESIZE_EAST?(this.resizeEastActive=!0,this.resizeOffsetWidth=a.clientX-this.frame.clientWidth):b&haxapp.ui.WindowFrame.RESIZE_WEST&&(this.resizeWestActive=!0,this.resizeOffsetWidth=a.clientX+this.frame.clientWidth,this.moveOffsetX=a.clientX-this.frame.offsetLeft),b&haxapp.ui.WindowFrame.RESIZE_SOUTH?(this.resizeSouthActive=!0,this.resizeOffsetHeight=a.clientY-this.frame.clientHeight):b&haxapp.ui.WindowFrame.RESIZE_NORTH&&(this.resizeNorthActive=!0,this.resizeOffsetHeight=a.clientY+this.frame.clientHeight,this.moveOffsetY=a.clientY-this.frame.offsetTop),this.parentElement.addEventListener("mouseup",this.resizeOnMouseUp),this.parentElement.addEventListener("mousemove",this.resizeOnMouseMove),this.parentElement.addEventListener("mouseleave",this.resizeOnMouseLeave))},haxapp.ui.WindowFrame.prototype.resizeMouseMove=function(a){var b,c,d,e,f=!1;if(this.resizeEastActive){if(c=a.clientX-this.resizeOffsetWidth,c<this.minWidth)return;this.coordinateInfo.width=c,f=!0}else if(this.resizeWestActive){if(c=this.resizeOffsetWidth-a.clientX,c<this.minWidth)return;d=a.clientX-this.moveOffsetX,d<0&&(d=0),this.coordinateInfo.width=c,this.coordinateInfo.x=d,f=!0}if(this.resizeSouthActive){if(b=a.clientY-this.resizeOffsetHeight,b<this.minHeight)return;this.coordinateInfo.height=b,f=!0}else if(this.resizeNorthActive){if(b=this.resizeOffsetHeight-a.clientY,b<this.minHeight)return;e=a.clientY-this.moveOffsetY,e<0&&(e=0),this.coordinateInfo.height=b,this.coordinateInfo.y=e,f=!0}f&&this.updateCoordinates()},haxapp.ui.WindowFrame.prototype.resizeMouseUp=function(a){this.endResize()},haxapp.ui.WindowFrame.prototype.resizeMouseLeave=function(a){this.endResize()},haxapp.ui.WindowFrame.prototype.endMove=function(a){this.windowDragActive=!1,this.parentElement.removeEventListener("mousemove",this.moveOnMouseMove),this.parentElement.removeEventListener("mouseup",this.moveOnMouseUp)},haxapp.ui.WindowFrame.prototype.endResize=function(){this.resizeEastActive=!1,this.resizeWestActive=!1,this.resizeSouthActive=!1,this.resizeNorthActive=!1,this.parentElement.removeEventListener("mouseup",this.resizeOnMouseUp),this.parentElement.removeEventListener("mousemove",this.resizeOnMouseMove)},haxapp.ui.WindowFrame.prototype.minimizeContent=function(){this.body.style.display="none";var a=this.windowState===haxapp.ui.WindowFrame.MINIMIZED;this.windowState===haxapp.ui.WindowFrame.MAXIMIZED;this.windowState=haxapp.ui.WindowFrame.MINIMIZED,this.updateCoordinates(),this.setMinMaxButtons(),a||this.contentOnlyHidden()},haxapp.ui.WindowFrame.prototype.restoreContent=function(){this.body.style.display="";var a=this.windowState===haxapp.ui.WindowFrame.MINIMIZED;this.windowState===haxapp.ui.WindowFrame.MAXIMIZED;this.windowState=haxapp.ui.WindowFrame.NORMAL,this.updateCoordinates(),this.setMinMaxButtons(),a&&this.contentOnlyShown()},haxapp.ui.WindowFrame.prototype.maximizeContent=function(){this.body.style.display="";var a=this.windowState===haxapp.ui.WindowFrame.MINIMIZED;this.windowState=haxapp.ui.WindowFrame.MAXIMIZED,this.updateCoordinates(),this.setMinMaxButtons(),a&&this.contentOnlyShown()},haxapp.ui.WindowFrame.prototype.setMinMaxButtons=function(){this.minimizeButton&&(this.windowState==haxapp.ui.WindowFrame.MINIMIZED?this.minimizeButton.style.display="none":this.minimizeButton.style.display=""),this.restoreButton&&(this.windowState==haxapp.ui.WindowFrame.NORMAL?this.restoreButton.style.display="none":this.restoreButton.style.display=""),this.maximizeButton&&(this.windowState==haxapp.ui.WindowFrame.MAXIMIZED?this.maximizeButton.style.display="none":this.maximizeButton.style.display="")},haxapp.ui.WindowFrame.prototype.updateCoordinates=function(){this.windowState===haxapp.ui.WindowFrame.MAXIMIZED?(this.frame.style.left="0px",this.frame.style.top="0px",this.frame.style.height="100%",this.frame.style.width="100%"):this.windowState===haxapp.ui.WindowFrame.NORMAL?(this.frame.style.left=this.coordinateInfo.x+"px",this.frame.style.top=this.coordinateInfo.y+"px",void 0!==this.coordinateInfo.height?this.frame.style.height=this.coordinateInfo.height+"px":this.frame.style.height=haxapp.ui.WindowFrame.DEFAULT_WINDOW_HEIGHT+"px",void 0!==this.coordinateInfo.width?this.frame.style.width=this.coordinateInfo.width+"px":this.frame.style.width=haxapp.ui.WindowFrame.DEFAULT_WINDOW_WIDTH+"px"):this.windowState===haxapp.ui.WindowFrame.MINIMIZED&&(this.frame.style.left=this.coordinateInfo.x+"px",this.frame.style.top=this.coordinateInfo.y+"px",this.frame.style.height="0px",this.frame.style.width="0px")},haxapp.ui.WindowFrame.prototype.frameShown=function(){this.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_SHOWN,this)},haxapp.ui.WindowFrame.prototype.frameHidden=function(){this.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this)},haxapp.ui.WindowFrame.prototype.contentOnlyShown=function(){this.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_SHOWN,this)},haxapp.ui.WindowFrame.prototype.contentOnlyHidden=function(){this.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this)},haxapp.ui.WindowFrame.prototype.initUI=function(){var a,b,c;a=document.createElement("table"),a.className="visiui_win_main",this.frame=a,b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_topLeft",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_WEST|haxapp.ui.WindowFrame.RESIZE_NORTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_top",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_NORTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_topRight",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_EAST|haxapp.ui.WindowFrame.RESIZE_NORTH),b.appendChild(c),b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_left",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_WEST),c.rowSpan=3,b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass,this.titleBarCell=c,b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_right",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_EAST),c.rowSpan=3,b.appendChild(c),b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className="visiui_win_headerCell",this.headerCell=c,b.appendChild(c),b=document.createElement("tr"),b.className="visiui_win_bodyRow",a.appendChild(b),c=document.createElement("td"),c.className="visiui_win_bodyCell",this.bodyCell=c,b.appendChild(c),b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_bottomLeft",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_WEST|haxapp.ui.WindowFrame.RESIZE_SOUTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_bottom",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_SOUTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_bottomRight",this.addResizeHandlers(c,haxapp.ui.WindowFrame.RESIZE_EAST|haxapp.ui.WindowFrame.RESIZE_SOUTH),b.appendChild(c),this.createTitleBar(),this.createHeaderContainer(),this.createBody()},haxapp.ui.WindowFrame.prototype.addResizeHandlers=function(a,b){if(this.options.resizable){var c=this;a.onmousedown=function(a){c.resizeMouseDown(a,b)},this.resizeOnMouseMove||(this.resizeOnMouseMove=function(a){c.resizeMouseMove(a)},this.resizeOnMouseUp=function(a){c.resizeMouseUp(a)},this.resizeOnMouseLeave=function(a){c.resizeMouseLeave(a)})}},haxapp.ui.WindowFrame.prototype.createTitleBar=function(){this.titleBar=document.createElement("div"),this.titleBar.className=this.options.titleBarClass,this.titleBarLeftElements=document.createElement("div"),haxapp.ui.applyStyle(this.titleBarLeftElements,haxapp.ui.WindowFrame.TITLE_BAR_LEFT_STYLE),this.titleBar.appendChild(this.titleBarLeftElements),this.titleBarRightElements=document.createElement("div"),haxapp.ui.applyStyle(this.titleBarRightElements,haxapp.ui.WindowFrame.TITLE_BAR_RIGHT_STYLE),this.titleBar.appendChild(this.titleBarRightElements);var a=this;this.options.minimizable&&(this.minimizeButton=document.createElement("img"),haxapp.ui.applyStyle(this.minimizeButton,haxapp.ui.WindowFrame.COMMAND_BUTTON_STYLE),this.minimizeButton.src=haxapp.ui.getResourcePath(haxapp.ui.WindowFrame.MINIMIZE_CMD_IMAGE),this.minimizeButton.onclick=function(){a.minimizeContent()},this.titleBarRightElements.appendChild(this.minimizeButton)),(this.options.minimizable||this.options.maximizable)&&(this.restoreButton=document.createElement("img"),haxapp.ui.applyStyle(this.restoreButton,haxapp.ui.WindowFrame.COMMAND_BUTTON_STYLE),this.restoreButton.src=haxapp.ui.getResourcePath(haxapp.ui.WindowFrame.RESTORE_CMD_IMAGE),this.restoreButton.onclick=function(){a.restoreContent()},this.titleBarRightElements.appendChild(this.restoreButton)),this.options.maximizable&&(this.maximizeButton=document.createElement("img"),haxapp.ui.applyStyle(this.maximizeButton,haxapp.ui.WindowFrame.COMMAND_BUTTON_STYLE),this.maximizeButton.src=haxapp.ui.getResourcePath(haxapp.ui.WindowFrame.MAXIMIZE_CMD_IMAGE),this.maximizeButton.onclick=function(){a.maximizeContent()},this.titleBarRightElements.appendChild(this.maximizeButton)),this.windowState=haxapp.ui.WindowFrame.NORMAL,this.setMinMaxButtons(),this.options.closable&&(this.closeButton=document.createElement("img"),haxapp.ui.applyStyle(this.closeButton,haxapp.ui.WindowFrame.COMMAND_BUTTON_STYLE),this.closeButton.src=haxapp.ui.getResourcePath(haxapp.ui.WindowFrame.CLOSE_CMD_IMAGE),this.closeButton.onclick=function(){a.hide()},this.titleBarRightElements.appendChild(this.closeButton)),this.setTitle(""),this.options.movable&&(this.titleBar.onmousedown=function(b){a.moveMouseDown(b)},this.moveOnMouseMove=function(b){a.moveMouseMove(b)},this.moveOnMouseUp=function(b){a.moveMouseUp(b)},this.moveOnMouseLeave=function(b){a.moveMouseLeave(b)}),this.titleBarCell.appendChild(this.titleBar)},haxapp.ui.WindowFrame.prototype.createHeaderContainer=function(){this.headerElement=document.createElement("div"),this.headerElement.className="visiui_win_header",this.headerCell.appendChild(this.headerElement),this.loadHeaders([])},haxapp.ui.WindowFrame.prototype.createBody=function(){this.body=document.createElement("div"),this.body.className="visiui_win_body",this.bodyCell.appendChild(this.body)},haxapp.ui.SimpleParentContainer=function(a,b){hax.EventManager.init.call(this),haxapp.ui.ParentContainer.init.call(this,a,this),this.isShowing=b},hax.util.mixin(haxapp.ui.SimpleParentContainer,hax.EventManager),hax.util.mixin(haxapp.ui.SimpleParentContainer,haxapp.ui.ParentContainer),haxapp.ui.SimpleParentContainer.prototype.getContentIsShowing=function(){return this.isShowing},haxapp.ui.SimpleParentContainer.prototype.isShown=function(){this.isShowing=!0,this.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_SHOWN,this)},haxapp.ui.SimpleParentContainer.prototype.isHidden=function(){this.isShowing=!1,this.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_HIDDEN,this)},haxapp.ui.TabFrame=function(a,b){b||(b={}),b.tabBarColorClass&&b.activeTabColorClass||alert("The tabBarColorClass and  activeTabColorClass must be set in the options for tab frame!"),b.titleBarClass="",hax.EventManager.init.call(this),this.options=b,this.tabTable={},this.activeTab=null,this.tabFrameControl=document.createElement("div"),haxapp.ui.applyStyle(this.tabFrameControl,haxapp.ui.TabFrame.CONTAINER_STYLE),a.appendChild(this.tabFrameControl),this.tabFrame=document.createElement("div"),haxapp.ui.applyStyle(this.tabFrame,haxapp.ui.TabFrame.DISPLAY_FRAME_STYLE),this.tabFrameControl.appendChild(this.tabFrame),this.tabBar=document.createElement("div"),haxapp.ui.applyStyle(this.tabBar,haxapp.ui.TabFrame.TAB_BAR_STYLE),this.tabBar.className=this.options.tabBarColorClass,this.tabFrameControl.appendChild(this.tabBar),haxapp.ui.ParentContainer.init.call(this,this.tabFrame,this)},hax.util.mixin(haxapp.ui.TabFrame,hax.EventManager),hax.util.mixin(haxapp.ui.TabFrame,haxapp.ui.ParentContainer),haxapp.ui.TabFrame.TAB_SHOWN="tabShown",haxapp.ui.TabFrame.TABS_RESIZED="tabsResized",haxapp.ui.TabFrame.CONTAINER_FRAME_MARGIN_PX=5,haxapp.ui.TabFrame.CONTAINER_STYLE={position:"relative",display:"table",width:"100%",height:"100%",top:"0px",left:"0px"},haxapp.ui.TabFrame.DISPLAY_FRAME_STYLE={position:"relative",display:"table-row",width:"100%",height:"100%",top:"0px",left:"0px",backgroundColor:"white",borderBottomWidth:" 0px"},haxapp.ui.TabFrame.TAB_BAR_STYLE={position:"relative",display:"table-row",width:"100%",margin:"0px",border:" 1px solid gray",borderTopWidth:" 0px"},haxapp.ui.TabFrame.TAB_BASE_STYLE={display:"inline-block",cursor:" default",border:" 1px solid black",padding:"2px"},haxapp.ui.TabFrame.TAB_INACTIVE_STYLE={display:"inline-block",cursor:" default",border:" 1px solid black",borderTopColor:"",padding:"2px"},haxapp.ui.TabFrame.TAB_ACTIVE_STYLE={display:"inline-block",cursor:" default",border:" 1px solid black",borderTopColor:"white",padding:"2px"},haxapp.ui.TabFrame.prototype.getElement=function(){return this.tabFrameControl},haxapp.ui.TabFrame.prototype.getTab=function(a){var b=this.tabTable[a];return b?b.tabDisplay:null},haxapp.ui.TabFrame.prototype.addTab=function(a){if(this.tabTable[a])return alert("There is already a tab with this name!"),null;var b=new haxapp.ui.Tab(a,this);this.tabFrame.appendChild(b.getContainerElement());var c=document.createElement("div");haxapp.ui.applyStyle(c,haxapp.ui.TabFrame.TAB_BASE_STYLE),c.innerHTML=a,this.tabBar.appendChild(c);var d=this;c.onclick=function(){d.setActiveTab(a)},c.onmousedown=function(a){a.preventDefault()};var e={};return e.tabDisplay=b,e.tabLabel=c,this.tabTable[a]=e,null==this.activeTab&&(this.activeTab=a),this.updateTabDisplay(),b},haxapp.ui.TabFrame.prototype.removeTab=function(a){var b=this.tabTable[a];if(b){if(this.tabFrame.removeChild(b.tabDisplay.getContainerElement()),this.tabBar.removeChild(b.tabLabel),delete this.tabTable[a],this.activeTab==a){this.activeTab=null;for(var c in this.tabTable){this.activeTab=c;break}}this.updateTabDisplay()}},haxapp.ui.TabFrame.prototype.setActiveTab=function(a){this.activeTab=a,this.updateTabDisplay()},haxapp.ui.TabFrame.prototype.getActiveTabTitle=function(){return this.activeTab},haxapp.ui.TabFrame.prototype.updateTabDisplay=function(){var a;for(a in this.tabTable){var b=this.tabTable[a];a==this.activeTab?(b.tabDisplay.getContainerElement().style.display="",haxapp.ui.applyStyle(b.tabLabel,haxapp.ui.TabFrame.TAB_ACTIVE_STYLE),b.tabLabel.className=this.options.activeTabColorClass,this.dispatchEvent(haxapp.ui.TabFrame.TAB_SHOWN,this.activeTab)):(b.tabDisplay.getContainerElement().style.display="none",haxapp.ui.applyStyle(b.tabLabel,haxapp.ui.TabFrame.TAB_INACTIVE_STYLE),b.tabLabel.className=this.options.tabBarColorClass)}},haxapp.ui.Tab=function(a,b){var c=document.createElement("div");hax.EventManager.init.call(this),haxapp.ui.ParentContainer.init.call(this,c,this),haxapp.ui.ParentHighlighter.init.call(this,c),this.name=a,this.isShowing=!1,haxapp.ui.applyStyle(c,haxapp.ui.Tab.TAB_WINDOW_STYLE),this.displayFrame=c;var d=this;b.addListener(haxapp.ui.TabFrame.TABS_RESIZED,function(){d.dispatchEvent(haxapp.ui.WindowFrame.RESIZED,this)}),b.addListener(haxapp.ui.TabFrame.TAB_SHOWN,function(a){a==d.name?(d.isShowing=!0,d.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_SHOWN,d)):(d.isShowing=!1,d.dispatchEvent(haxapp.ui.ParentContainer.CONTENT_HIDDEN,d))})},hax.util.mixin(haxapp.ui.Tab,hax.EventManager),hax.util.mixin(haxapp.ui.Tab,haxapp.ui.ParentContainer),hax.util.mixin(haxapp.ui.Tab,haxapp.ui.ParentHighlighter),haxapp.ui.Tab.TAB_WINDOW_STYLE={top:"0px",left:"0px",height:"100%",position:"relative",backgroundColor:"white",overflow:"auto"},haxapp.ui.Tab.prototype.getContentIsShowing=function(){return this.isShowing},haxapp.ui.Menu={},haxapp.ui.Menu.initialized=!1,haxapp.ui.Menu.activeMenu=null,haxapp.ui.Menu.createMenu=function(a){var b=document.createElement("div");return b.innerHTML=a,new haxapp.ui.MenuHeader(b)},haxapp.ui.Menu.createMenuFromImage=function(a){var b=document.createElement("img");b.src=a;var c=document.createElement("div");return c.appendChild(b),new haxapp.ui.MenuHeader(c)},haxapp.ui.Menu.showContextMenu=function(a,b){a.setPosition(b.clientX,b.clientY,document.body),b.preventDefault(),haxapp.ui.Menu.show(a)},haxapp.ui.Menu.menuHeaderPressed=function(a){haxapp.ui.Menu.activeMenu?haxapp.ui.Menu.hideActiveMenu():haxapp.ui.Menu.show(a.getMenuBody())},haxapp.ui.Menu.menuHeaderEntered=function(a){haxapp.ui.Menu.activeMenu&&!haxapp.ui.Menu.activeMenu.getIsContext()&&haxapp.ui.Menu.show(a.getMenuBody())},haxapp.ui.Menu.nonMenuPressed=function(){haxapp.ui.Menu.activeMenu&&haxapp.ui.Menu.hideActiveMenu()},haxapp.ui.Menu.show=function(a){haxapp.ui.Menu.activeMenu&&haxapp.ui.Menu.hideActiveMenu();var b=a.getParentElement(),c=a.getMenuElement();b&&c&&(b.appendChild(c),haxapp.ui.Menu.activeMenu=a)},haxapp.ui.Menu.hideActiveMenu=function(){if(haxapp.ui.Menu.activeMenu){var a=haxapp.ui.Menu.activeMenu.getParentElement(),b=haxapp.ui.Menu.activeMenu.getMenuElement(),c=haxapp.ui.Menu.activeMenu.getMenuHeader();a&&b&&(a.removeChild(b),haxapp.ui.Menu.activeMenu=null),c&&c.restoreNormalAppearance()}},haxapp.ui.Menu.nonMenuMouseHandler=null,haxapp.ui.Menu.initialize=function(){window.addEventListener("mousedown",haxapp.ui.Menu.nonMenuPressed),
haxapp.ui.Menu.initialized=!0},haxapp.ui.Menu.deinitialize=function(){window.removeEventListener("mousedown",haxapp.ui.Menu.nonMenuPressed),haxapp.ui.Menu.initialized=!1},haxapp.ui.MenuHeader=function(a){haxapp.ui.Menu.initialized||haxapp.ui.Menu.initialize(),this.domElement=a,this.menuBody=new haxapp.ui.MenuBody,this.initHeadingElement(),this.menuBody.attachToMenuHeader(this)},haxapp.ui.MenuHeader.MENU_HEADING_BASE_STYLE={display:"inline-block",position:"relative",cursor:" default",overflow:"visible"},haxapp.ui.MenuHeader.MENU_HEADING_NORMAL_STYLE={border:"",backgroundColor:"",padding:"2px"},haxapp.ui.MenuHeader.MENU_HEADING_HOVER_STYLE={backgroundColor:"lightgray",padding:"2px"},haxapp.ui.MenuHeader.prototype.getElement=function(){return this.domElement},haxapp.ui.MenuHeader.prototype.getMenuBody=function(){return this.menuBody},haxapp.ui.MenuHeader.prototype.addEventMenuItem=function(a,b,c,d){this.menuBody.addEventMenuItem(a,b,c,d)},haxapp.ui.MenuHeader.prototype.addCallbackMenuItem=function(a,b){this.menuBody.addCallbackMenuItem(a,b)},haxapp.ui.MenuHeader.prototype.addMenuItem=function(a){this.menuBody.addMenuItem(a)},haxapp.ui.MenuHeader.prototype.setMenuItems=function(a){this.menuBody.setMenuItems(a)},haxapp.ui.MenuHeader.prototype.removeMenuItem=function(a){this.menuBody.removeMenuItem(a)},haxapp.ui.MenuHeader.prototype.initHeadingElement=function(){haxapp.ui.applyStyle(this.domElement,haxapp.ui.MenuHeader.MENU_HEADING_BASE_STYLE),haxapp.ui.applyStyle(this.domElement,haxapp.ui.MenuHeader.MENU_HEADING_NORMAL_STYLE);var a=this;this.domElement.onmousedown=function(b){haxapp.ui.Menu.menuHeaderPressed(a),b.stopPropagation()},this.domElement.onmouseenter=function(b){haxapp.ui.applyStyle(a.domElement,haxapp.ui.MenuHeader.MENU_HEADING_HOVER_STYLE),haxapp.ui.Menu.menuHeaderEntered(a)},this.domElement.onmouseleave=function(b){haxapp.ui.applyStyle(a.domElement,haxapp.ui.MenuHeader.MENU_HEADING_NORMAL_STYLE)}},haxapp.ui.MenuHeader.prototype.restoreNormalAppearance=function(){haxapp.ui.applyStyle(this.domElement,haxapp.ui.MenuHeader.MENU_HEADING_NORMAL_STYLE)},haxapp.ui.MenuBody=function(){haxapp.ui.Menu.initialized||haxapp.ui.Menu.initialize(),this.menuDiv=null,this.parentElement=null,this.menuItems={},this.createMenuElement(),this.menuHeader=null},haxapp.ui.MenuBody.MENU_STYLE={overflow:"visible",position:"absolute",top:"100%",left:"0%",zIndex:"2000",border:"1px solid lightgray",backgroundColor:"white"},haxapp.ui.MenuBody.MENU_ITEM_BASE_STYLE={cursor:"default",display:"table"},haxapp.ui.MenuBody.MENU_ITEM_NORMAL_STYLE={backgroundColor:"",padding:"2px"},haxapp.ui.MenuBody.MENU_ITEM_HOVER_STYLE={backgroundColor:"lightgray",padding:"2px"},haxapp.ui.MenuBody.convertSpacesForHtml=function(a){return a.replace(/ /g,"&nbsp;")},haxapp.ui.MenuBody.prototype.getMenuElement=function(){return this.menuDiv},haxapp.ui.MenuBody.prototype.getParentElement=function(){return this.parentElement},haxapp.ui.MenuBody.prototype.getMenuHeader=function(){return this.menuHeader},haxapp.ui.MenuBody.prototype.getIsContext=function(){return null==this.menuHeader},haxapp.ui.MenuBody.prototype.attachToMenuHeader=function(a){this.parentElement=a.getElement(),this.menuDiv.style.left="0%",this.menuDiv.style.top="100%",this.menuHeader=a},haxapp.ui.MenuBody.prototype.setPosition=function(a,b,c){this.parentElement=c,c.appendChild(this.menuDiv);var d=c.offsetWidth,e=c.offsetHeight,f=this.menuDiv.clientWidth,g=this.menuDiv.clientHeight;c.appendChild(this.menuDiv),a+f>d&&a>d/2?this.menuDiv.style.left=a-f+"px":this.menuDiv.style.left=a+"px",b+g>e&&b>e/2?this.menuDiv.style.top=b-g+"px":this.menuDiv.style.top=b+"px"},haxapp.ui.MenuBody.prototype.addEventMenuItem=function(a,b,c,d){var e={};e.title=a,e.eventName=b,e.eventData=c,e.eventManager=d,this.addMenuItem(e)},haxapp.ui.MenuBody.prototype.addCallbackMenuItem=function(a,b){var c={};c.title=a,c.callback=b,this.addMenuItem(c)},haxapp.ui.MenuBody.prototype.addMenuItem=function(a){a.element=document.createElement("div"),haxapp.ui.applyStyle(a.element,haxapp.ui.MenuBody.MENU_ITEM_NORMAL_STYLE);var b=haxapp.ui.MenuBody.convertSpacesForHtml(a.title);a.element.innerHTML=b,a.element.onmousedown=function(a){a.stopPropagation()},a.element.onmouseup=function(b){haxapp.ui.Menu.hideActiveMenu(),a.eventName?a.eventManager.dispatchEvent(a.eventName,a.eventData):a.callback&&a.callback(),b.stopPropagation(),haxapp.ui.applyStyle(a.element,haxapp.ui.MenuBody.MENU_ITEM_NORMAL_STYLE)},a.element.onmouseenter=function(b){haxapp.ui.applyStyle(a.element,haxapp.ui.MenuBody.MENU_ITEM_HOVER_STYLE)},a.element.onmouseleave=function(b){haxapp.ui.applyStyle(a.element,haxapp.ui.MenuBody.MENU_ITEM_NORMAL_STYLE)},this.menuDiv.appendChild(a.element),this.menuItems[a.title]=a},haxapp.ui.MenuBody.prototype.setMenuItems=function(a){for(var b=0;b<a.length;b++)this.addMenuItem(a[b])},haxapp.ui.MenuBody.prototype.removeMenuItem=function(a){var b=this.menuItems[a];b&&(this.menuDiv.removeChild(b.element),delete this.menuItems[a])},haxapp.ui.MenuBody.prototype.createMenuElement=function(){this.menuDiv=document.createElement("div"),haxapp.ui.applyStyle(this.menuDiv,haxapp.ui.MenuBody.MENU_STYLE)},haxapp.jsonedit={};var OBJECT_CONSTRUCTOR={}.constructor,ARRAY_CONSTRUCTOR=[].constructor,STRING_CONSTRUCTOR="".constructor,NUMBER_CONSTRUCTOR=(0).constructor,BOOLEAN_CONSTRUCTOR=(!0).constructor;haxapp.jsonedit.getObjectType=function(a){return null==a?"value":a.constructor==OBJECT_CONSTRUCTOR?"object":a.constructor==ARRAY_CONSTRUCTOR?"array":"value"},haxapp.jsonedit.getValueType=function(a){return null==a?"null":a.constructor==STRING_CONSTRUCTOR?"string":a.constructor==NUMBER_CONSTRUCTOR?"number":a.constructor==BOOLEAN_CONSTRUCTOR?"boolean":"other"},haxapp.jsonedit.isBoolString=function(a){return"false"===a||"true"===a},haxapp.jsonedit.isNullString=function(a){return"null"===a},haxapp.jsonedit.canBeConvertedToNonString=function(a){return isFinite(a)||haxapp.jsonedit.isBoolString(a)||haxapp.jsonedit.isNullString(a)},haxapp.jsonedit.stringToNonString=function(stringValue){var stringToValueCode="value = "+stringValue,value;try{return eval(stringToValueCode),value}catch(error){return stringValue}};var PIXELS_PER_INDENT=10;haxapp.jsonedit.createIndentElement=function(a){var b=document.createElement("div");return b.className="indentCell",b.style.width=PIXELS_PER_INDENT*a+"px",b},haxapp.jsonedit.createObjectDelimiter=function(a){var b=document.createElement("div");return b.className="objectDelimCell",b.innerHTML=a,b},haxapp.jsonedit.createExpandButton=function(a){var b=document.createElement("div");return b.className="buttonCell",b.innerHTML="+",b.onclick=function(){a.setExpanded(!0)},b},haxapp.jsonedit.createContractButton=function(a){var b=document.createElement("div");return b.className="buttonCell",b.innerHTML="-",b.onclick=function(){a.setExpanded(!1)},b},haxapp.jsonedit.KeyEntry=function(a,b,c,d,e,f,g){this.editArea=a,this.key=c,this.type=d,this.data=e,this.isEditable=f,this.indentLevel=b.getIndentLevel()+1,this.parentValue=b,this.isVirtual=g,this.body=null,this.keyEditObject=null,this.valueEntry=null,this.createBody(this.data)},haxapp.jsonedit.KeyEntry.prototype.setKey=function(a){this.key=a,this.keyEditObject.setValue(a)},haxapp.jsonedit.KeyEntry.prototype.getInitialKey=function(){return this.key},haxapp.jsonedit.KeyEntry.prototype.getCurrentKey=function(){return this.keyEditObject.getValue()},haxapp.jsonedit.KeyEntry.prototype.getCurrentValue=function(){return this.valueEntry.getCurrentValue()},haxapp.jsonedit.KeyEntry.prototype.getElement=function(){return this.body},haxapp.jsonedit.KeyEntry.prototype.getParentValueObject=function(){return this.parentValue},haxapp.jsonedit.KeyEntry.prototype.getIndentLevel=function(){return this.indentLevel},haxapp.jsonedit.KeyEntry.prototype.setIsVirtual=function(a){this.isVirtual=a,this.keyEditObject.setIsVirtual(a),this.valueEntry.setIsVirtual(a)},haxapp.jsonedit.KeyEntry.prototype.updateValueElements=function(){hax.util.removeAllChildren(this.body),this.formatBody()},haxapp.jsonedit.KeyEntry.prototype.createBody=function(a){this.body=document.createElement("div"),this.body.className="jsonBody",this.createKeyElement(),this.valueEntry=new haxapp.jsonedit.ValueEntry(this.editArea,this,a,this.isEditable,this.isVirtual),this.formatBody()},haxapp.jsonedit.KeyEntry.prototype.formatBody=function(){this.body.appendChild(haxapp.jsonedit.createIndentElement(this.indentLevel)),this.body.appendChild(this.keyEditObject.getElement());for(var a=this.valueEntry.getElementList(),b=0;b<a.length;b++)this.body.appendChild(a[b])},haxapp.jsonedit.KeyEntry.prototype.createKeyElement=function(){var a=this.type===haxapp.jsonedit.EditField.FIELD_TYPE_KEY&&this.isEditable;if(this.keyEditObject=new haxapp.jsonedit.EditField(this.key,this.type,a,this.isVirtual),a){var b=this,c=function(a){b.isVirtual&&b.parentValue.makeVirtualEntryReal(),b.editArea.valueEdited()};this.keyEditObject.setOnEditCallback(c);var d=function(a){b.navigateCells(a)};this.keyEditObject.setNavCallback(d)}},haxapp.jsonedit.KeyEntry.prototype.navigateCells=function(a){this.parentValue&&this.parentValue.navigateChildren(this,!0,a)},haxapp.jsonedit.KeyEntry.prototype.loadContextMenu=function(a,b){var c=this,d=this.parentValue,e=this.keyEditObject.getElement(),f=this.valueEntry,g=f.getType(),h=this.isVirtual;if(e.oncontextmenu=function(e){if(e.preventDefault(),e.stopPropagation(),c.isEditable){var i=new haxapp.ui.MenuBody;h||(i.addCallbackMenuItem("Insert Above",function(){d.insertElement("","",b)}),i.addCallbackMenuItem("Insert Below",function(){d.insertElement("","",b+1)}),b>0&&i.addCallbackMenuItem("Move Up",function(){d.moveChildKeyToNextIndex(b-1)}),b<a-1&&i.addCallbackMenuItem("Move Down",function(){d.moveChildKeyToNextIndex(b)}),c.isVirtual||i.addCallbackMenuItem("Delete Entry",function(){d.deleteChildElement(c)}),"value"==g?(i.addCallbackMenuItem("Convert To Object",function(){f.valueToObject()}),i.addCallbackMenuItem("Convert To Array",function(){f.valueToArray()}),f.convertibleToNumber()&&i.addCallbackMenuItem("Convert To Number",function(){f.valueToNonString()}),f.convertibleToBool()&&i.addCallbackMenuItem("Convert To Boolean",function(){f.valueToNonString()}),f.convertibleToNull()&&i.addCallbackMenuItem("Convert To Null",function(){f.valueToNonString()}),f.convertibleToString()&&i.addCallbackMenuItem("Convert To String",function(){f.valueToString()})):"object"==g?(i.addCallbackMenuItem("Convert To Value",function(){f.convertToValue()}),i.addCallbackMenuItem("Convert To Array",function(){f.objectToArray()})):"array"==g&&(i.addCallbackMenuItem("Convert To Value",function(){f.convertToValue()}),i.addCallbackMenuItem("Convert To Object",function(){f.arrayToObject()}))),haxapp.ui.Menu.showContextMenu(i,e)}},"value"==g){var i=this.valueEntry.getValueEditObject();i.getElement().oncontextmenu=e.oncontextmenu}},haxapp.jsonedit.KeyEntry.prototype.convertToKeyType=function(a){this.type!=haxapp.jsonedit.EditField.FIELD_TYPE_KEY&&(this.type=haxapp.jsonedit.EditField.FIELD_TYPE_KEY,this.key=String(a),this.createKeyElement(),hax.util.removeAllChildren(this.body),this.formatBody())},haxapp.jsonedit.KeyEntry.prototype.convertToIndexType=function(a){this.type!=haxapp.jsonedit.EditField.FIELD_TYPE_INDEX&&(this.type=haxapp.jsonedit.EditField.FIELD_TYPE_INDEX,this.key=a,this.createKeyElement(),hax.util.removeAllChildren(this.body),this.formatBody())},haxapp.jsonedit.ValueEntry=function(a,b,c,d,e){this.editArea=a,this.parent=b,this.data=c,this.isEditable=d,this.type=haxapp.jsonedit.getObjectType(c),this.indentLevel=b.getIndentLevel()+1,this.elementList=[],this.isVirtual=e,this.valueEditObject=null,this.childKeyEntries=[],this.virtualChildKey=null,this.listDiv=null,this.isExpanded=!0,this.expandedList=[],this.contractedList=[],"value"==this.type?this.createValueEntry(this.data):(this.createChildKeyEntries(this.data),this.updateChildKeys(),this.createElementList())},haxapp.jsonedit.ValueEntry.prototype.getInitialValue=function(){return this.data},haxapp.jsonedit.ValueEntry.prototype.getCurrentValue=function(){var a,b,c;if("value"==this.type)a=this.valueEditObject.getValue();else if("object"==this.type)for(a={},b=0;b<this.childKeyEntries.length;b++)c=this.childKeyEntries[b],a[c.getCurrentKey()]=c.getCurrentValue();else if("array"==this.type)for(a=[],b=0;b<this.childKeyEntries.length;b++)c=this.childKeyEntries[b],a[b]=c.getCurrentValue();return a},haxapp.jsonedit.ValueEntry.prototype.getType=function(){return this.type},haxapp.jsonedit.ValueEntry.prototype.setExpanded=function(a){this.isExpanded=a,this.doExpandContract()},haxapp.jsonedit.ValueEntry.prototype.getElementList=function(){return this.elementList},haxapp.jsonedit.ValueEntry.prototype.getValueEditObject=function(){return this.valueEditObject},haxapp.jsonedit.ValueEntry.prototype.getIndentLevel=function(){return this.indentLevel},haxapp.jsonedit.ValueEntry.prototype.setIsVirtual=function(a){this.isVirtual=a,this.valueEditObject.setIsVirtual(a)},haxapp.jsonedit.ValueEntry.prototype.navigateCells=function(a){var b=this.parent.getParentValueObject();b&&b.navigateChildren(this.parent,!1,a)},haxapp.jsonedit.ValueEntry.prototype.navigateChildren=function(a,b,c){var d,e=!1,f=0;if("array"==this.type?c==haxapp.jsonedit.EditField.DIRECTION_NEXT||c==haxapp.jsonedit.EditField.DIRECTION_DOWN?(d=!b,d&&(e=!1,f=1)):c==haxapp.jsonedit.EditField.DIRECTION_PREV||c==haxapp.jsonedit.EditField.DIRECTION_UP?(d=!b,d&&(e=!1,f=-1)):c!=haxapp.jsonedit.EditField.DIRECTION_RIGHT&&c!=haxapp.jsonedit.EditField.DIRECTION_LEFT||(d=!1):"object"==this.type&&(c==haxapp.jsonedit.EditField.DIRECTION_NEXT?(d=!0,e=!b,f=b?0:1):c==haxapp.jsonedit.EditField.DIRECTION_PREV?(d=!0,e=!b,f=b?-1:0):c==haxapp.jsonedit.EditField.DIRECTION_RIGHT?(d=b,d&&(e=!1,f=0)):c==haxapp.jsonedit.EditField.DIRECTION_LEFT?(d=!b,d&&(e=!0,f=0)):c==haxapp.jsonedit.EditField.DIRECTION_UP?(d=!0,e=b,f=-1):c==haxapp.jsonedit.EditField.DIRECTION_DOWN&&(d=!0,e=b,f=1)),d){var g,h,i=-1,j=null;if(g=a==this.virtualChildKey?this.childKeyEntries.length:this.childKeyEntries.indexOf(a),g>=0&&(i=g+f,i>=0&&i<this.childKeyEntries.length?j=this.childKeyEntries[i]:i==this.childKeyEntries.length&&(j=this.virtualChildKey)),j)if(e)h=j.keyEditObject;else{var k=j.valueEntry;"value"==k.getType()&&(h=k.valueEditObject)}h&&h.startEdit()}},haxapp.jsonedit.ValueEntry.prototype.insertElement=function(a,b,c){var d;void 0===c&&(c=this.childKeyEntries.length);var e;if(e=c>=this.childKeyEntries.length?this.virtualChildKey.getElement():this.childKeyEntries[c].getElement(),"object"==this.type)d=new haxapp.jsonedit.KeyEntry(this.editArea,this,a,"key",b,this.isEditable,(!1));else if("array"==this.type){d=new haxapp.jsonedit.KeyEntry(this.editArea,this,c,"index",b,this.isEditable,(!1));for(var f=c+1;f<this.childKeyEntries.length;f++)this.childKeyEntries[f].setKey(f);this.virtualChildKey.setKey(this.childKeyEntries.length+1)}this.childKeyEntries.splice(c,0,d),this.updateChildKeys(),this.listDiv.insertBefore(d.getElement(),e)},haxapp.jsonedit.ValueEntry.prototype.moveChildKeyToNextIndex=function(a){if(a<0||a>=this.childKeyEntries.length-1)return void alert("Can not make the specified key move");var b=this.childKeyEntries[a],c=this.childKeyEntries[a+1];this.childKeyEntries[a]=c,this.childKeyEntries[a+1]=b,this.updateChildKeys(),this.listDiv.insertBefore(c.getElement(),b.getElement())},haxapp.jsonedit.ValueEntry.prototype.deleteChildElement=function(a){var b=this.childKeyEntries.indexOf(a);return b==-1?void alert("Element not found!"):(this.childKeyEntries.splice(b,1),this.updateChildKeys(),void this.listDiv.removeChild(a.getElement()))},haxapp.jsonedit.ValueEntry.prototype.convertibleToNumber=function(){if("value"===this.type){var a=this.getCurrentValue(),b=haxapp.jsonedit.getValueType(a);if("string"===b)return isFinite(a)}return!1},haxapp.jsonedit.ValueEntry.prototype.convertibleToBool=function(){if("value"===this.type){var a=this.getCurrentValue(),b=haxapp.jsonedit.getValueType(a);if("string"===b)return haxapp.jsonedit.isBoolString(a)}return!1},haxapp.jsonedit.ValueEntry.prototype.convertibleToNull=function(){if("value"===this.type){var a=this.getCurrentValue(),b=haxapp.jsonedit.getValueType(a);if("string"===b)return haxapp.jsonedit.isNullString(a)}return!1},haxapp.jsonedit.ValueEntry.prototype.valueToNonString=function(){var a=this.getCurrentValue(),b=haxapp.jsonedit.stringToNonString(a);this.valueEditObject.setValue(b),this.editArea.valueEdited()},haxapp.jsonedit.ValueEntry.prototype.convertibleToString=function(){if("value"===this.type){var a=this.getCurrentValue(),b=haxapp.jsonedit.getValueType(a);return"string"!==b}return!1},haxapp.jsonedit.ValueEntry.prototype.valueToString=function(){var a=this.getCurrentValue(),b=String(a);this.valueEditObject.setValue(b),this.editArea.valueEdited()},haxapp.jsonedit.ValueEntry.prototype.valueToArray=function(){if("value"==!this.type)throw"Type value expected. Found "+this.type;this.type="array";var a=[this.valueEditObject.getValue()];if(this.createChildKeyEntries(a),this.updateChildKeys(),this.createElementList(),this.parent){var b=this.parent.getParentValueObject();b&&b.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},haxapp.jsonedit.ValueEntry.prototype.valueToObject=function(){if("value"==!this.type)throw"Type value expected. Found "+this.type;this.type="object";var a={a:this.valueEditObject.getValue()};if(this.createChildKeyEntries(a),this.updateChildKeys(),this.createElementList(),this.parent){var b=this.parent.getParentValueObject();b&&b.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},haxapp.jsonedit.ValueEntry.prototype.objectToArray=function(){if("object"==!this.type)throw"Type object expected. Found "+this.type;this.type="array";var a=0;if(this.childKeyEntries)for(a=0;a<this.childKeyEntries.length;a++){var b=this.childKeyEntries[a];b.convertToIndexType(a)}if(this.virtualChildKey&&this.virtualChildKey.convertToIndexType(a),this.valueEditObject=null,this.updateChildKeys(),this.createElementList(),this.parent){var c=this.parent.getParentValueObject();c&&c.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},haxapp.jsonedit.ValueEntry.prototype.arrayToObject=function(){if("array"==!this.type)throw"Type array expected. Found "+this.type;this.type="object";var a=0;if(this.childKeyEntries)for(a=0;a<this.childKeyEntries.length;a++){var b=this.childKeyEntries[a];b.convertToKeyType(String(a))}if(this.virtualChildKey&&this.virtualChildKey.convertToKeyType(""),this.updateChildKeys(),this.createElementList(),this.parent){var c=this.parent.getParentValueObject();c&&c.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},haxapp.jsonedit.ValueEntry.prototype.convertToValue=function(){if("value"!=this.type){this.type="value";var a;if(this.childKeyEntries&&this.childKeyEntries.length>0){var b=this.childKeyEntries[0];a=b.getCurrentValue()}else a="";if(this.createValueEntry(a),this.parent){var c=this.parent.getParentValueObject();c&&c.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()}},haxapp.jsonedit.ValueEntry.prototype.createValueEntry=function(a){"value"==this.type&&(this.valueEditObject=null,this.childKeyEntries=[],this.virtualChildKey=null,this.elementList=[],this.createValueElement(a),this.listDiv=null,this.contractedList=null,this.expandedList=null)},haxapp.jsonedit.ValueEntry.prototype.createChildKeyEntries=function(a){if("value"!=this.type){this.valueEditObject=null,this.childKeyEntries=[],this.virtualChildKey=null,this.elementList=[];var b;if("object"==this.type){for(var c in a)b=new haxapp.jsonedit.KeyEntry(this.editArea,this,c,"key",a[c],this.isEditable,(!1)),this.childKeyEntries.push(b);this.isEditable&&(b=new haxapp.jsonedit.KeyEntry(this.editArea,this,"","key","",this.isEditable,(!0)),this.virtualChildKey=b)}else if("array"==this.type){for(var d=0;d<a.length;d++)b=new haxapp.jsonedit.KeyEntry(this.editArea,this,d,"index",a[d],this.isEditable,(!1)),this.childKeyEntries.push(b);this.isEditable&&(b=new haxapp.jsonedit.KeyEntry(this.editArea,this,d,"index","",this.isEditable,(!0)),this.virtualChildKey=b)}}},haxapp.jsonedit.ValueEntry.prototype.createElementList=function(){this.listDiv=document.createElement("div"),this.elementList=[],this.contractedList=[],this.expandedList=[];for(var a,b,c,d,e=haxapp.jsonedit.createIndentElement(this.indentLevel),f=0;f<this.childKeyEntries.length;f++)d=this.childKeyEntries[f],this.listDiv.appendChild(d.getElement());this.virtualChildKey&&this.listDiv.appendChild(this.virtualChildKey.getElement());var g=haxapp.jsonedit.createExpandButton(this),h=haxapp.jsonedit.createContractButton(this);"object"==this.type?(a=haxapp.jsonedit.createObjectDelimiter("{"),b=haxapp.jsonedit.createObjectDelimiter("}"),c=haxapp.jsonedit.createObjectDelimiter("}")):"array"==this.type&&(a=haxapp.jsonedit.createObjectDelimiter("["),b=haxapp.jsonedit.createObjectDelimiter("]"),c=haxapp.jsonedit.createObjectDelimiter("]")),this.elementList.push(a),this.elementList.push(g),this.contractedList.push(g),this.elementList.push(b),this.contractedList.push(b),this.elementList.push(h),this.expandedList.push(h),(this.childKeyEntries.length>0||this.virtualChildKey)&&(this.elementList.push(this.listDiv),this.expandedList.push(this.listDiv),this.elementList.push(e),this.expandedList.push(e)),this.elementList.push(c),this.expandedList.push(c),this.doExpandContract()},haxapp.jsonedit.ValueEntry.prototype.updateChildKeys=function(){var a,b;if("object"==this.type){var c;a=0;for(c in this.childKeyEntries)a++;b=0;for(c in this.childKeyEntries){var d=this.childKeyEntries[c];d.loadContextMenu(a,b),b++}this.virtualChildKey&&this.virtualChildKey.loadContextMenu(a,a)}else if("array"==this.type){for(a=this.childKeyEntries.length,b=0;b<a;b++)d=this.childKeyEntries[b],d.getCurrentKey()!=b&&d.setKey(b),d.loadContextMenu(a,b);this.virtualChildKey&&(this.virtualChildKey.getCurrentKey()!=a&&this.virtualChildKey.setKey(a),this.virtualChildKey.loadContextMenu(a,a))}},haxapp.jsonedit.ValueEntry.prototype.doExpandContract=function(){if(this.expandedList&&this.contractedList){var a,b,c=this.isExpanded?this.expandedList:this.contractedList,d=this.isExpanded?this.contractedList:this.expandedList;for(a=0;a<c.length;a++)b=c[a],b.style.display="";for(a=0;a<d.length;a++)b=d[a],b.style.display="none"}},haxapp.jsonedit.ValueEntry.prototype.createValueElement=function(a){this.valueEditObject=new haxapp.jsonedit.EditField(a,haxapp.jsonedit.EditField.FIELD_TYPE_VALUE,this.isEditable,this.isVirtual);var b=this,c=function(a){if(b.isVirtual){var c=b.parent.getParentValueObject();c&&c.makeVirtualEntryReal()}b.editArea.valueEdited()};this.valueEditObject.setOnEditCallback(c);var d=function(a){b.navigateCells(a)};this.valueEditObject.setNavCallback(d);var e=this.valueEditObject.getElement();this.elementList.push(e)},haxapp.jsonedit.ValueEntry.prototype.makeVirtualEntryReal=function(a){var b=this.virtualChildKey;b.setIsVirtual(!1),this.childKeyEntries.push(b);var c;"object"==this.type?(c=new haxapp.jsonedit.KeyEntry(this.editArea,this,"","key","",this.isEditable,(!0)),this.virtualChildKey=c):"array"==this.type&&(c=new haxapp.jsonedit.KeyEntry(this.editArea,this,this.childKeyEntries.length,"index","",this.isEditable,(!0)),this.virtualChildKey=c),this.updateChildKeys(),this.createElementList(),this.parent.updateValueElements()},haxapp.jsonedit.EditField=function(a,b,c,d){this.fieldType=b,this.isEditable=c,this.isVirtual=d,this.element=document.createElement("div"),this.onEdit=null,this.onNavigate=null,this.editField=null;var e=this;this.element.onclick=function(){e.onClick()},this.setValue(a)},haxapp.jsonedit.EditField.FIELD_TYPE_VALUE="value",haxapp.jsonedit.EditField.FIELD_TYPE_KEY="key",haxapp.jsonedit.EditField.FIELD_TYPE_INDEX="index",haxapp.jsonedit.EditField.prototype.setOnEditCallback=function(a){return this.onEdit=a},haxapp.jsonedit.EditField.prototype.setNavCallback=function(a){this.onNavigate=a},haxapp.jsonedit.EditField.prototype.setIsVirtual=function(a){this.isVirtual=a,this.setCssClass()},haxapp.jsonedit.EditField.prototype.getValue=function(){return this.value},haxapp.jsonedit.EditField.prototype.setValue=function(a){void 0===a&&(a=null,console.log("The value undefined is not valid for a JSON. It has been converted to null.")),this.value=a,this.isString="string"===haxapp.jsonedit.getValueType(a),this.setCssClass(),null===a?this.element.innerHTML="null":""===a?this.element.innerHTML="&nbsp;":this.element.innerHTML=a},haxapp.jsonedit.EditField.prototype.setCssClass=function(){var a="cell_base cell_"+this.fieldType;this.isVirtual?a+="_virtual":"value"===this.fieldType&&(a+=this.isString?"_string":"_nonstring"),this.element.className=a},haxapp.jsonedit.EditField.prototype.getElement=function(){return this.element},haxapp.jsonedit.EditField.prototype.onClick=function(){this.isEditable&&!this.editField&&this.startEdit()},haxapp.jsonedit.EditField.prototype.startEdit=function(){if(!this.editField){var a,b=getSelection();b.anchorNode.parentNode==this.element?(a={},b.anchorOffset<=b.focusOffset?(a.start=b.anchorOffset,a.end=b.focusOffset):(a.start=b.focusOffset,a.end=b.anchorOffset)):a=null,this.editField=document.createElement("input"),this.editField.type="text",void 0!==this.value&&(this.editField.value=this.value),hax.util.removeAllChildren(this.element),this.element.appendChild(this.editField),a?this.editField.setSelectionRange(a.start,a.end):this.editField.select(),this.editField.focus();var c=this;this.editField.onblur=function(){c.endEdit()},this.editField.onkeydown=function(a){c.onKeyDown(a)}}},haxapp.jsonedit.EditField.prototype.endEdit=function(){if(this.editField){var a=this.editField.value;if(a!=this.value){var b,c=this.editField.value;b=this.isString&&""!==this.value?c:haxapp.jsonedit.canBeConvertedToNonString(c)?haxapp.jsonedit.stringToNonString(c):c,this.editField=null,this.setValue(b),this.onEdit&&this.onEdit(this.value)}else this.editField=null,this.element.innerHTML=this.value}},haxapp.jsonedit.EditField.DIRECTION_NONE=0,haxapp.jsonedit.EditField.DIRECTION_UP=1,haxapp.jsonedit.EditField.DIRECTION_DOWN=2,haxapp.jsonedit.EditField.DIRECTION_RIGHT=3,haxapp.jsonedit.EditField.DIRECTION_LEFT=4,haxapp.jsonedit.EditField.DIRECTION_NEXT=5,haxapp.jsonedit.EditField.DIRECTION_PREV=6,haxapp.jsonedit.EditField.ENTER_KEY=13,haxapp.jsonedit.EditField.TAB_KEY=9,haxapp.jsonedit.EditField.UP_KEY=38,haxapp.jsonedit.EditField.DOWN_KEY=40,haxapp.jsonedit.EditField.RIGHT_KEY=39,haxapp.jsonedit.EditField.LEFT_KEY=37,haxapp.jsonedit.EditField.prototype.onKeyDown=function(a){var b=!1,c=haxapp.jsonedit.EditField.DIRECTION_NONE,d=!1;a.keyCode==haxapp.jsonedit.EditField.ENTER_KEY?(b=!0,c=a.shiftKey?haxapp.jsonedit.EditField.DIRECTION_PREV:haxapp.jsonedit.EditField.DIRECTION_NEXT,d=!0):a.keyCode==haxapp.jsonedit.EditField.TAB_KEY?(b=!0,c=a.shiftKey?haxapp.jsonedit.EditField.DIRECTION_PREV:haxapp.jsonedit.EditField.DIRECTION_NEXT,d=!0):a.keyCode==haxapp.jsonedit.EditField.UP_KEY?(b=!0,c=haxapp.jsonedit.EditField.DIRECTION_UP,d=!0):a.keyCode==haxapp.jsonedit.EditField.DOWN_KEY?(b=!0,c=haxapp.jsonedit.EditField.DIRECTION_DOWN,d=!0):a.keyCode==haxapp.jsonedit.EditField.RIGHT_KEY?this.cursorAtEndOfEditField()&&(b=!0,c=haxapp.jsonedit.EditField.DIRECTION_RIGHT,d=!0):a.keyCode==haxapp.jsonedit.EditField.LEFT_KEY&&this.cursorAtStartOfEditField()&&(b=!0,c=haxapp.jsonedit.EditField.DIRECTION_LEFT,d=!0),d&&(a.preventDefault(),a.stopPropagation()),b&&(this.endEdit(),c!=haxapp.jsonedit.EditField.DIRECTION_NONE&&this.onNavigate&&this.onNavigate(c))},haxapp.jsonedit.EditField.prototype.cursorAtStartOfEditField=function(){return 0==this.editField.selectionStart&&0==this.editField.selectionEnd},haxapp.jsonedit.EditField.prototype.cursorAtEndOfEditField=function(){var a=String(this.editField.value).length;return this.editField.selectionStart==a&&this.editField.selectionEnd==a},haxapp.jsonedit.JsonEditArea=function(a,b,c){this.body=a,this.isEditable=c,void 0===b&&(b=""),this.valueEntry=new haxapp.jsonedit.ValueEntry(this,this,b,this.isEditable),this.valueEntry.setExpanded(!0),this.formatBody()},haxapp.jsonedit.JsonEditArea.prototype.setEditCallback=function(a){this.editCallback=a},haxapp.jsonedit.JsonEditArea.prototype.getCurrentValue=function(){return this.valueEntry.getCurrentValue()},haxapp.jsonedit.JsonEditArea.prototype.getElement=function(){return this.body},haxapp.jsonedit.JsonEditArea.prototype.getParentValueObject=function(){},haxapp.jsonedit.JsonEditArea.prototype.getIndentLevel=function(){return 0},haxapp.jsonedit.JsonEditArea.prototype.formatBody=function(){for(var a=this.valueEntry.getElementList(),b=0;b<a.length;b++)this.body.appendChild(a[b]);this.loadContextMenu()},haxapp.jsonedit.JsonEditArea.prototype.loadContextMenu=function(){var a=this,b=this.body,c=this.valueEntry,d=c.getType();b.oncontextmenu=function(b){b.preventDefault(),b.stopPropagation();var e=new haxapp.ui.MenuBody;e.addCallbackMenuItem("Get Value",function(){alert(JSON.stringify(c.getCurrentValue()))}),a.isEditable&&("value"==d?(e.addCallbackMenuItem("Convert To Object",function(){c.valueToObject()}),e.addCallbackMenuItem("Convert To Array",function(){c.valueToArray()}),c.convertibleToNumber()&&e.addCallbackMenuItem("Convert To Number",function(){c.valueToNonString()}),c.convertibleToBool()&&e.addCallbackMenuItem("Convert To Boolean",function(){c.valueToNonString()}),c.convertibleToNull()&&e.addCallbackMenuItem("Convert To Null",function(){c.valueToNonString()}),c.convertibleToString()&&e.addCallbackMenuItem("Convert To String",function(){c.valueToString()})):"object"==d?(e.addCallbackMenuItem("Convert To Value",function(){c.convertToValue()}),e.addCallbackMenuItem("Convert To Array",function(){c.objectToArray()})):"array"==d&&(e.addCallbackMenuItem("Convert To Value",function(){c.convertToValue()}),e.addCallbackMenuItem("Convert To Object",function(){c.arrayToObject()}))),haxapp.ui.Menu.showContextMenu(e,b)}},haxapp.jsonedit.JsonEditArea.prototype.updateValueElements=function(){hax.util.removeAllChildren(this.body),this.formatBody()},haxapp.jsonedit.JsonEditArea.prototype.valueEdited=function(){this.editCallback&&this.editCallback()},haxapp.ui.setResizeListener=function(a,b){var c={position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",overflow:"hidden",zIndex:-1},d=function(){var a=e.contentDocument.body;a.onresize=b,b()},e=haxapp.ui.createElement("iframe",null,c);e.onload=d,a.appendChild(e)},haxapp.ui.removeResizeListener=function(a,b){alert("implement this!")},haxapp.app={},haxapp.app.dialog={},haxapp.app.Hax=function(a){hax.EventManager.init.call(this),this.workspaceUIs={},this.componentGenerators={},this.standardComponents=[],this.additionalComponents=[],this.linkManager=new haxapp.app.LinkManager,this.loadComponentGenerators(),this.createUI(a);var b=hax.util.readQueryField("url",document.URL);b?haxapp.app.openworkspace.openWorkspaceFromUrl(this,b):haxapp.app.createworkspace.createWorkspace(this,haxapp.app.Hax.DEFAULT_WORKSPACE_NAME)},hax.util.mixin(haxapp.app.Hax,hax.EventManager),haxapp.app.Hax.DEFAULT_WORKSPACE_NAME="workspace",haxapp.app.Hax.prototype.getWorkspace=function(a){var b=this.getWorkspaceUI(a);return b?b.getWorkspace():null},haxapp.app.Hax.prototype.getWorkspaceUI=function(a){return this.workspaceUIs[a]},haxapp.app.Hax.prototype.getActiveWorkspaceUI=function(){var a=this.tabFrame.getActiveTabTitle();return a?this.workspaceUIs[a]:null},haxapp.app.Hax.prototype.getActiveWorkspace=function(){var a=this.getActiveWorkspaceUI();return a?a.getWorkspace():null},haxapp.app.Hax.prototype.addWorkspaceUI=function(a,b){if(this.workspaceUIs[b])throw hax.util.createError("There is already an open workspace with the name "+b,!1);var c=this.tabFrame.addTab(b);return this.tabFrame.setActiveTab(b),a.setApp(this,c),this.workspaceUIs[b]=a,!0},haxapp.app.Hax.prototype.removeWorkspaceUI=function(a){return delete this.workspaceUIs[a],this.tabFrame.removeTab(a),!0},haxapp.app.Hax.prototype.updateWorkspaceLinks=function(a,b,c,d){
this.linkManager.updateWorkspaceLinks(a,b,c,d)},haxapp.app.Hax.prototype.registerComponent=function(a){var b=a.uniqueName;return this.componentGenerators[b]?void alert("There is already a registered component with this name. Either the component has already been added of the name is not unique."):(this.componentGenerators[b]=a,void this.additionalComponents.push(b))},haxapp.app.Hax.prototype.getComponentGenerator=function(a){return this.componentGenerators[a]},haxapp.app.Hax.prototype.loadComponentGenerators=function(){this.registerStandardComponent(haxapp.app.JsonTableComponent.generator),this.registerStandardComponent(haxapp.app.GridTableComponent.generator),this.registerStandardComponent(haxapp.app.FolderComponent.generator),this.registerStandardComponent(haxapp.app.FunctionComponent.generator),this.registerStandardComponent(haxapp.app.FolderFunctionComponent.generator),this.registerComponent(haxapp.app.CustomControlComponent.generator)},haxapp.app.Hax.prototype.registerStandardComponent=function(a){var b=a.uniqueName;return this.componentGenerators[b]?void alert("There is already a registered component with this name. Either the component has already been added of the name is not unique."):(this.componentGenerators[b]=a,void this.standardComponents.push(b))},haxapp.app.Hax.prototype.createUI=function(a){var b=haxapp.ui.initWindows(a),c=b.baseElement,d=document.createElement("div"),e={position:"relative",display:"table",width:"100%",height:"100%"};haxapp.ui.applyStyle(d,e),c.appendChild(d);var f=this.createMenuBar();d.appendChild(f);var g=document.createElement("div"),h={position:"relative",backgroundColor:"white",display:"table-row",width:"100%",height:"100%"};haxapp.ui.applyStyle(g,h),d.appendChild(g);var i={};i.tabBarColorClass="visicomp_tabFrameColor",i.activeTabColorClass="visicomp_tabFrameActiveColor",this.tabFrame=new haxapp.ui.TabFrame(g,i)},haxapp.app.Hax.prototype.populateAddChildMenu=function(a,b,c){for(var d=0;d<this.standardComponents.length;d++){var e=this.standardComponents[d],f=this.componentGenerators[e],g="Add "+f.displayName,h=haxapp.app.updatecomponent.getAddComponentCallback(this,f,b,c);a.addCallbackMenuItem(g,h)}var i=haxapp.app.addadditionalcomponent.getAddAdditionalComponentCallback(this,b,c);a.addCallbackMenuItem("Other Components...",i)},haxapp.app.Hax.prototype.setFolderContextMenu=function(a,b){var c=this,d={};d.parentKey=haxapp.app.WorkspaceUI.getObjectKey(b),a.oncontextmenu=function(a){if(a.preventDefault(),a.stopPropagation(),a.offsetX){var b={},e={};e.x=a.offsetX,e.y=a.offsetY,b.coordInfo=e}var f=new haxapp.ui.MenuBody;c.populateAddChildMenu(f,d,b),haxapp.ui.Menu.showContextMenu(f,a)}},haxapp.app.LinkManager=function(){this.linkMap={}},haxapp.app.LinkManager.prototype.updateWorkspaceLinks=function(a,b,c,d){var e,f,g,h,i,j,k;for(f=c.length,e=0;e<f;e++)if(h=c[e],i=h.link,j=h.type,k=this.linkMap[i],k&&(g=k.indexOf(i),g!==-1&&(k.splice(e,1),0===k.length))){var l=this.removeLinkFromPage(i,j);l&&delete this.linkMap[i]}var m;for(d&&(m=this.getResponseProcessor(b,d)),f=b.length,e=0;e<f;e++)h=b[e],i=h.link,j=h.type,k=this.linkMap[i],k?(g=k.indexOf(i),g!=-1||k.push(a),m&&m.getOnLoad(i)()):(k=[],k.push(a),this.linkMap[i]=k,this.addLinkToPage(i,j,m))},haxapp.app.LinkManager.prototype.addLinkToPage=function(a,b,c){"js"===b?haxapp.app.LinkManager.addJsLink(a,c):"css"===b&&haxapp.app.LinkManager.addCssLink(a,c)},haxapp.app.LinkManager.prototype.removeLinkFromPage=function(a,b){return"css"===b&&(haxapp.app.LinkManager.removeLink(a),!0)},haxapp.app.LinkManager.addJsLink=function(a,b){var c=document.getElementById(a);if(c)alert("THIS SHOULDN'T HAPPEN!");else{var d={};d.id=a,d.src=a,b&&(d.onload=b.getOnLoad(a),d.onerror=b.getOnError(a)),c=haxapp.ui.createElement("script",d),document.head.appendChild(c)}},haxapp.app.LinkManager.addCssLink=function(a,b){var c=document.getElementById(a);if(c)alert("THIS SHOULDN'T HAPPEN!");else{var d={};d.id=a,d.rel="stylesheet",d.type="text/css",d.href=a,b&&(d.onload=b.getOnLoad(a),d.onerror=b.getOnError(a)),c=haxapp.ui.createElement("link",d),document.head.appendChild(c)}},haxapp.app.LinkManager.removeLink=function(a){var b=document.getElementById(a);b&&document.head.removeChild(b)},haxapp.app.LinkManager.prototype.getResponseProcessor=function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d].link;var e=function(a){var d=c.indexOf(a);d>=0&&c.splice(d,1),0===c.length&&b()},f={};return f.getOnLoad=function(a){return function(){console.log("link loaded: "+a),e(a)}},f.getOnError=function(a){return function(){console.log("link not loaded: "+a),e(a),alert("Error loading link: "+a)}},f},haxapp.app.Component={},haxapp.app.Component.init=function(a,b,c,d){if(d||(d={}),this.workspaceUI=a,this.object=b,this.generator=c,this.parentContainer=this.workspaceUI.getParentContainerObject(b),!this.parentContainer)throw hax.util.createError("Parent object not found: "+b.getFullName());this.workspaceUI.registerMember(this.object,this),this.cleanupActions=[];var e={};e.minimizable=!0,e.maximizable=!0,e.resizable=!0,e.movable=!0,e.frameColorClass="visicomp_windowColor",e.titleBarClass="visicomp_titleBarClass",this.window=new haxapp.ui.WindowFrame(this.parentContainer,e);var f=this.window.getMenu();if(this.window.setTitle(this.getObject().getDisplayName()),d.coordInfo)this.window.setCoordinateInfo(d.coordInfo);else{var g=this.parentContainer.getNextWindowPosition();this.window.setPosition(g[0],g[1]),this.window.setSize(c.DEFAULT_WIDTH,c.DEFAULT_HEIGHT)}d.windowState&&this.window.setWindowState(d.windowState),this.window.show(),this.menuItemInfoList=[];var h={};h.title="Edit Properties",h.callback=haxapp.app.updatecomponent.getUpdateComponentCallback(this,this.generator),this.menuItemInfoList.push(h);var h={};h.title="Delete",h.callback=this.createDeleteCallback(h.title),this.menuItemInfoList.push(h),this.populateFrame&&this.populateFrame(),f.setMenuItems(this.menuItemInfoList)},haxapp.app.Component.addCleanupAction=function(a){this.cleanupActions.push(a)},haxapp.app.Component.showErrorBar=function(a){this.errorDiv||(this.errorDiv=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",backgroundColor:"red",color:"white"})),this.errorDiv.innerHTML=a,this.errorBarActive=!0,this.showActiveHeaders()},haxapp.app.Component.hideErrorBar=function(){this.errorBarActive=!1,this.showActiveHeaders()},haxapp.app.Component.showSaveBar=function(a,b){this.saveDiv||(this.saveDiv=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",backgroundColor:"white",border:"solid 1px gray",padding:"3px"}),this.saveDiv.appendChild(document.createTextNode("Edit: ")),this.saveBarSaveButton=document.createElement("button"),this.saveBarSaveButton.innerHTML="Save",this.saveDiv.appendChild(this.saveBarSaveButton),this.saveDiv.appendChild(document.createTextNode(" ")),this.saveBarCancelButton=document.createElement("button"),this.saveBarCancelButton.innerHTML="Cancel",this.saveDiv.appendChild(this.saveBarCancelButton)),this.saveBarSaveButton.onclick=a,this.saveBarCancelButton.onclick=b,this.saveBarActive=!0,this.showActiveHeaders()},haxapp.app.Component.editActive=function(){return this.saveBarActive},haxapp.app.Component.hideSaveBar=function(){this.saveBarActive=!1,this.showActiveHeaders()},haxapp.app.Component.showActiveHeaders=function(){var a=this.getWindow(),b=[];this.errorBarActive&&this.errorDiv&&b.push(this.errorDiv),this.saveBarActive&&this.saveDiv&&b.push(this.saveDiv),a.loadHeaders(b)},haxapp.app.Component.getObject=function(){return this.object},haxapp.app.Component.getWorkspace=function(){return this.object.getWorkspace()},haxapp.app.Component.getWorkspaceUI=function(){return this.workspaceUI},haxapp.app.Component.getWindow=function(){return this.window},haxapp.app.Component.setScrollingContentElement=function(){this.contentDiv=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"}),this.window.setContent(this.contentDiv)},haxapp.app.Component.setFixedContentElement=function(){this.contentDiv=this.window.getBody()},haxapp.app.Component.getContentElement=function(){return this.contentDiv},haxapp.app.Component.toJson=function(){var a={};return a.type=this.generator.uniqueName,a.coordInfo=this.window.getCoordinateInfo(),a.windowState=this.window.getWindowState(),this.writeToJson&&this.writeToJson(a),a},haxapp.app.Component.onDelete=function(){var a=this.getWindow();a.deleteWindow();for(var b=0;b<this.cleanupActions.length;b++)this.cleanupActions[b]()},haxapp.app.Component.memberMoved=function(a){this.parenContainer=a,this.window.changeParent(a),this.updateTitle()},haxapp.app.Component.memberUpdated=function(){this.updateTitle()},haxapp.app.Component.updateTitle=function(){var a=this.getWindow();if(a){var b=this.getObject(),c=b.getDisplayName(),d=a.getTitle();d!==c&&a.setTitle(c)}},haxapp.app.Component.getPropertyValues=function(){var a=this.object,b={};return b.name=a.getName(),b.parentKey=haxapp.app.WorkspaceUI.getObjectKey(a.getParent()),this.generator.addPropFunction&&this.generator.addPropFunction(a,b),b},haxapp.app.Component.updatePropertyValues=function(a,b){var c=new hax.ActionResponse,d=[],e=this.object;try{if(a.name!==b.name||a.parentKey!==b.parentKey){var f=this.workspaceUI.getObjectByKey(b.parentKey);hax.movemember.moveMember(e,b.name,f,d)}this.generator.updatePropHandler&&this.generator.updatePropHandler(e,a,b,d),hax.calculation.callRecalculateList(d,c),hax.updatemember.fireUpdatedEventList(d)}catch(g){var h=hax.ActionError.processException(g,"AppException",!0);c.addError(h)}return c},haxapp.app.Component.createDeleteCallback=function(){var a=this.getObject();return function(){var b=confirm("Are you sure you want to delete this object?");if(b){var c=hax.deletemember.deleteMember(a);if(!c.getSuccess()){var d=c.getErrorMsg();alert(d)}}}},haxapp.app.TableEditComponent={},haxapp.app.TableEditComponent.init=function(a,b,c){this.viewTypes=a,this.defaultView=b,this.initUI(),this.clearFunctionOnBlankInfo=c,this.clearFunctionActive=!1,this.clearFunctionCallback=null;var d=this,e=function(){d.destroy()};this.addCleanupAction(e)},haxapp.app.TableEditComponent.NO_EDIT_BACKGROUND_COLOR="#f4f4f4",haxapp.app.TableEditComponent.setViewType=function(a){return this.viewType!==a&&(this.editActive()?(alert("You must save or cancel the edit session to change the view mode."),!1):(this.viewModeElement&&this.showModeElement(null),this.viewModeElement=this.getViewModeElement(a),this.viewType=a,!0))},haxapp.app.TableEditComponent.updateViewDropdown=function(a){a||(a=this.defaultView),this.select.value=a},haxapp.app.TableEditComponent.memberUpdated=function(){haxapp.app.Component.memberUpdated.call(this);var a=this.getObject();if(a.hasError()){for(var b="",c=a.getErrors(),d=0;d<c.length;d++)b+=c[d].msg+"\n";this.showErrorBar(b)}else this.hideErrorBar();this.viewModeElementShowing!==this.viewModeElement&&this.showModeElement(this.viewModeElement);var e=this.viewModeElement.isData===!1||!a.hasCode();if(this.viewModeElement.showData(e),this.clearFunctionOnBlankInfo)if(a.hasCode()){if(!this.clearFunctionActive){var f=this.getWindow().getMenu();this.clearFunctionCallback||(this.clearFunctionCallback=this.getClearFunctionCallback()),f.addCallbackMenuItem(this.clearFunctionOnBlankInfo.menuLabel,this.clearFunctionCallback),this.clearFunctionActive=!0}}else if(this.clearFunctionActive){var f=this.getWindow().getMenu();f.removeMenuItem(this.clearFunctionOnBlankInfo.menuLabel),this.clearFunctionActive=!1}},haxapp.app.TableEditComponent.getClearFunctionCallback=function(){var a=this.getObject(),b=this.clearFunctionOnBlankInfo.dataValue;return function(){var c=hax.updatemember.updateData(a,b);c.getSuccess()||alert(c.getErrorMsg())}},haxapp.app.TableEditComponent.startEditUI=function(a,b){this.select.disabled=!0,this.showSaveBar(a,b)},haxapp.app.TableEditComponent.endEditUI=function(){this.hideSaveBar(),this.select.disabled=!1},haxapp.app.TableEditComponent.initUI=function(){this.setFixedContentElement(),this.select=haxapp.ui.createElement("select",null,{marginRight:"3px",backgroundColor:"transparent"});for(var a=0;a<this.viewTypes.length;a++){var b=this.viewTypes[a];this.select.add(haxapp.ui.createElement("option",{text:b}))}var c=this,d=function(a){var b=c.setViewType(c.select.value);return b?c.memberUpdated():c.updateViewDropdown(this.viewType),b};this.select.onchange=d,this.window.addRightTitleBarElement(this.select),this.setViewType(this.defaultView),this.updateViewDropdown()},haxapp.app.TableEditComponent.showModeElement=function(a){var b=this.getContentElement();if(hax.util.removeAllChildren(b),a){var c=a.getElement();b.appendChild(c)}this.viewModeElementShowing&&this.viewModeElementShowing.destroy(),this.viewModeElementShowing=a},haxapp.app.TableEditComponent.destroy=function(){this.viewModeElement&&this.viewModeElement.destroy()},haxapp.app.WorkspaceUI=function(){this.workspace=null,this.app=null,this.tab=null,this.componentMap={},this.activeFolderName=null,this.jsLinkArray=[],this.cssLinkArray=[]},haxapp.app.WorkspaceUI.prototype.setApp=function(a,b){this.app=a,this.tab=b},haxapp.app.WorkspaceUI.prototype.getApp=function(){return this.app},haxapp.app.WorkspaceUI.prototype.setWorkspace=function(a,b){this.workspace=a;var c=this.workspace.getRoot();this.registerMember(c,null),this.addComponentContainer(c,this.tab),b&&this.loadFolderComponentContentFromJson(c,b);var d=this,e=function(a){d.memberUpdated(a)};this.workspace.addListener(hax.updatemember.MEMBER_UPDATED_EVENT,e);var f=function(a){d.childDeleted(a)};this.workspace.addListener(hax.deletemember.MEMBER_DELETED_EVENT,f);var g=function(a){d.childMoved(a)};this.workspace.addListener(hax.movemember.MEMBER_MOVED_EVENT,g);var h=this.tab.getContainerElement(),i=this.getApp();i.setFolderContextMenu(h,c)},haxapp.app.WorkspaceUI.prototype.getWorkspace=function(){return this.workspace},haxapp.app.WorkspaceUI.prototype.getComponent=function(a){var b=haxapp.app.WorkspaceUI.getObjectKey(a),c=this.componentMap[b];return c?c.component:null},haxapp.app.WorkspaceUI.prototype.getFolderList=function(){var a=[];for(var b in this.componentMap){var c=this.componentMap[b];c.parentContainer&&a.push(b)}return a},haxapp.app.WorkspaceUI.prototype.getParentContainerObject=function(a){var b=a.getParent(),c=haxapp.app.WorkspaceUI.getObjectKey(b),d=this.componentMap[c];if(!d.parentContainer)throw hax.util.createError("Parent container not found!");return d.parentContainer},haxapp.app.WorkspaceUI.prototype.registerMember=function(a,b){if(a.getWorkspace()!==this.workspace)throw hax.util.createError("Component registered in wrong workspace: "+a.getFullName());var c=haxapp.app.WorkspaceUI.getObjectKey(a);if(this.componentMap[c])throw hax.util.createError("There is already a component with the given name.",!0);var d={};d.object=a,d.component=b,this.componentMap[c]=d},haxapp.app.WorkspaceUI.prototype.addComponentContainer=function(a,b){var c=haxapp.app.WorkspaceUI.getObjectKey(a),d=this.componentMap[c];return d?void(d.parentContainer=b):void alert("Unknown error - component info not found: "+c)},haxapp.app.WorkspaceUI.prototype.memberUpdated=function(a){var b=a.getFullName(),c=this.componentMap[b];c&&c.component&&c.component.memberUpdated()},haxapp.app.WorkspaceUI.prototype.childDeleted=function(a){var b=a.fullName,c=this.componentMap[b];delete this.componentMap[b],c&&c.component&&c.component.onDelete()},haxapp.app.WorkspaceUI.prototype.childMoved=function(a){var b=this.componentMap[a.oldFullName];if(delete this.componentMap[a.oldFullName],this.componentMap[a.newFullName]=b,b&&b.component){var c=this.getParentContainerObject(b.object);b.component.memberMoved(c)}},haxapp.app.WorkspaceUI.getObjectKey=function(a){return a.getFullName()},haxapp.app.WorkspaceUI.prototype.getObjectByKey=function(a){var b=this.componentMap[a];return b?b.object:null},haxapp.app.WorkspaceUI.prototype.getComponentByKey=function(a){var b=this.componentMap[a];return b?b.component:null},haxapp.app.WorkspaceUI.prototype.close=function(){for(var a in this.componentMap){var b=this.componentMap[a];b&&b.component&&b.component.onDelete()}},haxapp.app.WorkspaceUI.prototype.toJson=function(){var a={};a.name=this.workspace.getName(),a.fileType="hax workspace",a.jsLinks=this.jsLinkArray,a.cssLinks=this.cssLinkArray,a.workspace=this.workspace.toJson();var b=this.workspace.getRoot();return a.components=this.getFolderComponentContentJson(b),a},haxapp.app.WorkspaceUI.prototype.getFolderComponentContentJson=function(a){var b={},c=a.getChildMap();for(var d in c){var e=c[d],f=this.getComponent(e),g=e.getName();b[g]=f.toJson()}return b},haxapp.app.WorkspaceUI.prototype.loadFolderComponentContentFromJson=function(a,b){for(var c in b){var d=b[c],e=a.lookupChild(c);this.loadComponentFromJson(e,d)}},haxapp.app.WorkspaceUI.prototype.loadComponentFromJson=function(a,b){var c=b.type,d=this.app.getComponentGenerator(c);if(!d)throw hax.util.createError("Component type not found: "+c);d.createComponentFromJson(this,a,b)},haxapp.app.WorkspaceUI.prototype.getJsLinks=function(){return this.jsLinkArray},haxapp.app.WorkspaceUI.prototype.setLinks=function(a,b,c,d){var e=this.jsLinkArray,f=this.cssLinkArray,g=[],h=[];this.createLinkAddRemoveList(a,e,"js",g,h),this.createLinkAddRemoveList(b,f,"css",g,h),this.jsLinkArray=a,this.cssLinkArray=b,this.app.updateWorkspaceLinks(d,g,h,c)},haxapp.app.WorkspaceUI.prototype.getCssLinks=function(){return this.cssLinkArray},haxapp.app.WorkspaceUI.prototype.createLinkAddRemoveList=function(a,b,c,d,e){var f,g,h={};for(f=0;f<a.length;f++)g=a[f],h[g]=!0;for(f=0;f<b.length;f++)g=b[f],h[g]?h[g]=!1:e.push({link:g,type:c});for(g in h)h[g]&&d.push({link:g,type:c})},haxapp.app.FolderComponent=function(a,b,c){haxapp.app.Component.init.call(this,a,b,haxapp.app.FolderComponent.generator,c),haxapp.ui.ParentContainer.init.call(this,this.getContentElement(),this.getWindow()),haxapp.ui.ParentHighlighter.init.call(this,this.getContentElement()),a.addComponentContainer(b,this)},hax.util.mixin(haxapp.app.FolderComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.FolderComponent,haxapp.ui.ParentContainer),hax.util.mixin(haxapp.app.FolderComponent,haxapp.ui.ParentHighlighter),haxapp.app.FolderComponent.prototype.getContentIsShowing=function(){return this.getWindow().getContentIsShowing()},haxapp.app.FolderComponent.prototype.writeToJson=function(a){var b=this.getObject(),c=this.getWorkspaceUI();a.children=c.getFolderComponentContentJson(b)},haxapp.app.FolderComponent.prototype.populateFrame=function(){this.setScrollingContentElement();var a=this.getContentElement(),b=this.getObject(),c=this.getWorkspaceUI().getApp();c.setFolderContextMenu(a,b)},haxapp.app.FolderComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.Folder.generator.type;var f=hax.createmember.createMember(d,e),g=f.member;if(g){var h=new haxapp.app.FolderComponent(a,g,c);f.component=h}return f},haxapp.app.FolderComponent.createComponentFromJson=function(a,b,c){var d=new haxapp.app.FolderComponent(a,b,c);return c&&c.children&&a.loadFolderComponentContentFromJson(b,c.children),d},haxapp.app.FolderComponent.generator={},haxapp.app.FolderComponent.generator.displayName="Folder",haxapp.app.FolderComponent.generator.uniqueName="haxapp.app.FolderComponent",haxapp.app.FolderComponent.generator.createComponent=haxapp.app.FolderComponent.createComponent,haxapp.app.FolderComponent.generator.createComponentFromJson=haxapp.app.FolderComponent.createComponentFromJson,haxapp.app.FolderComponent.generator.DEFAULT_WIDTH=500,haxapp.app.FolderComponent.generator.DEFAULT_HEIGHT=500,haxapp.app.JsonTableComponent=function(a,b,c){haxapp.app.Component.init.call(this,a,b,haxapp.app.JsonTableComponent.generator,c),haxapp.app.TableEditComponent.init.call(this,haxapp.app.JsonTableComponent.VIEW_MODES,haxapp.app.JsonTableComponent.DEFAULT_VIEW,haxapp.app.JsonTableComponent.BLANK_DATA_VALUE_INFO),this.memberUpdated()},hax.util.mixin(haxapp.app.JsonTableComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.JsonTableComponent,haxapp.app.TableEditComponent),haxapp.app.JsonTableComponent.VIEW_PLAIN_TEXT="Text",haxapp.app.JsonTableComponent.VIEW_JSON_TEXT="JSON",haxapp.app.JsonTableComponent.VIEW_FORM="Form",haxapp.app.JsonTableComponent.VIEW_CODE="Formula",haxapp.app.JsonTableComponent.VIEW_SUPPLEMENTAL_CODE="Private",haxapp.app.JsonTableComponent.VIEW_MODES=[haxapp.app.JsonTableComponent.VIEW_PLAIN_TEXT,haxapp.app.JsonTableComponent.VIEW_JSON_TEXT,haxapp.app.JsonTableComponent.VIEW_FORM,haxapp.app.JsonTableComponent.VIEW_CODE,haxapp.app.JsonTableComponent.VIEW_SUPPLEMENTAL_CODE],haxapp.app.JsonTableComponent.DEFAULT_VIEW=haxapp.app.JsonTableComponent.VIEW_PLAIN_TEXT,haxapp.app.JsonTableComponent.BLANK_DATA_VALUE_INFO={dataValue:"",menuLabel:"Clear Formula"},haxapp.app.JsonTableComponent.prototype.getViewModeElement=function(a){switch(a){case haxapp.app.JsonTableComponent.VIEW_PLAIN_TEXT:return new haxapp.app.AceDataMode(this,(!1));case haxapp.app.JsonTableComponent.VIEW_JSON_TEXT:return new haxapp.app.AceDataMode(this,(!0));case haxapp.app.JsonTableComponent.VIEW_FORM:return new haxapp.app.FormDataMode(this);case haxapp.app.JsonTableComponent.VIEW_CODE:return new haxapp.app.AceCodeMode(this,haxapp.app.JsonTableComponent.BLANK_DATA_VALUE_INFO,haxapp.app.JsonTableComponent.editorCodeWrapper);case haxapp.app.JsonTableComponent.VIEW_SUPPLEMENTAL_CODE:return new haxapp.app.AceSupplementalMode(this);default:return alert("unrecognized view element!"),null}},haxapp.app.JsonTableComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.JsonTable.generator.type;var f=hax.createmember.createMember(d,e),g=f.member;if(g){var h=new haxapp.app.JsonTableComponent(a,g,c);f.component=h}return f},haxapp.app.JsonTableComponent.createComponentFromJson=function(a,b,c){var d=new haxapp.app.JsonTableComponent(a,b,c);return d},haxapp.app.JsonTableComponent.generator={},haxapp.app.JsonTableComponent.generator.displayName="Data Table",haxapp.app.JsonTableComponent.generator.uniqueName="haxapp.app.JsonTableComponent",haxapp.app.JsonTableComponent.generator.createComponent=haxapp.app.JsonTableComponent.createComponent,haxapp.app.JsonTableComponent.generator.createComponentFromJson=haxapp.app.JsonTableComponent.createComponentFromJson,haxapp.app.JsonTableComponent.generator.DEFAULT_WIDTH=200,haxapp.app.JsonTableComponent.generator.DEFAULT_HEIGHT=200,haxapp.app.JsonTableComponent.editorCodeWrapper={},haxapp.app.JsonTableComponent.editorCodeWrapper.FUNCTION_PREFIX="var value;\n",haxapp.app.JsonTableComponent.editorCodeWrapper.FUNCTION_SUFFIX="\nreturn value;\n\n",haxapp.app.JsonTableComponent.editorCodeWrapper.displayName="Formula",haxapp.app.JsonTableComponent.editorCodeWrapper.wrapCode=function(a){return haxapp.app.JsonTableComponent.editorCodeWrapper.FUNCTION_PREFIX+a+haxapp.app.JsonTableComponent.editorCodeWrapper.FUNCTION_SUFFIX},haxapp.app.JsonTableComponent.editorCodeWrapper.unwrapCode=function(a){if(null==a||(a.length=0))return"";var b=a.replace("var value;","");return b=b.replace("return value;",""),b.trim()},haxapp.app.GridTableComponent=function(a,b,c){haxapp.app.Component.init.call(this,a,b,haxapp.app.GridTableComponent.generator,c),haxapp.app.TableEditComponent.init.call(this,haxapp.app.GridTableComponent.VIEW_MODES,haxapp.app.GridTableComponent.DEFAULT_VIEW,haxapp.app.GridTableComponent.BLANK_DATA_VALUE_INFO),this.memberUpdated()},hax.util.mixin(haxapp.app.GridTableComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.GridTableComponent,haxapp.app.TableEditComponent),haxapp.app.GridTableComponent.VIEW_GRID="Grid",haxapp.app.GridTableComponent.VIEW_CODE="Formula",haxapp.app.GridTableComponent.VIEW_SUPPLEMENTAL_CODE="Private",haxapp.app.GridTableComponent.VIEW_MODES=[haxapp.app.GridTableComponent.VIEW_GRID,haxapp.app.GridTableComponent.VIEW_CODE,haxapp.app.GridTableComponent.VIEW_SUPPLEMENTAL_CODE],haxapp.app.GridTableComponent.BLANK_DATA_VALUE_INFO={dataValue:[[null]],menuLabel:"Clear Formula"},haxapp.app.GridTableComponent.DEFAULT_VIEW=haxapp.app.GridTableComponent.VIEW_GRID,haxapp.app.GridTableComponent.prototype.getViewModeElement=function(a){switch(a){case haxapp.app.GridTableComponent.VIEW_CODE:return new haxapp.app.AceCodeMode(this,haxapp.app.GridTableComponent.BLANK_DATA_VALUE_INFO,haxapp.app.JsonTableComponent.editorCodeWrapper);case haxapp.app.GridTableComponent.VIEW_SUPPLEMENTAL_CODE:return new haxapp.app.AceSupplementalMode(this);case haxapp.app.GridTableComponent.VIEW_GRID:return new haxapp.app.HandsonGridMode(this);default:return alert("unrecognized view element!"),null}},haxapp.app.GridTableComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.JsonTable.generator.type,e.updateData={},e.updateData.data=[[""]];var f=hax.createmember.createMember(d,e),g=f.member;if(g){var h=new haxapp.app.GridTableComponent(a,g,c);f.component=h}return f},haxapp.app.GridTableComponent.createComponentFromJson=function(a,b,c){var d=new haxapp.app.GridTableComponent(a,b,c);return d},haxapp.app.GridTableComponent.generator={},haxapp.app.GridTableComponent.generator.displayName="Grid Table",haxapp.app.GridTableComponent.generator.uniqueName="haxapp.app.GridTableComponent",haxapp.app.GridTableComponent.generator.createComponent=haxapp.app.GridTableComponent.createComponent,haxapp.app.GridTableComponent.generator.createComponentFromJson=haxapp.app.GridTableComponent.createComponentFromJson,haxapp.app.GridTableComponent.generator.DEFAULT_WIDTH=200,haxapp.app.GridTableComponent.generator.DEFAULT_HEIGHT=200,haxapp.app.FunctionComponent=function(a,b,c){haxapp.app.Component.init.call(this,a,b,haxapp.app.FunctionComponent.generator,c),haxapp.app.TableEditComponent.init.call(this,haxapp.app.FunctionComponent.VIEW_MODES,haxapp.app.FunctionComponent.DEFAULT_VIEW),this.memberUpdated()},hax.util.mixin(haxapp.app.FunctionComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.FunctionComponent,haxapp.app.TableEditComponent),haxapp.app.FunctionComponent.VIEW_CODE="Code",haxapp.app.FunctionComponent.VIEW_SUPPLEMENTAL_CODE="Private",haxapp.app.FunctionComponent.VIEW_MODES=[haxapp.app.FunctionComponent.VIEW_CODE,haxapp.app.FunctionComponent.VIEW_SUPPLEMENTAL_CODE],haxapp.app.FunctionComponent.DEFAULT_VIEW=haxapp.app.FunctionComponent.VIEW_CODE,haxapp.app.FunctionComponent.prototype.getViewModeElement=function(a){switch(a){case haxapp.app.FunctionComponent.VIEW_CODE:return new haxapp.app.AceCodeMode(this,(!1));case haxapp.app.FunctionComponent.VIEW_SUPPLEMENTAL_CODE:return new haxapp.app.AceSupplementalMode(this);default:return alert("unrecognized view element!"),null}},haxapp.app.FunctionComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};if(e.name=b.name,b.argListString){var f=haxapp.app.FunctionComponent.parseStringArray(b.argListString);e.updateData={},e.updateData.argList=f}e.type=hax.FunctionTable.generator.type;var g=hax.createmember.createMember(d,e),h=g.member;if(h){var i=new haxapp.app.FunctionComponent(a,h,c);g.component=i}return g},haxapp.app.FunctionComponent.createComponentFromJson=function(a,b,c){var d=new haxapp.app.FunctionComponent(a,b,c);return d},haxapp.app.FunctionComponent.addPropValues=function(a,b){var c=a.getArgList(),d=c.toString();return b.argListString=d,b},haxapp.app.FunctionComponent.propUpdateHandler=function(a,b,c,d){if(b.argListString!==c.argListString){var e=haxapp.app.FunctionComponent.parseStringArray(c.argListString),f=a.getFunctionBody(),g=a.getSupplementalCode();hax.updatemember.updateCode(a,e,f,g,d)}},haxapp.app.FunctionComponent.parseStringArray=function(a){for(var b=a.split(","),c=0;c<b.length;c++)b[c]=b[c].trim();return b},haxapp.app.FunctionComponent.generator={},haxapp.app.FunctionComponent.generator.displayName="Function",haxapp.app.FunctionComponent.generator.uniqueName="haxapp.app.FunctionComponent",haxapp.app.FunctionComponent.generator.createComponent=haxapp.app.FunctionComponent.createComponent,haxapp.app.FunctionComponent.generator.createComponentFromJson=haxapp.app.FunctionComponent.createComponentFromJson,haxapp.app.FunctionComponent.generator.DEFAULT_WIDTH=200,haxapp.app.FunctionComponent.generator.DEFAULT_HEIGHT=200,haxapp.app.FunctionComponent.generator.propertyDialogLines=[{type:"inputElement",heading:"Arg List: ",resultKey:"argListString"}],haxapp.app.FunctionComponent.generator.addPropFunction=haxapp.app.FunctionComponent.addPropValues,haxapp.app.FunctionComponent.generator.updatePropHandler=haxapp.app.FunctionComponent.propUpdateHandler,haxapp.app.FolderFunctionComponent=function(a,b,c){haxapp.app.Component.init.call(this,a,b,haxapp.app.FolderFunctionComponent.generator,c),haxapp.ui.ParentContainer.init.call(this,this.getContentElement(),this.getWindow()),haxapp.ui.ParentHighlighter.init.call(this,this.getContentElement());var d=b.getInternalFolder();a.registerMember(d,null),a.addComponentContainer(d,this),this.memberUpdated()},hax.util.mixin(haxapp.app.FolderFunctionComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.FolderFunctionComponent,haxapp.ui.ParentContainer),hax.util.mixin(haxapp.app.FolderFunctionComponent,haxapp.ui.ParentHighlighter),haxapp.app.FolderFunctionComponent.prototype.getContentIsShowing=function(){return this.getWindow().getContentIsShowing()},haxapp.app.FolderFunctionComponent.prototype.writeToJson=function(a){var b=this.getObject(),c=b.getInternalFolder(),d=this.getWorkspaceUI();a.children=d.getFolderComponentContentJson(c)},haxapp.app.FolderFunctionComponent.prototype.populateFrame=function(){this.setScrollingContentElement();var a=this.getContentElement(),b=this.getObject(),c=b.getInternalFolder(),d=this.getWorkspaceUI().getApp();d.setFolderContextMenu(a,c)},haxapp.app.FolderFunctionComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};if(e.name=b.name,b.argListString){var f=haxapp.app.FunctionComponent.parseStringArray(b.argListString);e.argList=f}b.returnValueString&&(e.returnValue=b.returnValueString),e.type=hax.FolderFunction.generator.type;var g=hax.createmember.createMember(d,e),h=g.member;if(g.getSuccess()){var i=new haxapp.app.FolderFunctionComponent(a,h,c);g.component=i}return g},haxapp.app.FolderFunctionComponent.createComponentFromJson=function(a,b,c){var d=new haxapp.app.FolderFunctionComponent(a,b,c);if(c&&c.children){var e=b.getInternalFolder();a.loadFolderComponentContentFromJson(e,c.children)}return d},haxapp.app.FolderFunctionComponent.addPropValues=function(a,b){var c=a.getArgList(),d=c.toString();return b.argListString=d,b.returnValueString=a.getReturnValueString(),b},haxapp.app.FolderFunctionComponent.propUpdateHandler=function(a,b,c,d){if(b.argListString!==c.argListString||b.returnValueString!==c.returnValueString){var e=haxapp.app.FunctionComponent.parseStringArray(c.argListString);hax.updatefolderFunction.updatePropertyValues(a,e,c.returnValueString,d)}},haxapp.app.FolderFunctionComponent.generator={},haxapp.app.FolderFunctionComponent.generator.displayName="Folder Function",haxapp.app.FolderFunctionComponent.generator.uniqueName="haxapp.app.FolderFunctionComponent",haxapp.app.FolderFunctionComponent.generator.createComponent=haxapp.app.FolderFunctionComponent.createComponent,haxapp.app.FolderFunctionComponent.generator.createComponentFromJson=haxapp.app.FolderFunctionComponent.createComponentFromJson,haxapp.app.FolderFunctionComponent.generator.DEFAULT_WIDTH=500,haxapp.app.FolderFunctionComponent.generator.DEFAULT_HEIGHT=500,haxapp.app.FolderFunctionComponent.generator.propertyDialogLines=[{type:"inputElement",heading:"Arg List: ",resultKey:"argListString"},{type:"inputElement",heading:"Return Val: ",resultKey:"returnValueString"}],haxapp.app.FolderFunctionComponent.generator.addPropFunction=haxapp.app.FolderFunctionComponent.addPropValues,haxapp.app.FolderFunctionComponent.generator.updatePropHandler=haxapp.app.FolderFunctionComponent.propUpdateHandler,haxapp.app.BasicControlComponent=function(a,b,c,d){
haxapp.app.Component.init.call(this,a,b,c,d),haxapp.app.TableEditComponent.init.call(this,haxapp.app.BasicControlComponent.VIEW_MODES,haxapp.app.BasicControlComponent.DEFAULT_VIEW);var e=b.getResource();e.setComponent(this),b.calculate();var f=function(){e["delete"]&&e["delete"]()};this.addCleanupAction(f)},hax.util.mixin(haxapp.app.BasicControlComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.BasicControlComponent,haxapp.app.TableEditComponent),haxapp.app.BasicControlComponent.prototype.getOutputElement=function(){return this.outputMode.getElement()},haxapp.app.BasicControlComponent.VIEW_OUTPUT="Output",haxapp.app.BasicControlComponent.VIEW_CODE="Code",haxapp.app.BasicControlComponent.VIEW_SUPPLEMENTAL_CODE="Private",haxapp.app.BasicControlComponent.VIEW_MODES=[haxapp.app.BasicControlComponent.VIEW_OUTPUT,haxapp.app.BasicControlComponent.VIEW_CODE,haxapp.app.BasicControlComponent.VIEW_SUPPLEMENTAL_CODE],haxapp.app.BasicControlComponent.DEFAULT_VIEW=haxapp.app.BasicControlComponent.VIEW_OUTPUT,haxapp.app.BasicControlComponent.prototype.getViewModeElement=function(a){switch(a){case haxapp.app.BasicControlComponent.VIEW_OUTPUT:return this.outputMode||(this.outputMode=new haxapp.app.ResourceOutputMode(this)),this.outputMode;case haxapp.app.BasicControlComponent.VIEW_CODE:return new haxapp.app.AceCodeMode(this,(!1));case haxapp.app.BasicControlComponent.VIEW_SUPPLEMENTAL_CODE:return new haxapp.app.AceSupplementalMode(this);default:return alert("unrecognized view element!"),null}},haxapp.app.BasicControlComponent.createBaseComponent=function(a,b,c,d,e){var f=a.getObjectByKey(b.parentKey),g={};g.name=b.name,g.type=hax.Control.generator.type;var h=hax.createmember.createMember(f,g),i=h.member;if(i){i.updateResource(c);var j=new haxapp.app.BasicControlComponent(a,i,d,e);h.component=j}return h},haxapp.app.BasicControlComponent.createBaseComponentFromJson=function(a,b,c,d){var e=new haxapp.app.BasicControlComponent(a,b,c,d);return e},haxapp.app.CustomControlComponent=function(a,b,c){haxapp.app.Component.init.call(this,a,b,haxapp.app.CustomControlComponent.generator,c),haxapp.app.TableEditComponent.init.call(this,haxapp.app.CustomControlComponent.VIEW_MODES,haxapp.app.CustomControlComponent.DEFAULT_VIEW),c&&c.resource?this.loadResourceFromJson(c.resource):this.loadEmptyResource();var d=function(){resource["delete"]&&resource["delete"]()};this.addCleanupAction(d)},hax.util.mixin(haxapp.app.CustomControlComponent,haxapp.app.Component),hax.util.mixin(haxapp.app.CustomControlComponent,haxapp.app.TableEditComponent),haxapp.app.CustomControlComponent.prototype.getHtml=function(){return this.html},haxapp.app.CustomControlComponent.prototype.getCustomizeScript=function(){return this.customizeScript},haxapp.app.CustomControlComponent.prototype.getSupplementalCode=function(){return this.supplementalCode},haxapp.app.CustomControlComponent.prototype.getCss=function(a){return this.css},haxapp.app.CustomControlComponent.prototype.getOutputElement=function(){return this.outputMode.getElement()},haxapp.app.CustomControlComponent.VIEW_OUTPUT="Output",haxapp.app.CustomControlComponent.VIEW_CODE="Model Code",haxapp.app.CustomControlComponent.VIEW_SUPPLEMENTAL_CODE="Private",haxapp.app.CustomControlComponent.VIEW_CUSTOM_CODE="Base Code",haxapp.app.CustomControlComponent.VIEW_CUSTOM_SUPPLEMENTAL_CODE="Base Private",haxapp.app.CustomControlComponent.VIEW_MODES=[haxapp.app.CustomControlComponent.VIEW_OUTPUT,haxapp.app.CustomControlComponent.VIEW_CODE,haxapp.app.CustomControlComponent.VIEW_SUPPLEMENTAL_CODE,haxapp.app.CustomControlComponent.VIEW_CUSTOM_CODE,haxapp.app.CustomControlComponent.VIEW_CUSTOM_SUPPLEMENTAL_CODE],haxapp.app.CustomControlComponent.DEFAULT_VIEW=haxapp.app.CustomControlComponent.VIEW_OUTPUT,haxapp.app.CustomControlComponent.prototype.getViewModeElement=function(a){switch(a){case haxapp.app.CustomControlComponent.VIEW_OUTPUT:return this.outputMode||(this.outputMode=new haxapp.app.ResourceOutputMode(this)),this.outputMode;case haxapp.app.CustomControlComponent.VIEW_CODE:return new haxapp.app.AceCodeMode(this,(!1));case haxapp.app.CustomControlComponent.VIEW_SUPPLEMENTAL_CODE:return new haxapp.app.AceSupplementalMode(this);case haxapp.app.CustomControlComponent.VIEW_CUSTOM_CODE:return new haxapp.app.AceCustomCodeMode(this);case haxapp.app.CustomControlComponent.VIEW_CUSTOM_SUPPLEMENTAL_CODE:return new haxapp.app.AceCustomSupplementalMode(this);default:return alert("unrecognized view element!"),null}},haxapp.app.CustomControlComponent.prototype.writeToJson=function(a){var b=this.getObject(),c=b.getResource();c&&(a.resource={},a.resource.html=this.html,a.resource.customizeScript=this.customizeScript,a.resource.supplementalCode=this.supplementalCode,a.resource.css=this.css)},haxapp.app.CustomControlComponent.prototype.updateFromJson=function(a){a.resource?this.loadResourceFromJson(a.resource):this.loadEmptyResource()},haxapp.app.CustomControlComponent.prototype.loadEmptyResource=function(){this.update("","return {};","","")},haxapp.app.CustomControlComponent.prototype.loadResourceFromJson=function(a){a||(a={});var b=void 0!==a.html?a.html:"",c=void 0!==a.customizeScript?a.customizeScript:"",d=void 0!==a.supplementalCode?a.supplementalCode:"",e=void 0===a.css?a.css:"";this.update(b,c,d,e)},haxapp.app.CustomControlComponent.prototype.update=function(a,b,c,d){this.html=a,this.customizeScript=b,this.supplementalCode=c,this.css=d;var e=new hax.ActionResponse,f=this.getObject();f.clearErrors();try{var g=this.createResource();if(!g)throw new Error("resource.setComponent(component) is not defined");f.updateResource(g),g.setComponent&&g.setComponent(this),f.calculate(),this.memberUpdated()}catch(h){h.stack&&console.error(h.stack);var i=h.message?h.message:hax.ActionError.UNKNOWN_ERROR_MESSAGE,j=new hax.ActionError(i,"Custom Control - Update",f);j.setParentException(h),f.addError(j),e.addError(j)}return e},haxapp.app.CustomControlComponent.prototype.createResource=function(){var a=hax.util.formatString(haxapp.app.CustomControlComponent.GENERATOR_FUNCTION_FORMAT_TEXT,this.customizeScript,this.supplementalCode),b=new Function(a),c=b(),d=c(this);return d},haxapp.app.CustomControlComponent.GENERATOR_FUNCTION_FORMAT_TEXT=["","//supplemental code","{1}","//end supplemental code","","//member function","var generator = function(component) {","{0}","}","//end member function","return generator;",""].join("\n"),haxapp.app.CustomControlComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.Control.generator.type;var f=hax.createmember.createMember(d,e),g=f.member;if(g){var h=new haxapp.app.CustomControlComponent.createComponentFromJson(a,g,c);f.component=h}return f},haxapp.app.CustomControlComponent.createComponentFromJson=function(a,b,c){var d=new haxapp.app.CustomControlComponent(a,b,c);return d},haxapp.app.CustomControlComponent.generator={},haxapp.app.CustomControlComponent.generator.displayName="Custom Control",haxapp.app.CustomControlComponent.generator.uniqueName="haxapp.app.CustomControlComponent",haxapp.app.CustomControlComponent.generator.createComponent=haxapp.app.CustomControlComponent.createComponent,haxapp.app.CustomControlComponent.generator.createComponentFromJson=haxapp.app.CustomControlComponent.createComponentFromJson,haxapp.app.CustomControlComponent.generator.DEFAULT_WIDTH=500,haxapp.app.CustomControlComponent.generator.DEFAULT_HEIGHT=500,haxapp.app.CustomResource=function(){this.contentElement=null,this.html="",this.customizeScript="",this.supplementalCode="",this.css=""},haxapp.app.CustomResource.prototype.setComponent=function(a){this.component=a},haxapp.app.CustomResource.prototype.getContentElement=function(){return this.component.getOutputElement()},haxapp.app.CustomResource.prototype.getComponent=function(){return this.component},haxapp.app.CustomResource.prototype.getHtml=function(){return this.html},haxapp.app.CustomResource.prototype.getCustomizeScript=function(){return this.customizeScript},haxapp.app.CustomResource.prototype.getSupplementalCode=function(){return this.supplementalCode},haxapp.app.CustomResource.prototype.getCss=function(a){return this.css},haxapp.app.CustomResource.prototype.update=function(a,b,c,d){this.html=a,this.customizeScript=b,this.supplementalCode=c,this.css=d,this.updateResource()},haxapp.app.CustomResource.prototype.updateResource=function(){var a=hax.util.formatString(haxapp.app.CustomResource.GENERATOR_FUNCTION_FORMAT_TEXT,this.customizeScript,this.supplementalCode),b=new Function(a),c=b(),d=c(this),e=this.getObject();e.updateResource(d)},haxapp.app.CustomResource.GENERATOR_FUNCTION_FORMAT_TEXT=["","//supplemental code","{1}","//end supplemental code","","//member function","var generator = function(component) {","{0}","}","//end member function","return generator;",""].join("\n"),haxapp.app.createworkspace={},haxapp.app.createworkspace.getCreateCallback=function(a){return function(){var b=function(b){var c=haxapp.app.createworkspace.createWorkspace(a,b);return c.getSuccess()||alert(c.getErrorMsg()),!0};haxapp.app.dialog.showCreateWorkspaceDialog(b)}},haxapp.app.createworkspace.createWorkspace=function(a,b){var c,d=new hax.ActionResponse;try{var e=new haxapp.app.WorkspaceUI;c=a.addWorkspaceUI(e,b);var f=new hax.Workspace(b);e.setWorkspace(f),d.workspaceUI=e}catch(g){c&&a.removeWorkspaceUI(b);var h=hax.ActionError.processException(g,"AppException",!1);d.addError(h)}return d},haxapp.app.closeworkspace={},haxapp.app.closeworkspace.getCloseCallback=function(a){return function(){var b=haxapp.app.closeworkspace.closeWorkspace(a);b.getSuccess()||alert(b.getErrorMsg())}},haxapp.app.closeworkspace.closeWorkspace=function(a){var b=new hax.ActionResponse,c=!1;try{var d=a.getActiveWorkspaceUI();if(null===d){var e="There is no workspace open.",f=new hax.ActionError(e,"User",null);return b.addError(f),b}var g=d.getWorkspace(),h=g.getName(),i=confirm("Are you sure you want to close the workspace "+h+"?");if(!i)return b;c=a.removeWorkspaceUI(h),d.close(),g.close()}catch(j){var k=!c,f=hax.ActionError.processException(j,"AppException",k);b.addError(f)}return b},haxapp.app.updatecomponent={},haxapp.app.updatecomponent.getAddComponentCallback=function(a,b,c,d){var e=function(){var e=a.getActiveWorkspaceUI();if(!e)return void alert("There is no open workspace.");var f=haxapp.app.updatecomponent.getDialogLayout(e,b,!0,c),g=function(a){var c=b.createComponent(e,a,d);return c.getSuccess()||alert(c.getErrorMsg()),!0};haxapp.app.dialog.showConfigurableDialog(f,g)};return e},haxapp.app.updatecomponent.getUpdateComponentCallback=function(a,b){var c=function(){var c=a.getWorkspaceUI(),d=a.getPropertyValues(),e=haxapp.app.updatecomponent.getDialogLayout(c,b,!1,d),f=function(b){var c=!1;for(var e in b)b[e]!==d[e]&&(c=!0);if(!c)return!0;var f=a.updatePropertyValues(d,b);return f.getSuccess()||alert(f.getErrorMsg()),!0};haxapp.app.dialog.showConfigurableDialog(e,f)};return c},haxapp.app.updatecomponent.getDialogLayout=function(a,b,c,d){var e=hax.util.deepJsonCopy(b.propertyDialogLines),f={},g=[];f.lines=g;var h={};h.type="title",c?h.title="New "+b.displayName:h.title="Update "+b.displayName,g.push(h);var i={};i.type="dropdown",i.heading="Folder: ",i.entries=a.getFolderList(),i.resultKey="parentKey",g.push(i);var j={};if(j.type="inputElement",j.heading="Name: ",j.resultKey="name",g.push(j),e)for(var k=0;k<e.length;k++)g.push(e[k]);var l={};if(l.type="submit",c?l.submit="Create":l.submit="Update",l.cancel="Cancel",g.push(l),d)for(var k=0;k<g.length;k++){var m=g[k];m.resultKey&&(m.initial=d[m.resultKey])}return f},haxapp.app.addadditionalcomponent={},haxapp.app.addadditionalcomponent.getAddAdditionalComponentCallback=function(a,b,c){return function(){var d=function(d){var e=a.getComponentGenerator(d);if(e){var f=haxapp.app.updatecomponent.getAddComponentCallback(a,e,b,c);f()}else alert("Unknown component type: "+d)};haxapp.app.dialog.showSelectComponentDialog(a.additionalComponents,d)}},haxapp.app.updatelinks={},haxapp.app.updatelinks.getUpdateLinksCallback=function(a){return function(){var b=a.getActiveWorkspaceUI();return b?void haxapp.app.dialog.showUpdateLinksDialog(b):void alert("There is no open workspace.")}},haxapp.app.Hax.prototype.createMenuBar=function(){var a=document.createElement("div"),b={position:"relative",display:"table-row",width:"100%",padding:"2px"};haxapp.ui.applyStyle(a,b),a.className="visicomp_menuBarStyle";var c;c=haxapp.ui.Menu.createMenu("Workspace"),a.appendChild(c.getElement());var d=haxapp.app.createworkspace.getCreateCallback(this);c.addCallbackMenuItem("New",d);var e=haxapp.app.openworkspace.getOpenCallback(this);c.addCallbackMenuItem("Open",e);var f=haxapp.app.saveworkspace.getSaveCallback(this);c.addCallbackMenuItem("Save",f);var g=haxapp.app.closeworkspace.getCloseCallback(this);c.addCallbackMenuItem("Close",g),c=haxapp.ui.Menu.createMenu("Components"),a.appendChild(c.getElement()),this.populateAddChildMenu(c),c=haxapp.ui.Menu.createMenu("Libraries"),a.appendChild(c.getElement());var h=haxapp.app.updatelinks.getUpdateLinksCallback(this);return c.addCallbackMenuItem("Update Links",h),a},haxapp.app.openworkspace={},haxapp.app.openworkspace.getOpenCallback=function(a){return function(){var b=function(b){var c=function(a){a.getSuccess()||alert(a.getErrorMsg())};return haxapp.app.openworkspace.openWorkspace(a,b,c),!0};haxapp.app.dialog.showOpenWorkspaceDialog(b)}},haxapp.app.openworkspace.openWorkspace=function(a,b,c){var d,e,f=new hax.ActionResponse;try{var g=JSON.parse(b);d=g.workspace.name;var h=new haxapp.app.WorkspaceUI;e=a.addWorkspaceUI(h,d);var i,j,k=!1;g.jsLinks&&g.jsLinks.length>0?(i=g.jsLinks,k=!0):i=[],g.cssLinks&&g.cssLinks.length>0?(j=g.cssLinks,k=!0):j=[];var l=function(){haxapp.app.openworkspace.loadWorkspace(h,g),c(f)};k?h.setLinks(i,j,l,d):l()}catch(m){e&&a.removeWorkspaceUI(d);var n=hax.ActionError.processException(m,"AppException",!1);f.addError(n),c(f)}},haxapp.app.openworkspace.loadWorkspace=function(a,b,c){var d=b.workspace,e=b.components,f=new hax.Workspace(d,c);a.setWorkspace(f,e)},haxapp.app.openworkspace.openWorkspaceFromUrl=function(a,b){var c=function(a){a.getSuccess()||alert(a.getErrorMsg())};haxapp.app.openworkspace.openWorkspaceFromUrlImpl(a,b,c)},haxapp.app.openworkspace.openWorkspaceFromUrlImpl=function(a,b,c){var d=function(b){haxapp.app.openworkspace.openWorkspace(a,b,c)},e=function(a){var b=new hax.ActionError(a,"AppException",null),d=new hax.ActionResponse;d.addError(b),c(d)};haxapp.app.openworkspace.doRequest(b,d,e)},haxapp.app.openworkspace.doRequest=function(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){var a;4==d.readyState&&200==d.status?b(d.responseText):4==d.readyState&&d.status>=400&&(a="Error in http request. Status: "+d.status,c(a))},d.open("GET",a,!0),d.send()},haxapp.app.saveworkspace={},haxapp.app.saveworkspace.getSaveCallback=function(a){return function(){var b=a.getActiveWorkspaceUI();return null===b?void alert("There is no workspace open."):void haxapp.app.dialog.showSaveWorkspaceDialog(a,b)}},haxapp.app.dialog.showOpenWorkspaceDialog=function(a){var b=haxapp.ui.createDialog({resizable:!0,movable:!0});b.setTitle("&nbsp;");var c=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});b.setContent(c);var d,e=haxapp.ui.createElement("div",null,{display:"table",overflow:"hidden"});c.appendChild(e),d=haxapp.ui.createElement("div",{className:"dialogLine"}),d.appendChild(haxapp.ui.createElement("div",{className:"dialogTitle",innerHTML:"Open Workspace"})),e.appendChild(d),d=haxapp.ui.createElement("div",{className:"dialogLine"}),d.appendChild(haxapp.ui.createElement("div",{innerHTML:"Paste saved workspace data in the space below."})),e.appendChild(d),d=haxapp.ui.createElement("div",{className:"dialogLine"});var f=haxapp.ui.createElement("textarea",{rows:"15",cols:"75"});d.appendChild(f),e.appendChild(d),d=haxapp.ui.createElement("div",{className:"dialogLine"});var g=function(){haxapp.ui.closeDialog(b)},h=function(){var c=f.value;if(0==c.length)return void alert("Please paste the file into the input field");var d=a(c);d&&haxapp.ui.closeDialog(b)};d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Open",onclick:h})),d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:g})),e.appendChild(d),b.show(),b.fitToContent(e),b.centerInParent()},haxapp.app.dialog.showSaveWorkspaceDialog=function(a,b){if(!b||!b.getWorkspace())return void alert("There is no workspace open.");var c=b.toJson(),d=JSON.stringify(c),e=haxapp.ui.createDialog({resizable:!0,movable:!0});e.setTitle("&nbsp;");var f=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});e.setContent(f);var g,h=haxapp.ui.createElement("div",null,{display:"table",overflow:"hidden"});f.appendChild(h);var g;g=haxapp.ui.createElement("div",{className:"dialogLine"}),g.appendChild(haxapp.ui.createElement("div",{className:"dialogTitle",innerHTML:"Save Workspace"})),h.appendChild(g),g=haxapp.ui.createElement("div",{className:"dialogLine"}),g.appendChild(haxapp.ui.createElement("div",{innerHTML:"Copy the data below and save it in a file to open later."})),h.appendChild(g),g=haxapp.ui.createElement("div",{className:"dialogLine"});var i=haxapp.ui.createElement("textarea",{value:d,rows:"15",cols:"75"});g.appendChild(i),h.appendChild(g),g=haxapp.ui.createElement("div",{className:"dialogLine"});var j=function(){haxapp.ui.closeDialog(e)};g.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"OK",onclick:j})),h.appendChild(g),e.setContent(h),e.show(),e.fitToContent(h),e.centerInParent()},haxapp.app.TextAreaEditor=function(a,b,c){this.outsideDiv=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"hidden"});var d=haxapp.ui.createElement("TEXTAREA",null,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",overflow:"auto"});this.textArea=d,this.textArea.readOnly=!0,this.outsideDiv.appendChild(this.textArea),this.component=a,this.table=a.getObject(),this.workingData=null,this.editOk=!1,this.editMode=!1,this.parentSave=b,this.parentCancel=c;var e=this,f=function(){e.onMouseClick()};this.textArea.addEventListener("click",f)},haxapp.app.TextAreaEditor.prototype.save=function(){var a=this.textArea.value,b=this.parentSave(a);b&&this.endEditMode()},haxapp.app.TextAreaEditor.prototype.cancel=function(){var a=this.parentCancel();a&&this.endEditMode()},haxapp.app.TextAreaEditor.prototype.getElement=function(){return this.outsideDiv},haxapp.app.TextAreaEditor.prototype.showData=function(a,b){this.editOk=b,this.textArea.readOnly=!b,this.textArea.value=a,this.editOk?this.textArea.style.backgroundColor="":this.textArea.style.backgroundColor=haxapp.app.TableEditComponent.NO_EDIT_BACKGROUND_COLOR},haxapp.app.TextAreaEditor.prototype.destroy=function(){},haxapp.app.TextAreaEditor.prototype.endEditMode=function(){this.editMode=!1,this.textArea.readOnly=!0,this.component.endEditUI()},haxapp.app.TextAreaEditor.prototype.onMouseClick=function(){if(this.editOk&&!this.editMode){var a=this,b=function(){a.save()},c=function(){a.cancel()};this.component.startEditUI(b,c),this.textArea.readOnly=!1,this.editMode=!0}},haxapp.app.TextAreaMode=function(a){this.component=a,this.editOk=!1;var b=this,c=function(a){return b.onSave(a)},d=function(){return b.onCancel()};this.editor=new haxapp.app.TextAreaEditor(a,c,d)},haxapp.app.TextAreaMode.formatString="\t",haxapp.app.TextAreaMode.prototype.isData=!0,haxapp.app.TextAreaMode.prototype.getElement=function(){return this.editor.getElement()},haxapp.app.TextAreaMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editOk=a;var d;d=null===c?"null":void 0===c?"undefined":JSON.stringify(c,null,haxapp.app.TextAreaMode.formatString),this.editor.showData(d,a)},haxapp.app.TextAreaMode.prototype.destroy=function(){this.editor.destroy()},haxapp.app.TextAreaMode.prototype.onSave=function(a){var b;if(a.length>0)try{b=JSON.parse(a)}catch(c){return alert("There was an error parsing the JSON input: "+c.message),!1}else b="";var d=this.component.getObject();return hax.updatemember.updateData(d,b),!0},haxapp.app.TextAreaMode.prototype.onCancel=function(){return this.showData(this.editOk),!0},haxapp.app.AceTextEditor=function(a,b,c,d){this.outsideDiv=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"hidden"}),this.editorDiv=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"auto"}),this.outsideDiv.appendChild(this.editorDiv),this.component=a,this.table=a.getObject(),this.workingData=null,this.editOk=!1,this.editMode=!1,this.parentSave=c,this.parentCancel=d;var e=ace.edit(this.editorDiv);e.renderer.setShowGutter(!0),e.setReadOnly(!0),e.setTheme("ace/theme/eclipse"),e.getSession().setMode(b),e.$blockScrolling=1/0,this.editor=e;var f=function(){e.resize()};haxapp.ui.setResizeListener(this.outsideDiv,f);var g=this,h=function(){g.onMouseClick()};this.editorDiv.addEventListener("click",h)},haxapp.app.AceTextEditor.prototype.save=function(){var a=this.editor.getSession().getValue(),b=this.parentSave(a);b&&this.endEditMode()},haxapp.app.AceTextEditor.prototype.cancel=function(){var a=this.parentCancel();a&&this.endEditMode()},haxapp.app.AceTextEditor.prototype.getElement=function(){return this.outsideDiv},haxapp.app.AceTextEditor.prototype.showData=function(a,b){this.editOk=b,this.editor.getSession().setValue(a),this.editOk?this.editorDiv.style.backgroundColor="":this.editorDiv.style.backgroundColor=haxapp.app.TableEditComponent.NO_EDIT_BACKGROUND_COLOR},haxapp.app.AceTextEditor.prototype.destroy=function(){this.editor&&(this.editor.destroy(),this.editor=null)},haxapp.app.AceTextEditor.prototype.endEditMode=function(){this.editMode=!1,this.editor.setReadOnly(!0),this.component.endEditUI()},haxapp.app.AceTextEditor.prototype.onMouseClick=function(){if(this.editOk&&!this.editMode){var a=this,b=function(){a.save()},c=function(){a.cancel()};this.component.startEditUI(b,c),this.editor.setReadOnly(!1),this.editMode=!0}},haxapp.app.AceCodeModeBase=function(a,b){this.component=a,this.editOk=!1;var c=this,d=function(a){return c.onSave(a)},e=function(){return c.onCancel()};this.editor=new haxapp.app.AceTextEditor(a,b,d,e)},haxapp.app.AceCodeModeBase.prototype.isData=!1,haxapp.app.AceCodeModeBase.prototype.getElement=function(){return this.editor.getElement()},haxapp.app.AceCodeModeBase.prototype.getComponent=function(){return this.component},haxapp.app.AceCodeModeBase.prototype.destroy=function(){this.editor.destroy()},haxapp.app.AceCodeModeBase.prototype.onCancel=function(){return this.showData(this.editOk),!0},haxapp.app.AceCodeMode=function(a,b,c){haxapp.app.AceCodeModeBase.call(this,a,"ace/mode/javascript"),this.onBlankData=b,this.editorCodeWrapper=c},haxapp.app.AceCodeMode.prototype=Object.create(haxapp.app.AceCodeModeBase.prototype),haxapp.app.AceCodeMode.prototype.constructor=haxapp.app.AceCodeMode,haxapp.app.AceCodeMode.prototype.showData=function(a){var b,c=this.component.getObject(),d=c.getFunctionBody();b=this.editorCodeWrapper?this.editorCodeWrapper.unwrapCode(d):d,this.editOk=a,this.editor.showData(b,a)},haxapp.app.AceCodeMode.prototype.onSave=function(a){var b=this.component.getObject();if(this.onBlankData&&""===a){var c=this.onBlankData.dataValue;hax.updatemember.updateData(b,c)}else{var d;d=this.editorCodeWrapper?this.editorCodeWrapper.wrapCode(a):a;var e=b.getSupplementalCode(),f=b.getArgList(),g=hax.updatemember.updateCode(b,f,d,e);if(!g.getSuccess()){var h=g.getErrorMsg();alert(h)}}return!0},haxapp.app.AceDataMode=function(a,b){this.component=a,this.editOk=!1;var c=this,d=function(a){return c.onSave(a)},e=function(){return c.onCancel()},f=b?"ace/mode/json":"ace/mode/text";this.editor=new haxapp.app.AceTextEditor(a,f,d,e)},haxapp.app.AceDataMode.formatString="\t",haxapp.app.AceDataMode.prototype.isData=!0,haxapp.app.AceDataMode.prototype.getElement=function(){return this.editor.getElement()},haxapp.app.AceDataMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editOk=a;var d;d=null===c?"null":void 0===c?"undefined":JSON.stringify(c,null,haxapp.app.AceDataMode.formatString),this.editor.showData(d,a)},haxapp.app.AceDataMode.prototype.destroy=function(){this.editor.destroy()},haxapp.app.AceDataMode.prototype.onSave=function(a){var b;if(a.length>0)try{b=JSON.parse(a)}catch(c){return alert("There was an error parsing the JSON input: "+c.message),!1}else b="";var d=this.component.getObject();return hax.updatemember.updateData(d,b),!0},haxapp.app.AceDataMode.prototype.onCancel=function(){return this.showData(this.editOk),!0},haxapp.app.AceSupplementalMode=function(a){haxapp.app.AceCodeModeBase.call(this,a,"ace/mode/javascript")},haxapp.app.AceSupplementalMode.prototype=Object.create(haxapp.app.AceCodeModeBase.prototype),haxapp.app.AceSupplementalMode.prototype.constructor=haxapp.app.AceSupplementalMode,haxapp.app.AceSupplementalMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getSupplementalCode();this.editor.showData(c,a)},haxapp.app.AceSupplementalMode.prototype.onSave=function(a){var b=this.component.getObject(),c=b.getFunctionBody(),d=a,e=b.getArgList(),f=hax.updatemember.updateCode(b,e,c,d);if(!f.getSuccess()){var g=f.getErrorMsg();alert(g)}return!0},haxapp.app.AceCustomCodeMode=function(a){haxapp.app.AceCodeModeBase.call(this,a,"ace/mode/javascript")},haxapp.app.AceCustomCodeMode.prototype=Object.create(haxapp.app.AceCodeModeBase.prototype),haxapp.app.AceCustomCodeMode.prototype.constructor=haxapp.app.AceCustomCodeMode,haxapp.app.AceCustomCodeMode.prototype.showData=function(a){var b=this.component.getCustomizeScript();this.editOk=a,this.editor.showData(b,a)},haxapp.app.AceCustomCodeMode.prototype.onSave=function(a){var b="",c="",d=a,e=this.component.getSupplementalCode(),f=this.component.update(b,d,e,c);if(!f.getSuccess()){var g=f.getErrorMsg();alert(g)}return!0},haxapp.app.AceCustomSupplementalMode=function(a){haxapp.app.AceCodeModeBase.call(this,a,"ace/mode/javascript")},haxapp.app.AceCustomSupplementalMode.prototype=Object.create(haxapp.app.AceCodeModeBase.prototype),haxapp.app.AceCustomSupplementalMode.prototype.constructor=haxapp.app.AceCustomSupplementalMode,haxapp.app.AceCustomSupplementalMode.prototype.showData=function(a){var b=this.component.getSupplementalCode();this.editor.showData(b,a)},haxapp.app.AceCustomSupplementalMode.prototype.onSave=function(a){var b="",c="",d=this.component.getCustomizeScript(),e=a,f=this.getComponent(),g=f.update(b,d,e,c);if(!g.getSuccess()){var h=g.getErrorMsg();alert(h)}return!0},haxapp.app.JsonFormEditor=function(a){this.editorDiv=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"auto"}),this.workingData={d:"c"},this.editOk=!1,this.editor=null;var b=this;this.editCallback=function(){var c=b.editor.getCurrentValue();b.workingData=c,a(c)}},haxapp.app.JsonFormEditor.prototype.getElement=function(){return this.editorDiv},haxapp.app.JsonFormEditor.prototype.showData=function(a,b){a===this.workingData&&this.editOk===b||(void 0===a&&(a=null),this.workingData=hax.util.deepJsonCopy(a),this.editOk=b,hax.util.removeAllChildren(this.editorDiv),this.editor=new haxapp.jsonedit.JsonEditArea(this.editorDiv,a,b),this.editor.setEditCallback(this.editCallback),this.editOk?this.editorDiv.style.backgroundColor="":this.editorDiv.style.backgroundColor=haxapp.app.TableEditComponent.NO_EDIT_BACKGROUND_COLOR)},haxapp.app.FormDataMode=function(a){this.component=a;var b=this,c=function(a){b.onSave(a)};this.editor=new haxapp.app.JsonFormEditor(c)},haxapp.app.FormDataMode.prototype.isData=!0,haxapp.app.FormDataMode.prototype.getElement=function(){return this.editor.getElement()},haxapp.app.FormDataMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editor.showData(c,a)},haxapp.app.FormDataMode.prototype.destroy=function(){},haxapp.app.FormDataMode.prototype.onSave=function(a){var b=this.component.getObject();return hax.updatemember.updateData(b,a),!0},haxapp.app.HandsonGridEditor=function(a,b,c){this.outsideDiv=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"hidden"}),this.gridDiv=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",width:"50px",height:"50px",overflow:"hidden",zIndex:0}),this.outsideDiv.appendChild(this.gridDiv),this.component=a,this.table=a.getObject(),this.inputData=null,this.editOk=!1,this.parentSave=b,this.parentCancel=c;var d=this,e=function(){d.gridDiv.style.width=d.outsideDiv.clientWidth+"px",d.gridDiv.style.height=d.outsideDiv.clientHeight+"px",d.gridControl&&d.gridControl.render()};haxapp.ui.setResizeListener(this.outsideDiv,e),this.gridEdited=function(a){d.save(arguments)},this.timerInProcess=!1;var f=50;this.delayGridEdited=function(a){if(!d.timerInProcess){d.timerInProcess=!0;var b=function(a){d.timerInProcess=!1,d.gridEdited(arguments)};setTimeout(b,f)}}},haxapp.app.HandsonGridEditor.prototype.save=function(a){"loadData"!=a[1]&&(this.inputData=hax.util.deepJsonCopy(this.gridControl.getData()),this.parentSave(this.inputData))},haxapp.app.HandsonGridEditor.prototype.cancel=function(){this.parentCancel()},haxapp.app.HandsonGridEditor.prototype.getElement=function(){return this.outsideDiv},haxapp.app.HandsonGridEditor.prototype.showData=function(a,b){if(this.inputData!==a||!b){var c=this.editOk;this.editOk=b,this.inputData=a;var d=hax.util.deepJsonCopy(a);this.gridControl&&c===b||this.createNewGrid(),d||(d=[[]]),this.gridControl.loadData(d),this.editOk?this.gridDiv.style.backgroundColor="":this.gridDiv.style.backgroundColor=haxapp.app.TableEditComponent.NO_EDIT_BACKGROUND_COLOR}},haxapp.app.HandsonGridEditor.prototype.destroy=function(){this.gridControl&&(this.gridControl.destroy(),this.gridControl=null)},haxapp.app.HandsonGridEditor.prototype.createNewGrid=function(){this.gridControl&&(this.gridControl.destroy(),this.gridControl=null);var a;this.editOk?(a={rowHeaders:!0,colHeaders:!0,contextMenu:!0,afterChange:this.gridEdited,afterCreateCol:this.delayGridEdited,afterCreateRow:this.delayGridEdited,afterRemoveCol:this.gridEdited,afterRemoveRow:this.gridEdited},this.gridEditable=!0):(a={readOnly:!0,rowHeaders:!0,colHeaders:!0},this.gridEditable=!1),this.gridControl=new Handsontable(this.gridDiv,a)},haxapp.app.HandsonGridMode=function(a){this.component=a,this.editOk=!1;var b=this,c=function(a){return b.onSave(a)},d=function(){return b.onCancel()};this.editor=new haxapp.app.HandsonGridEditor(a,c,d)},haxapp.app.HandsonGridMode.prototype.isData=!0,haxapp.app.HandsonGridMode.prototype.getElement=function(){return this.editor.getElement()},haxapp.app.HandsonGridMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editOk=a,this.editor.showData(c,a)},haxapp.app.HandsonGridMode.prototype.destroy=function(){this.editor.destroy()},haxapp.app.HandsonGridMode.prototype.onSave=function(a){var b=this.component.getObject();return hax.updatemember.updateData(b,a),!0},haxapp.app.HandsonGridMode.prototype.onCancel=function(){return this.showData(this.editOk),!0},haxapp.app.ResourceOutputMode=function(a){this.component=a,this.outputElement=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"auto"})},haxapp.app.ResourceOutputMode.prototype.isData=!0,haxapp.app.ResourceOutputMode.prototype.getElement=function(){return this.outputElement},haxapp.app.ResourceOutputMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getResource();c&&c.show&&c.show()},haxapp.app.ResourceOutputMode.prototype.destroy=function(){var a=this.component.getObject(),b=a.getResource();b&&b.hide&&b.hide()},haxapp.app.ResourceOutputMode.prototype.onSave=function(a){},
haxapp.app.dialog.showConfigurableDialog=function(a,b){var c=haxapp.ui.createDialog({movable:!0}),d=[],e={};e.onClose=function(){for(var a=0;a<d.length;a++)i=d[a],i.onClose&&i.onClose();haxapp.ui.closeDialog(c)},e.onCancel=function(){e.onClose()},e.onSubmit=function(){for(var a,c={},f=0;f<d.length;f++)a=d[f],a.addToResult&&a.addToResult(c);var g=b(c);g&&e.onClose()};for(var f=haxapp.ui.createElement("div",{className:"dialogBody"}),g=0;g<a.lines.length;g++){var h=a.lines[g],i=haxapp.app.dialog.showConfigurableDialog.createLine(h,e);d.push(i),i.element&&f.appendChild(i.element)}c.setContent(f),c.show(),c.fitToContent(f),c.centerInParent()},haxapp.app.dialog.showConfigurableDialog.createLine=function(a,b){var c=haxapp.app.dialog.showConfigurableDialog.lineFunctions[a.type];return c?c(a,b):(alert("Error: Unknown for element type: "+a.type),null)},haxapp.app.dialog.showConfigurableDialog.lineFunctions={title:function(a,b){var c={},d=haxapp.ui.createElement("div",{className:"dialogLine"});return d.appendChild(haxapp.ui.createElement("div",{className:"dialogTitle",innerHTML:a.title})),c.element=d,c},dropdown:function(a,b){var c={},d=haxapp.ui.createElement("div",{className:"dialogLine"});a.heading&&d.appendChild(document.createTextNode(a.heading));for(var e=haxapp.ui.createElement("select"),f=0;f<a.entries.length;f++){var g=a.entries[f];e.add(haxapp.ui.createElement("option",{text:g}))}return a.initial&&(e.value=a.initial),a.disabled&&(e.disabled=!0),d.appendChild(e),c.element=d,c.addToResult=function(b){var c=e.value;b[a.resultKey]=c},c},inputElement:function(a,b){var c={},d=haxapp.ui.createElement("div",{className:"dialogLine"});a.heading&&d.appendChild(document.createTextNode(a.heading));var e=haxapp.ui.createElement("input",{type:"text"});return a.initial&&(e.value=a.initial),a.disabled&&(e.disabled=!0),d.appendChild(e),c.element=d,c.addToResult=function(b){var c=e.value.trim();b[a.resultKey]=c},c},aceEditor:function(a,b){},radioButton:function(a,b){},submit:function(a,b){var c={},d=haxapp.ui.createElement("div",{className:"dialogLine"});return a.submit&&d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:a.submit,onclick:b.onSubmit})),a.cancel&&d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:a.cancel,onclick:b.onCancel})),c.element=d,c},custom:function(a,b){return a.createLineObject(b)},invisible:function(a,b){var c={};return c.element=null,c.addToResult=function(b){b[a.resultKey]=a.initial},c}},haxapp.app.dialog.showCreateWorkspaceDialog=function(a){var b=haxapp.ui.createDialog({movable:!0});b.setTitle("&nbsp;");var c=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});b.setContent(c);var d,e=haxapp.ui.createElement("div",null,{display:"table",overflow:"hidden"});c.appendChild(e);var d;d=haxapp.ui.createElement("div",{className:"dialogLine"}),d.appendChild(haxapp.ui.createElement("div",{className:"dialogTitle",innerHTML:"New Workspace"})),e.appendChild(d),d=haxapp.ui.createElement("div",{className:"dialogLine"}),d.appendChild(document.createTextNode("Name:"));var f=haxapp.ui.createElement("input",{type:"text"});d.appendChild(f),e.appendChild(d),d=haxapp.ui.createElement("div",{className:"dialogLine"});var g=function(){haxapp.ui.closeDialog(b)},h=function(){var c=f.value.trim();if(0==c.length)return void alert("The name is invalid");var d=a(c);d&&haxapp.ui.closeDialog(b)};d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Create",onclick:h})),d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:g})),e.appendChild(d),b.setContent(e),b.show(),b.fitToContent(e),b.centerInParent()},haxapp.app.dialog.showUpdateLinksDialog=function(a){var b=haxapp.ui.createDialog({minimizable:!0,maximizable:!0,movable:!0,resizable:!0}),c=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});b.setContent(c);var d,e=haxapp.ui.createElement("div",null,{display:"table",overflow:"hidden"});c.appendChild(e);var d;d=haxapp.ui.createElement("div",{className:"dialogLine"}),d.appendChild(haxapp.ui.createElement("div",{className:"dialogTitle",innerHTML:"Update Links"})),e.appendChild(d),d=haxapp.ui.createElement("div",{className:"dialogLine"});var f=haxapp.ui.createElement("input",{type:"radio",name:"componentContent",value:"jsLinks"});d.appendChild(f),d.appendChild(document.createTextNode("JS Links")),e.appendChild(d);var g=haxapp.ui.createElement("input",{type:"radio",name:"componentContent",value:"cssLinks"});d.appendChild(g),d.appendChild(document.createTextNode("CSS Links")),d=haxapp.ui.createElement("div",{className:"dialogLine"});var h=haxapp.ui.createElement("div",null,{position:"relative",width:"500px",height:"300px",border:"1px solid darkgray"});d.appendChild(h),e.appendChild(d);var i=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",bottom:"0px",right:"0px",left:"0px"}),j=null;h.appendChild(i);var k=haxapp.ui.createElement("div",null,{position:"absolute",top:"0px",bottom:"0px",right:"0px",left:"0px"}),l=null;h.appendChild(k),d=haxapp.ui.createElement("div",{className:"dialogLine"});var m=function(){o()},n=function(){var b,c;if(j){var d=j.getSession().getValue().trim();b=haxapp.app.dialog.createLinkArray(d)}else b=[];if(l){var e=l.getSession().getValue().trim();c=haxapp.app.dialog.createLinkArray(e)}else c=[];a.setLinks(b,c),o()},o=function(){haxapp.ui.closeDialog(b),j&&(j.destroy(),j=null),l&&(l.destroy(),l=null)};d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Save",onclick:n})),d.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:m})),e.appendChild(d),b.setContent(e),b.show(),b.fitToContent(e),b.centerInParent();var p=function(){if(k.style.display="none",i.style.display="",!j){j=ace.edit(i),j.$blockScrolling=1/0,j.setTheme("ace/theme/eclipse"),j.getSession().setMode("ace/mode/text");var b=a.getJsLinks();if(b){var c=b.join("\n");j.getSession().setValue(c)}}},q=function(){if(k.style.display="",i.style.display="none",!l){l=ace.edit(k),l.$blockScrolling=1/0,l.setTheme("ace/theme/eclipse"),l.getSession().setMode("ace/mode/text");var b=a.getCssLinks();if(b){var c=b.join("\n");l.getSession().setValue(c)}}};f.checked=!0,p();var r=function(){g.checked?q():f.checked&&p()};g.onchange=r,f.onchange=r;var s=function(){var a=e.parentElement,b=d.offsetLeft,c=d.offsetTop+d.offsetHeight+b,f=a.clientWidth-2*b,g=a.clientHeight-c;h.style.width=f-5+"px",h.style.height=h.offsetHeight+g-5+"px",l&&l.resize(),j&&j.resize()},t=e.parentElement;haxapp.ui.setResizeListener(t,s)},haxapp.app.dialog.createLinkText=function(a){return a.join("\n")},haxapp.app.dialog.createLinkArray=function(a){return a&&0!==a.length?a.split(/\s/):[]},haxapp.app.dialog.showSelectComponentDialog=function(a,b){var c=haxapp.ui.createDialog({movable:!0}),d=haxapp.ui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});c.setContent(d);var e,f=haxapp.ui.createElement("div",null,{display:"table",overflow:"hidden"});d.appendChild(f);var e;e=haxapp.ui.createElement("div",{className:"dialogLine"}),e.appendChild(haxapp.ui.createElement("div",{className:"dialogTitle",innerHTML:"Select Component Type"})),f.appendChild(e),e=haxapp.ui.createElement("div",{className:"dialogLine"}),e.appendChild(document.createTextNode("Component:"));var g=haxapp.ui.createElement("select");e.appendChild(g);for(var h=0;h<a.length;h++){var i=a[h];g.add(haxapp.ui.createElement("option",{text:i}))}f.appendChild(e),e=haxapp.ui.createElement("div",{className:"dialogLine"});var j=function(){haxapp.ui.closeDialog(c)},k=function(){var a=g.value;b(a),haxapp.ui.closeDialog(c)};e.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Create",onclick:k})),e.appendChild(haxapp.ui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:j})),f.appendChild(e),c.setContent(f),c.show(),c.fitToContent(f),c.centerInParent()};