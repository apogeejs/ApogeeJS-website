/*! hax 0.3.1 */
var __globals__=window;hax={},hax.action={},hax.ActionResponse=function(){this.success=!0,this.errors=[],this.fatal=!1},hax.ActionResponse.prototype.addError=function(a){this.success=!1,a.getIsFatal()&&(this.fatal=!0),this.errors.indexOf(a)<0&&this.errors.push(a)},hax.ActionResponse.prototype.getSuccess=function(){return this.success},hax.ActionResponse.prototype.getErrorMsg=function(){var a="";this.fatal&&(a+="Unknown Error: The application is in an indeterminant state. It is recommended it be closed.\n");for(var b=0;b<this.errors.length;b++){var c=this.errors[b],d="";c.member&&(d+=c.member.getName()+": "),d+=c.msg,a+=d+"\n"}return a},hax.ActionError=function(a,b,c){this.msg=null!=a?a:hax.ActionError.UNKNOWN_ERROR_MESSAGE,this.errorType=b,this.member=c,this.isFatal=!1,this.parentException=null},hax.ActionError.UNKNOWN_ERROR_MESSAGE="Unknown Error",hax.ActionError.prototype.setParentException=function(a){this.parentException=a},hax.ActionError.prototype.setIsFatal=function(a){this.isFatal=a},hax.ActionError.prototype.getIsFatal=function(){return this.isFatal},hax.ActionError.prototype.getType=function(){return this.errorType},hax.ActionError.processException=function(a,b,c,d){a.stack&&console.error(a.stack);var e=d?d:"";a.message&&(e+=a.message),0==e.length&&(e="Unknown error");var f=new hax.ActionError(e,b,null);f.setParentException(a);var g;return g=void 0!==a.isFatal?a.isFatal:c,f.setIsFatal(g),f},hax.EventManager={},hax.EventManager.init=function(){this.listenerTable={},this.handlerTable={}},hax.EventManager.addListener=function(a,b){var c=this.listenerTable[a];c||(c=[],this.listenerTable[a]=c);for(var d=0;d<c.length;d++){var e=c[d];if(e==b)return}c.push(b)},hax.EventManager.removeListener=function(a,b){var c=this.listenerTable[a];if(c){var d=c.indexOf(b);d>=0&&c.splice(d,1)}},hax.EventManager.dispatchEvent=function(a,b){var c=this.listenerTable[a];if(c)for(var d=0;d<c.length;d++){var e=c[d];e.call(null,b)}},hax.EventManager.addHandler=function(a,b){this.handlerTable[a]=b},hax.EventManager.removeHandler=function(a){delete this.handlerTable[a]},hax.EventManager.callHandler=function(a,b){var c=this.handlerTable[a];if(c)return c(b);throw"Handler not found: "+a},hax.ContextManager=function(a){this.member=a,this.contextList=[]},hax.ContextManager.prototype.addToContextList=function(a){this.contextList.push(a)},hax.ContextManager.prototype.removeFromContextList=function(a){var b=this.contextList.indexOf(a);b>=0&&this.contextList.splice(b,1)},hax.ContextManager.prototype.clearContextList=function(){this.contextList=[]},hax.ContextManager.prototype.getBaseData=function(a,b){return this.hierarchicalLookup("lookupData",a,b)},hax.ContextManager.prototype.getImpactor=function(a,b){return this.hierarchicalLookup("lookupImpactor",a,b)},hax.ContextManager.prototype.hierarchicalLookup=function(a,b,c){void 0===c&&(c=0);var d=this.lookup(a,b,c);if(void 0!==d)return d;if(this.member&&this.member.getOwner){var e=this.member.getOwner();if(e){var f=e.getContextManager();return f.hierarchicalLookup(a,b,c+1)}}},hax.ContextManager.prototype.lookup=function(a,b,c){for(var d=0;d<this.contextList.length;d++){var e=this.contextList[d];if(!(e.isLocal&&c>1)){var f=this[a](e,b);if(void 0!==f)return f}}},hax.ContextManager.prototype.lookupData=function(a,b){if(a.parent){var c=a.parent.lookupChild(b);return c?c.getData():void 0}if(a.data)return a.data[b]},hax.ContextManager.prototype.lookupImpactor=function(a,b){return a.parent?a.parent.lookupChildFromPath(b):void 0},hax.codeCompiler={},hax.codeCompiler.processCode=function(a,b){var c=hax.codeCompiler.createCombinedFunctionBody(a.argList,a.functionBody,a.supplementalCode,b),d=hax.codeAnalysis.analyzeCode(c);if(!d.success)return a.errors=d.errors,a;a.varInfo=d.varInfo;var e=hax.codeCompiler.createObjectFunction(a.varInfo,c);return a.generatorFunction=e,a},hax.codeCompiler.createCombinedFunctionBody=function(a,b,c,d){var e=a.join(","),f=hax.util.formatString(hax.codeCompiler.OBJECT_FUNCTION_FORMAT_TEXT,d,e,b,c);return f},hax.codeCompiler.createObjectFunction=function(a,b){var c="",d="";for(var e in a)if("__dh__"!=e){var f=a[e];"returnValue"===e||f.isLocal||(c+="var "+e+";\n",d+=e+' = contextManager.getBaseData("'+e+'");\n')}var g=hax.util.formatString(hax.codeCompiler.GENERATOR_FUNCTION_FORMAT_TEXT,c,d,b),h=new Function("__dh__",g);return h},hax.codeCompiler.OBJECT_FUNCTION_FORMAT_TEXT=["//{0}","","//supplemental code","{3}","//end supplemental code","","//member function","__dh__.setObjectFunction(function({1}) {","//overhead code","__dh__.initFunction();","","//user code","{2}","});","//end member function",""].join("\n"),hax.codeCompiler.GENERATOR_FUNCTION_FORMAT_TEXT=["'use strict'","//declare context variables","{0}","","//context setter","__dh__.setContextSetter(function(contextManager) {","{1}","});","","//user code","{2}"].join("\n"),hax.codeAnalysis={},hax.codeAnalysis.syntax={AssignmentExpression:[{name:"left",modified:!0},{name:"right"}],ArrayExpression:[{name:"elements",list:!0}],ArrowFunctionExpression:[{name:"params",list:!0},{name:"body"},{name:"defaults",list:!0}],BlockStatement:[{name:"body",list:!0}],BinaryExpression:[{name:"left"},{name:"right"}],BreakStatement:[],CallExpression:[{name:"callee"},{name:"arguments",list:!0}],CatchClause:[{name:"param",declaration:!0},{name:"body"}],ConditionalExpression:[{name:"test"},{name:"alternate"},{name:"consequent"}],ContinueStatement:[],DoWhileStatement:[{name:"body"},{name:"test",list:!0}],EmptyStatement:[],ExpressionStatement:[{name:"expression"}],ForStatement:[{name:"init"},{name:"test"},{name:"update",list:!0},{name:"body"}],ForOfStatement:[{name:"left"},{name:"right"},{name:"body"}],ForInStatement:[{name:"left"},{name:"right"},{name:"body"}],FunctionDeclaration:[{name:"id",declaration:!0},{name:"params",list:!0,declaration:!0},{name:"body"}],FunctionExpression:[{name:"id",declaration:!0},{name:"params",list:!0,declaration:!0},{name:"body"}],Identifier:[],IfStatement:[{name:"test"},{name:"consequent"},{name:"alternate"}],Literal:[],LabeledStatement:[{name:"body"}],LogicalExpression:[{name:"left"},{name:"right"}],MemberExpression:[],NewExpression:[{name:"callee"},{name:"arguments",list:!0}],Program:[{name:"body",list:!0}],Property:[],ReturnStatement:[{name:"argument"}],SequenceExpression:[{name:"expressions",list:!0}],ObjectExpression:[],SwitchCase:[{name:"test"},{name:"consequent",list:!0}],SwitchStatement:[{name:"discriminant"},{name:"cases",list:!0}],ThisExpression:[],ThrowStatement:[{name:"argument"}],TryStatement:[{name:"block",list:!0},{name:"handler"},{name:"finalizer",list:!0}],UnaryExpression:[{name:"argument"}],UpdateExpression:[{identifierNode:"argument",modified:!0}],VariableDeclaration:[{name:"declarations",list:!0,declaration:!0}],VariableDeclarator:[{name:"id",declaration:!0},{name:"init"}],WhileStatement:[{name:"body"},{name:"test",list:!0}],WithStatement:[{name:"object"},{name:"body"}],YieldExpression:[{name:"argument"}],ArrayPattern:null,AssignmentPattern:null,ClassBody:null,ClassDeclaration:null,ClassExpression:null,DebuggerStatement:null,ExportAllDeclaration:null,ExportDefaultDeclaration:null,ExportNamedDeclaration:null,ExportSpecifier:null,ImportDeclaration:null,ImportDefaultSpecifier:null,ImportNamespaceSpecifier:null,ImportSpecifier:null,MetaProperty:null,MethodDefinition:null,ObjectPattern:null,RestElement:null,SpreadElement:null,Super:null,TaggedTemplateExpression:null,TemplateElement:null,TemplateLiteral:null},hax.codeAnalysis.analyzeCode=function(a){var b,c={};try{if(b=esprima.parse(a,{tolerant:!0,loc:!0}),b.errors&&b.errors.length>0){c.success=!1,c.errors=[];for(var d=0;d<b.errors.length;d++){var e=b.errors[d],f=new hax.ActionError(e.description,"Analyze - Code");f.setParentException(e),c.errors.push(f)}}}catch(g){var f=hax.ActionError.processException(g,"Analyze - Code",!1);return c.success=!1,c.errors=[],c.errors.push(f),c}var h=hax.codeAnalysis.getVariableInfo(b);return c.success=!0,c.varInfo=h,c},hax.codeAnalysis.getVariableInfo=function(a){var b={};b.nameTable={},b.scopeTable={};var c=hax.codeAnalysis.startScope(b);return hax.codeAnalysis.processTreeNode(b,a,!1,!1),hax.codeAnalysis.endScope(b,c),hax.codeAnalysis.markLocalVariables(b),b.nameTable},hax.codeAnalysis.startScope=function(a){void 0===a.scopeIdGenerator&&(a.scopeIdGenerator=0);var b={};b.id=String(a.scopeIdGenerator++),b.parent=a.currentScope,b.localVariables={},a.scopeTable[b.id]=b,a.currentScope=b},hax.codeAnalysis.endScope=function(a){var b=a.currentScope;b&&(a.currentScope=b.parent)},hax.codeAnalysis.processTreeNode=function(a,b,c,d){if("Identifier"==b.type||"MemberExpression"==b.type)hax.codeAnalysis.processVariable(a,b,c,d);else if("FunctionDeclaration"==b.type||"FunctionExpression"==b.type)hax.codeAnalysis.processFunction(a,b);else{if("NewExpression"===b.type&&"Function"===b.callee.type)throw hax.codeAnalysis.createParsingError("Function constructor not currently supported!",b.loc);hax.codeAnalysis.processGenericNode(a,b)}},hax.codeAnalysis.processGenericNode=function(a,b){var c=hax.codeAnalysis.syntax[b.type];if(void 0===c)throw hax.codeAnalysis.createParsingError("Syntax Tree Node not found: "+b.type,b.loc);if(null===c)throw hax.codeAnalysis.createParsingError("Syntax node not supported: "+b.type,b.loc);for(var d=0;d<c.length;d++){var e=c[d],f=b[e.name];if(f)if(e.list)for(var g=0;g<f.length;g++)hax.codeAnalysis.processTreeNode(a,f[g],e.modified,e.declaration);else hax.codeAnalysis.processTreeNode(a,f,e.modified,e.declaration)}},hax.codeAnalysis.processFunction=function(a,b){var c=b.type,d=b.id,e=b.params,f=b.body;"FunctionDeclaration"===c&&d&&hax.codeAnalysis.processTreeNode(a,d,!1,!0);var g=hax.codeAnalysis.startScope(a);"FunctionExpression"===c&&d&&hax.codeAnalysis.processTreeNode(a,d,!1,!0);for(var h=0;h<e.length;h++)hax.codeAnalysis.processTreeNode(a,e[h],!1,!0);hax.codeAnalysis.processTreeNode(a,f,!1,!1),hax.codeAnalysis.endScope(a,g)},hax.codeAnalysis.processVariable=function(a,b,c,d){var e=this.getVariableDotPath(a,b),f=e[0],g=a.nameTable[f];g||(g={},g.name=f,g.uses=[],a.nameTable[f]=g);var h={};if(h.path=e,h.scope=a.currentScope,h.node=b,h.isModified=c,g.uses.push(h),d){var i=a.currentScope.localVariables;i[f]||(i[f]=!0)}},hax.codeAnalysis.getVariableDotPath=function(a,b){if("Identifier"==b.type)return[b.name];if("MemberExpression"==b.type){var c=this.getVariableDotPath(a,b.object);return b.computed?this.processTreeNode(a,b.property,!1,!1):c.push(b.property.name),c}throw this.createParsingError("Unknown application error: expected a variable identifier node.",b.loc)},hax.codeAnalysis.markLocalVariables=function(a){for(var b in a.nameTable){for(var c=a.nameTable[b],d=c.name,e=!1,f=0;f<c.uses.length;f++){for(var g=c.uses[f],h=g.scope,i=null,j=h;j;j=j.parent)if(j.localVariables[d]){i=j;break}i?(g.isLocal=!0,g.declarationScope=i):e=!0}e||(c.isLocal=!0)}},hax.codeAnalysis.createParsingError=function(a,b){var c=hax.base.createError(a,!1);return b&&(c.lineNumber=b.start.line,c.column=b.start.column),c},hax.codeDependencies={},hax.codeDependencies.getDependencyInfo=function(a,b){var c=[],d={};for(var e in a)for(var f=a[e],g=0;g<f.uses.length;g++){var h=f.uses[g];if(!h.isLocal){var i=h.path,j=b.getImpactor(i);if(j){var k=j.getFullName();d[k]||(c.push(j),d[k]=!0)}}}return c},hax.calculation={},hax.calculation.addToRecalculateList=function(a,b){if(!(a.indexOf(b)>=0)&&(b.isDependent&&b.needsCalculating()&&(a.push(b),b.prepareForCalculate()),b.isDataHolder))for(var c=b.getImpactsList(),d=0;d<c.length;d++)hax.calculation.addToRecalculateList(a,c[d])},hax.calculation.callRecalculateList=function(a,b){var c,d,e=!0;for(d=0;d<a.length;d++)if(c=a[d],c.calculate(),c.hasError()){var f=c.getErrors();if(f)for(var g=0;g<f.length;g++)b.addError(f[g]);e=!1}return e},hax.base={},hax.base.mixin=function(a,b){for(var c in b)a.prototype[c]=b[c]},hax.base.deepFreeze=function(a){if(null!==a&&void 0!==a){var b,c=hax.util.getObjectType(a);if("Object"==c){Object.freeze(a);for(b in a)hax.base.deepFreeze(a[b])}else if("Array"==c)for(Object.freeze(a),b=0;b<a.length;b++)hax.base.deepFreeze(a[b])}},hax.base.createError=function(a,b,c){var d=new Error(a);return void 0!==b&&(d.isFatal=b),void 0!==c&&(d.baseError=c),d},hax.base.getListInFirstButNotSecond=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];b.indexOf(e)<0&&c.push(e)}return c},hax.util={},hax.util.stringHash=function(a){for(var b,c=4294967295,d=0,e=0;e<a.length;e++)b=a.charCodeAt(e),d=31*d+b&c;return d},hax.util.objectHash=function(a){var b=JSON.stringify(a);return stringHash(b)},hax.util.constructors={String:"".constructor,Number:3..constructor,Boolean:(!0).constructor,Date:(new Date).constructor,Object:{}.constructor,Array:[].constructor,Function:function(){}.constructor},hax.util.getObjectType=function(a){var b=a.constructor;for(var c in hax.util.constructors)if(b==hax.util.constructors[c])return c;return"Unknown"},hax.util.deepJsonCopy=function(a){if(null===a)return null;if(void 0!==a)return JSON.parse(JSON.stringify(a))},hax.util.formatString=function(a,b){var c=arguments;return a.replace(/{(\d+)}/g,function(a,b){var d=Number(b)+1;return c[d]})},hax.util.readQueryField=function(a,b){var c=b?b:window.location.href,d=new RegExp("[?&]"+a+"=([^&#]*)","i"),e=d.exec(c);return e?e[1]:null},hax.Child={},hax.Child.init=function(a,b){this.name=a,this.generator=b,this.errors=[]},hax.Child.initOwner=function(a){this.owner=a,a.isParent?this.owner.addChild(this):a.isRootHolder&&this.owner.setRoot(this)},hax.Child.move=function(a,b){this.owner&&this.owner.isParent&&this.owner.removeChild(this),this.name=a,this.initOwner(b)},hax.Child.isChild=!0,hax.Child.getName=function(){return this.name},hax.Child.getFullName=function(){return this.owner?this.owner.getPossesionNameBase()+this.name:this.name},hax.Child.getDisplayName=function(){return this.name},hax.Child.getOwner=function(){return this.owner},hax.Child.getParent=function(){return this.owner&&this.owner.isParent?this.owner:null},hax.Child.getWorkspace=function(){return this.owner?this.owner.getWorkspace():null},hax.Child.getRoot=function(){for(var a=this;a;){var b=a.getOwner();if(!b)return null;if(!b.isParent)return a;a=b}return null},hax.Child.addError=function(a){this.errors.push(a)},hax.Child.addErrors=function(a){this.errors=this.errors.concat(a)},hax.Child.clearErrors=function(a){var b=[];if(null!=a)for(var c=0;c<this.errors.length;c++){var d=this.errors[c];d.type!=a&&b.push(d)}this.errors=b},hax.Child.hasError=function(){return this.errors.length>0},hax.Child.getErrors=function(){return this.errors},hax.Child.toJson=function(){var a={};if(a.name=this.name,a.type=this.generator.type,this.addToJson&&this.addToJson(a),this.getUpdateData){var b=this.getUpdateData();a.updateData=b}return a},hax.Child.onDeleteChild=function(){this.owner&&(this.owner.isParent?this.owner.removeChild(this):this.owner.isRootHolder&&this.owner.setRoot(null),this.owner=null)},hax.ContextHolder={},hax.ContextHolder.init=function(){this.contextManager=null},hax.ContextHolder.isContextHolder=!0,hax.ContextHolder.getContextManager=function(){return this.contextManager||(this.contextManager=this.createContextManager()),this.contextManager},hax.ContextHolder.setContextManager=function(a){this.contextManager=a},hax.DataHolder={},hax.DataHolder.init=function(){this.data=null,this.impactsList=[],this.dataSet=!1},hax.DataHolder.isDataHolder=!0,hax.DataHolder.clearDataSet=function(){this.dataSet=!1},hax.DataHolder.getDataSet=function(){return this.dataSet},hax.Child.getData=function(){return this.data},hax.DataHolder.getImpactsList=function(){return this.impactsList},hax.DataHolder.setData=function(a){this.data=a,this.dataSet=!0;var b=this.getParent();b&&b.updateData(this)},hax.DataHolder.addToImpactsList=function(a){if(a!==this)return this.impactsList.indexOf(a)===-1&&(this.impactsList.push(a),!0)},hax.DataHolder.removeFromImpactsList=function(a){for(var b=0;b<this.impactsList.length;b++)if(this.impactsList[b]==a)return void this.impactsList.splice(b,1)},hax.Dependent={},hax.Dependent.init=function(){this.dependsOnList=[],this.dependenciesSet=!0},hax.Dependent.isDependent=!0,hax.Dependent.getDependsOn=function(){return this.dependsOnList},hax.Dependent.getDependenciesSetFlag=function(){return this.dependenciesSet},hax.Dependent.setDependenciesSetFlag=function(a){this.dependenciesSet=a},hax.Dependent.initializeImpactors=function(){for(var a=[],b=0;b<this.dependsOnList.length;b++){var c=this.dependsOnList[b];c.needsCalculating()&&!c.getDataSet()&&c.calculate(),c.hasError()&&a.push(c)}a.length>0&&this.createDependencyError(a)},hax.Dependent.onDeleteDependent=function(){for(var a=0;a<this.dependsOnList.length;a++){var b=this.dependsOnList[a];b.removeFromImpactsList(this)}},hax.Dependent.updateDependencies=function(a){var b=!1;a||(a=[]);var c=this.dependsOnList;this.dependsOnList=[];var d,e,f={};for(e=0;e<a.length;e++)if(d=a[e],d.isDataHolder){this.dependsOnList.push(d);var g=d.addToImpactsList(this);g&&(b=!0),f[d.getFullName()]=!0}else;for(e=0;e<c.length;e++){d=c[e];var h=f[d.getFullName()];h||(d.removeFromImpactsList(this),b=!0)}return this.dependenciesSet=!0,b},hax.Dependent.createDependencyError=function(a){for(var b="Error in dependency: ",c=0;c<a.length;c++)c>0&&(b+=", "),b+=a[c].getFullName();var d=new hax.ActionError(b,"Calculation - Dependency",this);this.addError(d)},hax.Codeable={},hax.Codeable.init=function(a,b){this.argList=a,this.codeSet=!1,this.functionBody="",this.supplementalCode="",this.varInfo=null,this.dependencyInfo=null,this.contextSetter=null,this.objectFunction=null,this.codeErrors=[],this.calcInProgress=!1,this.dataSet=!1,this.functionInitialized=!1},hax.Codeable.isCodeable=!0,hax.Codeable.getArgList=function(){return this.argList},hax.Codeable.getFunctionBody=function(){return this.functionBody},hax.Codeable.getSupplementalCode=function(){return this.supplementalCode},hax.Codeable.setCodeInfo=function(a){if(this.argList=a.argList,this.functionBody=a.functionBody,this.supplementalCode=a.supplementalCode,this.varInfo=a.varInfo,a.errors&&0!==a.errors.length)this.codeErrors=a.errors;else try{a.generatorFunction(this),this.codeErrors=[]}catch(b){this.codeErrors.push(hax.ActionError.processException(b,"Codeable - Set Code",!1))}this.codeErrors.length>0&&(this.objectFunction=null,this.contextSetter=null),this.codeSet=!0,this.isDependent&&this.setDependenciesSetFlag(!1)},hax.Codeable.initializeDependencies=function(){if(this.hasCode()&&this.varInfo&&0===this.codeErrors.length)try{var a=hax.codeDependencies.getDependencyInfo(this.varInfo,this.getContextManager());this.updateDependencies(a)}catch(b){this.codeErrors.push(hax.ActionError.processException(b,"Codeable - Set Dependencies",!1))}else this.updateDependencies([])},hax.Codeable.updateDependeciesForModelChange=function(a){if(this.hasCode()&&this.varInfo){var b=hax.codeDependencies.getDependencyInfo(this.varInfo,this.getContextManager()),c=this.updateDependencies(b);c&&hax.calculation.addToRecalculateList(a,this)}},hax.Codeable.clearCode=function(){this.codeSet=!1,this.functionBody="",this.supplementalCode="",this.varInfo=null,this.dependencyInfo=null,this.contextSetter=null,this.objectFunction=null,this.codeErrors=[];var a=[];this.updateDependencies(a)},hax.Codeable.hasCode=function(){return this.codeSet},hax.Codeable.needsCalculating=function(){return this.codeSet&&this.getDependenciesSetFlag()},hax.Codeable.prepareForCalculate=function(){this.isDataHolder&&this.clearDataSet(),this.clearErrors(),this.functionInitialized=!1},hax.Codeable.calculate=function(){if(!(this.isDataHolder&&this.getDataSet()||this.hasError())){if(this.codeErrors.length>0)return void this.addErrors(this.codeErrors);if(!this.objectFunction||!this.contextSetter){var a="Function not found for member: "+this.getName(),b=new hax.ActionError(a,"Codeable - Calculate",this);return void this.addError(b)}try{this.processObjectFunction(this.objectFunction)}catch(c){c.stack&&console.error(c.stack);var d=c.message?c.message:"Unknown error",b=new hax.ActionError(d,"Codeable - Calculate",this);b.setParentException(c),this.addError(b)}}},hax.Codeable.initFunction=function(){if(!this.functionInitialized){if(this.calcInProgress){var a="Circular reference error",b=new hax.ActionError(a,"Codeable - Calculate",this);return this.addError(b),void(this.calcInProgress=!1)}this.calcInProgress=!0;try{if(this.initializeImpactors(),this.hasError())return void(this.calcInProgress=!1);this.contextSetter(this.getContextManager())}catch(c){c.stack&&console.error(c.stack);var a=c.message?c.message:"Unknown error",b=new hax.ActionError(a,"Codeable - Calculate",this);b.setParentException(c),this.addError(b)}this.calcInProgress=!1,this.functionInitialized=!0}},hax.Codeable.getUpdateData=function(){var a={};return this.hasCode()?(a.argList=this.getArgList(),a.functionBody=this.getFunctionBody(),a.supplementalCode=this.getSupplementalCode()):a.data=this.getData(),a},hax.Codeable.createContextManager=function(){return new hax.ContextManager(this)},hax.Codeable.setObjectFunction=function(a){this.objectFunction=a},hax.Codeable.setContextSetter=function(a){this.contextSetter=a},hax.Owner={},hax.Owner.init=function(){},hax.Owner.isOwner=!0,hax.Parent={},hax.Parent.init=function(){},hax.Parent.isParent=!0,hax.Parent.isRoot=function(){return null==this.getParent()},hax.Parent.lookupChildFromPath=function(a){for(var b=this,c=0;b&&c<a.length&&b.isParent;c++)b=b.lookupChild(a[c]);return b},hax.Parent.createContextManager=function(){var a=new hax.ContextManager(this),b={};return b.isLocal=!this.isRoot(),b.parent=this,a.addToContextList(b),a},hax.Parent.getPossesionNameBase=function(){return this.isRoot()?this.owner?this.owner.getPossesionNameBase():this.getName()+":":this.getFullName()+"."},hax.Parent.getFullName=function(){return this.isRoot()?this.owner?this.owner.getPossesionNameBase():this.getName()+":":hax.Child.getFullName.call(this)},hax.RootHolder={},hax.RootHolder.init=function(){},hax.RootHolder.isRootHolder=!0,hax.Workspace=function(a,b,c){hax.EventManager.init.call(this),hax.ContextHolder.init.call(this),hax.Owner.init.call(this),hax.RootHolder.init.call(this),void 0===c&&(c=null),this.owner=c;var d=hax.util.getObjectType(a);"String"===d?(this.name=a,this.rootFolder=new hax.Folder(a,this)):this.loadFromJson(a,b)},hax.base.mixin(hax.Workspace,hax.EventManager),hax.base.mixin(hax.Workspace,hax.ContextHolder),hax.base.mixin(hax.Workspace,hax.Owner),hax.base.mixin(hax.Workspace,hax.RootHolder),hax.Workspace.prototype.getName=function(){return this.name},hax.Workspace.prototype.getRoot=function(){return this.rootFolder},hax.Workspace.prototype.setRoot=function(a){this.rootFolder=a},hax.Workspace.prototype.getOwner=function(){return this.owner},hax.Workspace.prototype.updateDependeciesForModelChange=function(a){this.rootFolder&&this.rootFolder.updateDependeciesForModelChange(a)},hax.Workspace.prototype.close=function(){},hax.Workspace.prototype.getWorkspace=function(){return this},hax.Workspace.prototype.getPossesionNameBase=function(){return this.name+":"},hax.Workspace.prototype.createContextManager=function(){var a=new hax.ContextManager(this),b={};return b.isLocal=!1,b.data=__globals__,a.addToContextList(b),a},hax.Workspace.createVirtualWorkpaceFromFolder=function(a,b,c){var d={};return d.name=a,d.fileType=hax.Workspace.SAVE_FILE_TYPE,d.version=hax.Workspace.SAVE_FILE_VERSION,d.data=b.toJson(),new hax.Workspace(d,null,c)},hax.Workspace.SAVE_FILE_TYPE="hax workspace",hax.Workspace.SAVE_FILE_VERSION=.2,hax.Workspace.prototype.toJson=function(){var a={};return a.name=this.name,a.fileType=hax.Workspace.SAVE_FILE_TYPE,a.version=hax.Workspace.SAVE_FILE_VERSION,a.data=this.rootFolder.toJson(),a},hax.Workspace.prototype.loadFromJson=function(a,b){var c=a.fileType;if(c!==hax.Workspace.SAVE_FILE_TYPE)throw hax.base.createError("Bad file format.",!1);if(a.version!==hax.Workspace.SAVE_FILE_VERSION)throw hax.base.createError("Incorrect file version. CHECK HAXAPP.COM FOR VERSION CONVERTER.",!1);return this.name=a.name,b||(b=new hax.ActionResponse),hax.createmember.createMember(this,a.data,b),b},hax.Workspace.memberGenerators={},hax.Workspace.getMemberGenerator=function(a){return hax.Workspace.memberGenerators[a]},hax.Workspace.addMemberGenerator=function(a){hax.Workspace.memberGenerators[a.type]=a},hax.JsonTable=function(a,b,c){hax.Child.init.call(this,a,hax.JsonTable.generator),hax.DataHolder.init.call(this),hax.Dependent.init.call(this),hax.ContextHolder.init.call(this),hax.Codeable.init.call(this,[],!0),this.initOwner(b),c||(c={},c.data=""),hax.updatemember.applyCodeOrData(this,c)},hax.base.mixin(hax.JsonTable,hax.Child),hax.base.mixin(hax.JsonTable,hax.DataHolder),hax.base.mixin(hax.JsonTable,hax.Dependent),hax.base.mixin(hax.JsonTable,hax.ContextHolder),hax.base.mixin(hax.JsonTable,hax.Codeable),hax.JsonTable.prototype.setData=function(a){return hax.base.deepFreeze(a),hax.DataHolder.setData.call(this,a)},hax.JsonTable.prototype.processObjectFunction=function(a){var b=a();this.setData(b)},hax.JsonTable.fromJson=function(a,b,c){return new hax.JsonTable(b.name,a,b.updateData)},hax.JsonTable.generator={},hax.JsonTable.generator.displayName="Table",hax.JsonTable.generator.type="hax.JsonTable",hax.JsonTable.generator.createMember=hax.JsonTable.fromJson,hax.Workspace.addMemberGenerator(hax.JsonTable.generator),hax.FunctionTable=function(a,b,c){hax.Child.init.call(this,a,hax.FunctionTable.generator),hax.DataHolder.init.call(this),hax.Dependent.init.call(this),hax.ContextHolder.init.call(this),hax.Codeable.init.call(this,d,!1),this.initOwner(b);var d=c.argList?c.argList:[],e=c.functionBody?c.functionBody:"",f=c.supplementalCode?c.supplementalCode:"";hax.updatemember.applyCode(this,d,e,f)},hax.base.mixin(hax.FunctionTable,hax.Child),hax.base.mixin(hax.FunctionTable,hax.DataHolder),hax.base.mixin(hax.FunctionTable,hax.Dependent),hax.base.mixin(hax.FunctionTable,hax.ContextHolder),hax.base.mixin(hax.FunctionTable,hax.Codeable),hax.FunctionTable.prototype.processObjectFunction=function(a){this.setData(a)},hax.FunctionTable.prototype.getDisplayName=function(){var a=this.getName(),b=this.getArgList(),c=b.join(",");return a+"("+c+")"},hax.FunctionTable.fromJson=function(a,b,c){return new hax.FunctionTable(b.name,a,b.updateData)},hax.FunctionTable.generator={},hax.FunctionTable.generator.displayName="Function",hax.FunctionTable.generator.type="hax.FunctionTable",hax.FunctionTable.generator.createMember=hax.FunctionTable.fromJson,hax.Workspace.addMemberGenerator(hax.FunctionTable.generator),hax.Control=function(a,b,c){hax.Child.init.call(this,a,hax.Control.generator),hax.Dependent.init.call(this),hax.ContextHolder.init.call(this),hax.Codeable.init.call(this,["resource"],!0),this.initOwner(b),this.resource=null,c||(c={});var d=c.argList?c.argList:["resource"],e=c.functionBody?c.functionBody:"",f=c.supplementalCode?c.supplementalCode:"";hax.updatemember.applyCode(this,d,e,f)},hax.base.mixin(hax.Control,hax.Child),hax.base.mixin(hax.Control,hax.Dependent),hax.base.mixin(hax.Control,hax.ContextHolder),hax.base.mixin(hax.Control,hax.Codeable),hax.Control.prototype.getResource=function(){return this.resource},hax.Control.prototype.updateResource=function(a){this.resource=a,this.needsCalculating()&&this.calculate()},hax.Control.prototype.processObjectFunction=function(a){this.resource&&a(this.resource)},hax.Control.fromJson=function(a,b,c){return new hax.Control(b.name,a,b.updateData)},hax.Control.generator={},hax.Control.generator.displayName="Control",hax.Control.generator.type="hax.Control",hax.Control.generator.createMember=hax.Control.fromJson,hax.Workspace.addMemberGenerator(hax.Control.generator),hax.Folder=function(a,b){hax.Child.init.call(this,a,hax.Folder.generator),hax.DataHolder.init.call(this),hax.Dependent.init.call(this),hax.ContextHolder.init.call(this),hax.Owner.init.call(this),hax.Parent.init.call(this),this.initOwner(b),this.childMap={},this.dataMap={},Object.freeze(this.dataMap),this.setData(this.dataMap)},hax.base.mixin(hax.Folder,hax.Child),hax.base.mixin(hax.Folder,hax.DataHolder),hax.base.mixin(hax.Folder,hax.Dependent),hax.base.mixin(hax.Folder,hax.ContextHolder),hax.base.mixin(hax.Folder,hax.Owner),hax.base.mixin(hax.Folder,hax.Parent),hax.Folder.prototype.getChildMap=function(){return this.childMap},hax.Folder.prototype.lookupChild=function(a){return this.childMap[a]},hax.Folder.prototype.addChild=function(a){var b=a.getName();if(this.childMap[b])throw hax.base.createError("There is already an object with the given name.",!1);if(this.childMap[b]=a,a.isDataHolder){var c=a.getData();void 0!==c&&this.spliceDataMap(b,c)}this.calculateDependents()},hax.Folder.prototype.removeChild=function(a){var b=a.getParent();if(b&&b===this){var c=a.getName();delete this.childMap[c],a.isDataHolder&&this.spliceDataMap(c),this.calculateDependents()}},hax.Folder.prototype.updateData=function(a){if(a.isDataHolder){var b=a.getName(),c=a.getData();return void 0===this.childMap[b]?void alert("Error - this table "+b+" has not yet been added to the folder."):void this.spliceDataMap(b,c)}},hax.Folder.prototype.needsCalculating=function(){return!1},hax.Folder.prototype.calculate=function(){},hax.Folder.prototype.updateDependeciesForModelChange=function(a){for(var b in this.childMap){var c=this.childMap[b];c.isDependent&&c.updateDependeciesForModelChange(a)}},hax.Folder.fromJson=function(a,b,c){var d=new hax.Folder(b.name,a);for(var e in b.children){var f=b.children[e];c.push(f)}return d},hax.Folder.prototype.addToJson=function(a){a.children={};for(var b in this.childMap){var c=this.childMap[b];a.children[b]=c.toJson()}},hax.Folder.prototype.calculateDependents=function(){var a=[];for(var b in this.childMap){var c=this.childMap[b];c.isDataHolder&&a.push(c)}this.updateDependencies(a)},hax.Folder.prototype.spliceDataMap=function(a,b){var c={};for(var d in this.dataMap)d!==a&&(c[d]=this.dataMap[d]);void 0!==b&&(c[a]=b),Object.freeze(c),this.dataMap=c,this.setData(this.dataMap)},hax.Folder.generator={},hax.Folder.generator.displayName="Folder",hax.Folder.generator.type="hax.Folder",hax.Folder.generator.createMember=hax.Folder.fromJson,hax.Workspace.addMemberGenerator(hax.Folder.generator),hax.FolderFunction=function(a,b,c,d){if(hax.Child.init.call(this,a,hax.FolderFunction.generator),hax.DataHolder.init.call(this),hax.Dependent.init.call(this),hax.ContextHolder.init.call(this),hax.Owner.init.call(this),hax.RootHolder.init.call(this),this.initOwner(b),this.argList=void 0!==c.argList?c.argList:"",this.returnValueString=void 0!==c.returnValue?c.returnValue:[],this.setData(function(){}),d){var e=new hax.Folder(a,this);this.setRoot(e)}},hax.base.mixin(hax.FolderFunction,hax.Child),hax.base.mixin(hax.FolderFunction,hax.DataHolder),hax.base.mixin(hax.FolderFunction,hax.Dependent),hax.base.mixin(hax.FolderFunction,hax.ContextHolder),hax.base.mixin(hax.FolderFunction,hax.Owner),hax.base.mixin(hax.FolderFunction,hax.RootHolder),hax.FolderFunction.prototype.getInternalFolder=function(){return this.internalFolder},hax.FolderFunction.prototype.getRoot=function(){return this.getInternalFolder()},hax.FolderFunction.prototype.setRoot=function(a){this.internalFolder=a;var b=[a];this.updateDependencies(b)},hax.FolderFunction.prototype.getReturnValueString=function(){return this.returnValueString},hax.FolderFunction.prototype.getArgList=function(){return this.argList},hax.FolderFunction.prototype.getDisplayName=function(){var a=this.getName(),b=this.getArgList(),c=b.join(","),d=a+"("+c+")";return null!=this.returnValueString&&this.returnValueString.length>0&&(d+=" = "+this.returnValueString),d},hax.FolderFunction.prototype.onDelete=function(){var a;if(this.internalFolder){var b=hax.deletemember.deleteMember(this.internalFolder);if(!b.getSuccess()){var c=b.getErrorMsg();alert(c)}}return a=hax.Child.onDelete.call(this)},hax.FolderFunction.fromJson=function(a,b,c){var d={};d.argList=b.argList,d.returnValue=b.returnValue;var e;return b.internalFolder?(c.push(b.internalFolder),e=!1):e=!0,new hax.FolderFunction(b.name,a,d,e);
},hax.FolderFunction.prototype.addToJson=function(a){a.argList=this.argList,a.returnValue=this.returnValueString,a.internalFolder=this.internalFolder.toJson()},hax.FolderFunction.prototype.needsCalculating=function(){return!0},hax.FolderFunction.prototype.prepareForCalculate=function(){this.clearDataSet()},hax.FolderFunction.prototype.calculate=function(){var a=[],b=this.getFolderFunctionFunction(a);0==a.length?this.setData(b):this.addErrors(a),this.initializeImpactors()},hax.FolderFunction.prototype.updateDependeciesForModelChange=function(a){this.internalFolder&&this.internalFolder.updateDependeciesForModelChange(a)},hax.FolderFunction.prototype.createContextManager=function(){return new hax.ContextManager(this)},hax.FolderFunction.prototype.getPossesionNameBase=function(){return this.getFullName()+":"},hax.FolderFunction.prototype.setReturnValueString=function(a){this.returnValueString=a},hax.FolderFunction.prototype.setArgList=function(a){this.argList=a},hax.FolderFunction.prototype.getFolderFunctionFunction=function(a){var b,c,d,e,f=!1,g=this,h=function(h){if(!f){if(b=g.createVirtualWorkspace(a),!b)return null;c=b.getRoot(),d=g.loadInputElements(c,a),e=g.loadOutputElement(c,a)}for(var i=[],j=0;j<d.length;j++){var k={};k.member=d[j],k.data=arguments[j],i.push(k)}var l=hax.updatemember.updateObjects(i);if(l.getSuccess())return e?e.getData():void 0;throw hax.base.createError(l.getErrorMsg())};return h},hax.FolderFunction.prototype.createVirtualWorkspace=function(a){try{return hax.Workspace.createVirtualWorkpaceFromFolder("temp",this.internalFolder,this.getOwner())}catch(b){var c=hax.ActionError.processException(exception,"FolderFunction - Code",!1);return a.push(c),null}},hax.FolderFunction.prototype.loadInputElements=function(a,b){for(var c=[],d=0;d<this.argList.length;d++){var e=this.argList[d],f=a.lookupChild(e);f&&c.push(f)}return c},hax.FolderFunction.prototype.loadOutputElement=function(a,b){var c=a.lookupChild(this.returnValueString);return c},hax.FolderFunction.generator={},hax.FolderFunction.generator.displayName="Folder Function",hax.FolderFunction.generator.type="hax.FolderFunction",hax.FolderFunction.generator.createMember=hax.FolderFunction.fromJson,hax.Workspace.addMemberGenerator(hax.FolderFunction.generator),hax.createmember={},hax.createmember.MEMBER_CREATED_EVENT="memberCreated",hax.createmember.fireCreatedEvent=function(a){var b=a.getWorkspace();b.dispatchEvent(hax.createmember.MEMBER_CREATED_EVENT,a)},hax.createmember.fireCreatedEventList=function(a){for(var b=0;b<a.length;b++)hax.createmember.fireCreatedEvent(a[b])},hax.createmember.createMember=function(a,b,c){var d=c?c:new hax.ActionResponse;try{var e=[],f=[],g=hax.createmember.instantiateMember(a,b,f,d);d.member=g;var h=g.getWorkspace();h.updateDependeciesForModelChange(e),hax.calculation.callRecalculateList(e,d);var i=hax.base.getListInFirstButNotSecond(e,f);hax.createmember.fireCreatedEventList(f),hax.updatemember.fireUpdatedEventList(i)}catch(j){var k=hax.ActionError.processException(j,"AppException",!0);d.addError(k)}return d},hax.createmember.instantiateMember=function(a,b,c,d){var e=hax.Workspace.getMemberGenerator(b.type);if(!e){var f="Member type not found: "+b.type,g=new hax.ActionError(f,"Model",null);return d.addError(g),null}var h=[],i=e.createMember(a,b,h);c.push(i);for(var j=0;j<h.length;j++){var k=h[j];hax.createmember.instantiateMember(i,k,c,d)}return i},hax.updatemember={},hax.updatemember.MEMBER_UPDATED_EVENT="memberUpdated",hax.updatemember.CODE_APPLIED=0,hax.updatemember.DATA_APPLIED=1,hax.updatemember.fireUpdatedEvent=function(a){var b=a.getWorkspace();b.dispatchEvent(hax.updatemember.MEMBER_UPDATED_EVENT,a)},hax.updatemember.fireUpdatedEventList=function(a){for(var b=0;b<a.length;b++)hax.updatemember.fireUpdatedEvent(a[b])},hax.updatemember.updateCode=function(a,b,c,d,e){var f=e?e:new hax.ActionResponse;try{var g=[];hax.updatemember.applyCode(a,b,c,d,g),a.initializeDependencies(),hax.calculation.addToRecalculateList(g,a),hax.calculation.callRecalculateList(g,f),hax.updatemember.fireUpdatedEventList(g)}catch(h){var i=hax.ActionError.processException(h,"AppException",!0);f.addError(i)}return f},hax.updatemember.updateData=function(a,b,c){var d=c?c:new hax.ActionResponse;try{var e=[];hax.updatemember.applyData(a,b,e),hax.calculation.addToRecalculateList(e,a),hax.calculation.callRecalculateList(e,d),hax.updatemember.fireUpdatedEvent(a),hax.updatemember.fireUpdatedEventList(e)}catch(f){var g=hax.ActionError.processException(f,"AppException",!0);d.addError(g)}return d},hax.updatemember.updateObjects=function(a,b){var c=b?b:new hax.ActionResponse;try{for(var d=[],e=[],f=0;f<a.length;f++){var g=a[f],h=g.member,i=hax.updatemember.applyCodeOrData(h,g);i===hax.updatemember.CODE_APPLIED?h.initializeDependencies():e.push(h),hax.calculation.addToRecalculateList(d,h)}hax.calculation.callRecalculateList(d,c),hax.updatemember.fireUpdatedEventList(e),hax.updatemember.fireUpdatedEventList(d)}catch(j){var k=hax.ActionError.processException(j,"AppException",!0);c.addError(k)}return c},hax.updatemember.applyCodeOrData=function(a,b){var c=b.data,d=b.argList,e=b.functionBody,f=b.supplementalCode;return void 0!==e?(hax.updatemember.applyCode(a,d,e,f),hax.updatemember.CODE_APPLIED):void 0!==c?(hax.updatemember.applyData(a,c),hax.updatemember.DATA_APPLIED):void 0},hax.updatemember.applyCode=function(a,b,c,d){var e={};e.argList=b,e.functionBody=c,e.supplementalCode=d;var f=a.getFullName();hax.codeCompiler.processCode(e,f),a.setCodeInfo(e)},hax.updatemember.applyData=function(a,b){a.clearErrors(),a.isCodeable&&a.clearCode(),a.setData(b)},hax.updatefolderFunction={},hax.updatefolderFunction.updatePropertyValues=function(a,b,c,d){a.setArgList(b),a.setReturnValueString(c),hax.calculation.addToRecalculateList(d,a)},hax.movemember={},hax.movemember.MEMBER_MOVED_EVENT="memberMoved",hax.movemember.fireMovedEventList=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=e.getWorkspace(),g={};g.member=e,g.oldFullName=b[d],g.newFullName=c[d],f.dispatchEvent(hax.movemember.MEMBER_MOVED_EVENT,g)}},hax.movemember.moveMember=function(a,b,c,d){var e=[];hax.movemember.loadMovedList(a,e);var f=hax.movemember.getNameList(e);a.move(b,c);var g=hax.movemember.getNameList(e),h=a.getWorkspace();h.updateDependeciesForModelChange(d);var i=hax.base.getListInFirstButNotSecond(d,e);hax.movemember.fireMovedEventList(e,f,g),hax.updatemember.fireUpdatedEventList(i)},hax.movemember.loadMovedList=function(a,b){if(b.push(a),a.isParent){var c=a.getChildMap();for(var d in c){var e=c[d];hax.movemember.loadMovedList(e,b)}}else if(a.isRootHolder){var f=a.getRoot();hax.movemember.loadMovedList(f,b)}},hax.movemember.getNameList=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c].getFullName();return b},hax.deletemember={},hax.deletemember.MEMBER_DELETED_EVENT="memberDeleted",hax.deletemember.fireDeletedEventList=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.workspace;d.dispatchEvent(hax.deletemember.MEMBER_DELETED_EVENT,c)}},hax.deletemember.deleteMember=function(a,b){var c=b?b:new hax.ActionResponse;try{var d=[],e=[],f=a.getWorkspace();hax.deletemember.fillDeleteInfoList(a,e);for(var g=0;g<e.length;g++){var h=e[g],a=h.member;a.onDeleteChild(),a.isDependent&&a.onDeleteDependent()}f.updateDependeciesForModelChange(d),hax.calculation.callRecalculateList(d,c),hax.deletemember.fireDeletedEventList(e),hax.updatemember.fireUpdatedEventList(d)}catch(i){var j=hax.ActionError.processException(i,"AppException",!0);c.addError(j)}return c},hax.deletemember.fillDeleteInfoList=function(a,b){var c={};if(c.member=a,c.workspace=a.getWorkspace(),c.fullName=a.getFullName(),b.push(c),a.isParent){var d=a.getChildMap();for(var e in d){var f=d[e];hax.deletemember.fillDeleteInfoList(f,b)}}else if(a.isRootHolder){var g=a.getRoot();hax.deletemember.fillDeleteInfoList(g,b)}};