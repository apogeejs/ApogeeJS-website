/*! hax-lib-electron 08-11-2016 */
var __globals__=window;hax={},hax.core={},hax.core.EventManager={},hax.core.EventManager.init=function(){this.listenerTable={},this.handlerTable={}},hax.core.EventManager.addListener=function(a,b){var c=this.listenerTable[a];c||(c=[],this.listenerTable[a]=c);for(var d=0;d<c.length;d++){var e=c[d];if(e==b)return}c.push(b)},hax.core.EventManager.removeListener=function(a,b){var c=this.listenerTable[a];if(c){var d=c.indexOf(b);d>=0&&c.splice(d,1)}},hax.core.EventManager.dispatchEvent=function(a,b){var c=this.listenerTable[a];if(c)for(var d=0;d<c.length;d++){var e=c[d];e.call(null,b)}},hax.core.EventManager.addHandler=function(a,b){this.handlerTable[a]=b},hax.core.EventManager.removeHandler=function(a){delete this.handlerTable[a]},hax.core.EventManager.callHandler=function(a,b){var c=this.handlerTable[a];if(c)return c(b);throw"Handler not found: "+a},hax.core.ContextManager=function(a){this.member=a,this.contextList=[]},hax.core.ContextManager.prototype.addToContextList=function(a){this.contextList.push(a)},hax.core.ContextManager.prototype.removeFromContextList=function(a){var b=this.contextList.indexOf(a);b>=0&&this.contextList.splice(b,1)},hax.core.ContextManager.prototype.clearContextList=function(){this.contextList=[]},hax.core.ContextManager.prototype.getBaseData=function(a,b){return this.hierarchicalLookup("lookupData",a,b)},hax.core.ContextManager.prototype.getImpactor=function(a,b){return this.hierarchicalLookup("lookupImpactor",a,b)},hax.core.ContextManager.prototype.hierarchicalLookup=function(a,b,c){void 0===c&&(c=0);var d=this.lookup(a,b,c);if(void 0!==d)return d;if(this.member&&this.member.getOwner){var e=this.member.getOwner();if(e){var f=e.getContextManager();return f.hierarchicalLookup(a,b,c+1)}}},hax.core.ContextManager.prototype.lookup=function(a,b,c){for(var d=0;d<this.contextList.length;d++){var e=this.contextList[d];if(!(e.isLocal&&c>1)){var f=this[a](e,b);if(void 0!==f)return f}}},hax.core.ContextManager.prototype.lookupData=function(a,b){if(a.parent){var c=a.parent.lookupChild(b);return c?c.getData():void 0}if(a.data)return a.data[b]},hax.core.ContextManager.prototype.lookupImpactor=function(a,b){return a.parent?a.parent.lookupChildFromPath(b):void 0},hax.core.codeCompiler={},hax.core.codeCompiler.processCode=function(a,b){var c=hax.core.codeCompiler.createCombinedFunctionBody(a.argList,a.functionBody,a.supplementalCode,b),d=hax.core.codeAnalysis.analyzeCode(c);if(!d.success)return a.errors=d.errors,a;a.varInfo=d.varInfo;var e=hax.core.codeCompiler.createObjectFunction(a.varInfo,c);return a.generatorFunction=e,a},hax.core.codeCompiler.createCombinedFunctionBody=function(a,b,c,d){var e=a.join(","),f=hax.core.util.formatString(hax.core.codeCompiler.OBJECT_FUNCTION_FORMAT_TEXT,d,e,b,c);return f},hax.core.codeCompiler.createObjectFunction=function(a,b){var c="",d="";for(var e in a)if("__dh__"!=e){var f=a[e];"returnValue"===e||f.isLocal||(c+="var "+e+";\n",d+=e+' = contextManager.getBaseData("'+e+'");\n')}var g=hax.core.util.formatString(hax.core.codeCompiler.GENERATOR_FUNCTION_FORMAT_TEXT,c,d,b),h=new Function("__dh__",g);return h},hax.core.codeCompiler.OBJECT_FUNCTION_FORMAT_TEXT=["//{0}","","//supplemental code","{3}","//end supplemental code","","//member function","__dh__.setObjectFunction(function({1}) {","//overhead code","__dh__.initFunction();","","//user code","{2}","});","//end member function",""].join("\n"),hax.core.codeCompiler.GENERATOR_FUNCTION_FORMAT_TEXT=["'use strict'","//declare context variables","{0}","","//context setter","__dh__.setContextSetter(function(contextManager) {","{1}","});","","//user code","{2}"].join("\n"),hax.core.codeAnalysis={},hax.core.codeAnalysis.syntax={AssignmentExpression:[{name:"left",modified:!0},{name:"right"}],ArrayExpression:[{name:"elements",list:!0}],ArrowFunctionExpression:[{name:"params",list:!0},{name:"body"},{name:"defaults",list:!0}],BlockStatement:[{name:"body",list:!0}],BinaryExpression:[{name:"left"},{name:"right"}],BreakStatement:[],CallExpression:[{name:"callee"},{name:"arguments",list:!0}],CatchClause:[{name:"param",declaration:!0},{name:"body"}],ConditionalExpression:[{name:"test"},{name:"alternate"},{name:"consequent"}],ContinueStatement:[],DoWhileStatement:[{name:"body"},{name:"test",list:!0}],EmptyStatement:[],ExpressionStatement:[{name:"expression"}],ForStatement:[{name:"init"},{name:"test"},{name:"update",list:!0},{name:"body"}],ForOfStatement:[{name:"left"},{name:"right"},{name:"body"}],ForInStatement:[{name:"left"},{name:"right"},{name:"body"}],FunctionDeclaration:[{name:"id",declaration:!0},{name:"params",list:!0,declaration:!0},{name:"body"}],FunctionExpression:[{name:"id",declaration:!0},{name:"params",list:!0,declaration:!0},{name:"body"}],Identifier:[],IfStatement:[{name:"test"},{name:"consequent"},{name:"alternate"}],Literal:[],LabeledStatement:[{name:"body"}],LogicalExpression:[{name:"left"},{name:"right"}],MemberExpression:[],NewExpression:[{name:"callee"},{name:"arguments",list:!0}],Program:[{name:"body",list:!0}],Property:[],ReturnStatement:[{name:"argument"}],SequenceExpression:[{name:"expressions",list:!0}],ObjectExpression:[],SwitchCase:[{name:"test"},{name:"consequent",list:!0}],SwitchStatement:[{name:"discriminant"},{name:"cases",list:!0}],ThisExpression:[],ThrowStatement:[{name:"argument"}],TryStatement:[{name:"block",list:!0},{name:"handler"},{name:"finalizer",list:!0}],UnaryExpression:[{name:"argument"}],UpdateExpression:[{identifierNode:"argument",modified:!0}],VariableDeclaration:[{name:"declarations",list:!0,declaration:!0}],VariableDeclarator:[{name:"id",declaration:!0},{name:"init"}],WhileStatement:[{name:"body"},{name:"test",list:!0}],WithStatement:[{name:"object"},{name:"body"}],YieldExpression:[{name:"argument"}],ArrayPattern:null,AssignmentPattern:null,ClassBody:null,ClassDeclaration:null,ClassExpression:null,DebuggerStatement:null,ExportAllDeclaration:null,ExportDefaultDeclaration:null,ExportNamedDeclaration:null,ExportSpecifier:null,ImportDeclaration:null,ImportDefaultSpecifier:null,ImportNamespaceSpecifier:null,ImportSpecifier:null,MetaProperty:null,MethodDefinition:null,ObjectPattern:null,RestElement:null,SpreadElement:null,Super:null,TaggedTemplateExpression:null,TemplateElement:null,TemplateLiteral:null},hax.core.codeAnalysis.analyzeCode=function(a){var b,c={};try{if(b=esprima.parse(a,{tolerant:!0,loc:!0}),b.errors&&b.errors.length>0){c.success=!1,c.errors=[];for(var d=0;d<b.errors.length;d++){var e=b.errors[d],f=new hax.core.ActionError(e.description,"Analyze - Code");f.setParentException(e),c.errors.push(f)}}}catch(g){var f=hax.core.ActionError.processException(g,"Analyze - Code",!1);return c.success=!1,c.errors=[],c.errors.push(f),c}var h=hax.core.codeAnalysis.getVariableInfo(b);return c.success=!0,c.varInfo=h,c},hax.core.codeAnalysis.getVariableInfo=function(a){var b={};b.nameTable={},b.scopeTable={};var c=hax.core.codeAnalysis.startScope(b);return hax.core.codeAnalysis.processTreeNode(b,a,!1,!1),hax.core.codeAnalysis.endScope(b,c),hax.core.codeAnalysis.markLocalVariables(b),b.nameTable},hax.core.codeAnalysis.startScope=function(a){void 0===a.scopeIdGenerator&&(a.scopeIdGenerator=0);var b={};b.id=String(a.scopeIdGenerator++),b.parent=a.currentScope,b.localVariables={},a.scopeTable[b.id]=b,a.currentScope=b},hax.core.codeAnalysis.endScope=function(a){var b=a.currentScope;b&&(a.currentScope=b.parent)},hax.core.codeAnalysis.processTreeNode=function(a,b,c,d){if("Identifier"==b.type||"MemberExpression"==b.type)hax.core.codeAnalysis.processVariable(a,b,c,d);else if("FunctionDeclaration"==b.type||"FunctionExpression"==b.type)hax.core.codeAnalysis.processFunction(a,b);else{if("NewExpression"===b.type&&"Function"===b.callee.type)throw hax.core.codeAnalysis.createParsingError("Function constructor not currently supported!",b.loc);hax.core.codeAnalysis.processGenericNode(a,b)}},hax.core.codeAnalysis.processGenericNode=function(a,b){var c=hax.core.codeAnalysis.syntax[b.type];if(void 0===c)throw hax.core.codeAnalysis.createParsingError("Syntax Tree Node not found: "+b.type,b.loc);if(null===c)throw hax.core.codeAnalysis.createParsingError("Syntax node not supported: "+b.type,b.loc);for(var d=0;d<c.length;d++){var e=c[d],f=b[e.name];if(f)if(e.list)for(var g=0;g<f.length;g++)hax.core.codeAnalysis.processTreeNode(a,f[g],e.modified,e.declaration);else hax.core.codeAnalysis.processTreeNode(a,f,e.modified,e.declaration)}},hax.core.codeAnalysis.processFunction=function(a,b){var c=b.type,d=b.id,e=b.params,f=b.body;"FunctionDeclaration"===c&&d&&hax.core.codeAnalysis.processTreeNode(a,d,!1,!0);var g=hax.core.codeAnalysis.startScope(a);"FunctionExpression"===c&&d&&hax.core.codeAnalysis.processTreeNode(a,d,!1,!0);for(var h=0;h<e.length;h++)hax.core.codeAnalysis.processTreeNode(a,e[h],!1,!0);hax.core.codeAnalysis.processTreeNode(a,f,!1,!1),hax.core.codeAnalysis.endScope(a,g)},hax.core.codeAnalysis.processVariable=function(a,b,c,d){var e=this.getVariableDotPath(a,b),f=e[0],g=a.nameTable[f];g||(g={},g.name=f,g.uses=[],a.nameTable[f]=g);var h={};if(h.path=e,h.scope=a.currentScope,h.node=b,h.isModified=c,g.uses.push(h),d){var i=a.currentScope.localVariables;i[f]||(i[f]=!0)}},hax.core.codeAnalysis.getVariableDotPath=function(a,b){if("Identifier"==b.type)return[b.name];if("MemberExpression"==b.type){var c=this.getVariableDotPath(a,b.object);return b.computed?this.processTreeNode(a,b.property,!1,!1):c.push(b.property.name),c}throw this.createParsingError("Unknown application error: expected a variable identifier node.",b.loc)},hax.core.codeAnalysis.markLocalVariables=function(a){for(var b in a.nameTable){for(var c=a.nameTable[b],d=c.name,e=!1,f=0;f<c.uses.length;f++){for(var g=c.uses[f],h=g.scope,i=null,j=h;j;j=j.parent)if(j.localVariables[d]){i=j;break}i?(g.isLocal=!0,g.declarationScope=i):e=!0}e||(c.isLocal=!0)}},hax.core.codeAnalysis.createParsingError=function(a,b){var c=hax.core.util.createError(a,!1);return b&&(c.lineNumber=b.start.line,c.column=b.start.column),c},hax.core.codeDependencies={},hax.core.codeDependencies.getDependencyInfo=function(a,b){var c=[],d={};for(var e in a)for(var f=a[e],g=0;g<f.uses.length;g++){var h=f.uses[g];if(!h.isLocal){var i=h.path,j=b.getImpactor(i);if(j){var k=j.getFullName();d[k]||(c.push(j),d[k]=!0)}}}return c},hax.core.calculation={},hax.core.calculation.addToRecalculateList=function(a,b){if(!(a.indexOf(b)>=0)&&(b.isDependent&&b.needsCalculating()&&(a.push(b),b.prepareForCalculate()),b.isDataHolder))for(var c=b.getImpactsList(),d=0;d<c.length;d++)hax.core.calculation.addToRecalculateList(a,c[d])},hax.core.calculation.callRecalculateList=function(a,b){var c,d,e=!0;for(d=0;d<a.length;d++)if(c=a[d],c.calculate(),c.hasError()){var f=c.getErrors();if(f)for(var g=0;g<f.length;g++)b.addError(f[g]);e=!1}return e},hax.core.util={},hax.core.util.createError=function(a,b,c){var d=new Error(a);return void 0!==b&&(d.isFatal=b),void 0!==c&&(d.baseError=c),d},hax.core.util.mixin=function(a,b){for(var c in b)a.prototype[c]=b[c]},hax.core.util.stringHash=function(a){for(var b,c=4294967295,d=0,e=0;e<a.length;e++)b=a.charCodeAt(e),d=31*d+b&c;return d},hax.core.util.objectHash=function(a){var b=JSON.stringify(a);return stringHash(b)},hax.core.util.constructors={String:"".constructor,Number:3..constructor,Boolean:(!0).constructor,Date:(new Date).constructor,Object:{}.constructor,Array:[].constructor,Function:function(){}.constructor},hax.core.util.getObjectType=function(a){var b=a.constructor;for(var c in hax.core.util.constructors)if(b==hax.core.util.constructors[c])return c;return"Unknown"},hax.core.util.deepJsonCopy=function(a){if(null===a)return null;if(void 0!==a)return JSON.parse(JSON.stringify(a))},hax.core.util.deepFreeze=function(a){if(null!==a&&void 0!==a){var b,c=hax.core.util.getObjectType(a);if("Object"==c){Object.freeze(a);for(b in a)hax.core.util.deepFreeze(a[b])}else if("Array"==c)for(Object.freeze(a),b=0;b<a.length;b++)hax.core.util.deepFreeze(a[b])}},hax.core.util.formatString=function(a,b){var c=arguments;return a.replace(/{(\d+)}/g,function(a,b){var d=Number(b)+1;return c[d]})},hax.core.util.removeAllChildren=function(a){for(;a.lastChild;)a.removeChild(a.lastChild)},hax.core.util.getListInFirstButNotSecond=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];b.indexOf(e)<0&&c.push(e)}return c},hax.core.util.readQueryField=function(a,b){var c=b?b:window.location.href,d=new RegExp("[?&]"+a+"=([^&#]*)","i"),e=d.exec(c);return e?e[1]:null},hax.core.Child={},hax.core.Child.init=function(a,b){this.name=a,this.generator=b,this.errors=[]},hax.core.Child.initOwner=function(a){this.owner=a,a.isParent?this.owner.addChild(this):a.isRootHolder&&this.owner.setRoot(this)},hax.core.Child.move=function(a,b){this.owner&&this.owner.isParent&&this.owner.removeChild(this),this.name=a,this.initOwner(b)},hax.core.Child.isChild=!0,hax.core.Child.getName=function(){return this.name},hax.core.Child.getFullName=function(){return this.owner?this.owner.getPossesionNameBase()+this.name:this.name},hax.core.Child.getDisplayName=function(){return this.name},hax.core.Child.getOwner=function(){return this.owner},hax.core.Child.getParent=function(){return this.owner&&this.owner.isParent?this.owner:null},hax.core.Child.getWorkspace=function(){return this.owner?this.owner.getWorkspace():null},hax.core.Child.getRoot=function(){for(var a=this;a;){var b=a.getOwner();if(!b)return null;if(!b.isParent)return a;a=b}return null},hax.core.Child.addError=function(a){this.errors.push(a)},hax.core.Child.addErrors=function(a){this.errors=this.errors.concat(a)},hax.core.Child.clearErrors=function(a){var b=[];if(null!=a)for(var c=0;c<this.errors.length;c++){var d=this.errors[c];d.type!=a&&b.push(d)}this.errors=b},hax.core.Child.hasError=function(){return this.errors.length>0},hax.core.Child.getErrors=function(){return this.errors},hax.core.Child.toJson=function(){var a={};if(a.name=this.name,a.type=this.generator.type,this.addToJson&&this.addToJson(a),this.getUpdateData){var b=this.getUpdateData();a.updateData=b}return a},hax.core.Child.onDeleteChild=function(){this.owner&&(this.owner.isParent?this.owner.removeChild(this):this.owner.isRootHolder&&this.owner.setRoot(null),this.owner=null)},hax.core.ContextHolder={},hax.core.ContextHolder.init=function(){this.contextManager=null},hax.core.ContextHolder.isContextHolder=!0,hax.core.ContextHolder.getContextManager=function(){return this.contextManager||(this.contextManager=this.createContextManager()),this.contextManager},hax.core.ContextHolder.setContextManager=function(a){this.contextManager=a},hax.core.DataHolder={},hax.core.DataHolder.init=function(){this.data=null,this.impactsList=[],this.dataSet=!1},hax.core.DataHolder.isDataHolder=!0,hax.core.DataHolder.clearDataSet=function(){this.dataSet=!1},hax.core.DataHolder.getDataSet=function(){return this.dataSet},hax.core.Child.getData=function(){return this.data},hax.core.DataHolder.getImpactsList=function(){return this.impactsList},hax.core.DataHolder.setData=function(a){this.data=a,this.dataSet=!0;var b=this.getParent();b&&b.updateData(this)},hax.core.DataHolder.addToImpactsList=function(a){if(a!==this)return this.impactsList.indexOf(a)===-1&&(this.impactsList.push(a),!0)},hax.core.DataHolder.removeFromImpactsList=function(a){for(var b=0;b<this.impactsList.length;b++)if(this.impactsList[b]==a)return void this.impactsList.splice(b,1)},hax.core.Dependent={},hax.core.Dependent.init=function(){this.dependsOnList=[],this.dependenciesSet=!0},hax.core.Dependent.isDependent=!0,hax.core.Dependent.getDependsOn=function(){return this.dependsOnList},hax.core.Dependent.getDependenciesSetFlag=function(){return this.dependenciesSet},hax.core.Dependent.setDependenciesSetFlag=function(a){this.dependenciesSet=a},hax.core.Dependent.initializeImpactors=function(){for(var a=[],b=0;b<this.dependsOnList.length;b++){var c=this.dependsOnList[b];c.needsCalculating()&&!c.getDataSet()&&c.calculate(),c.hasError()&&a.push(c)}a.length>0&&this.createDependencyError(a)},hax.core.Dependent.onDeleteDependent=function(){for(var a=0;a<this.dependsOnList.length;a++){var b=this.dependsOnList[a];b.removeFromImpactsList(this)}},hax.core.Dependent.updateDependencies=function(a){var b=!1;a||(a=[]);var c=this.dependsOnList;this.dependsOnList=[];var d,e,f={};for(e=0;e<a.length;e++)if(d=a[e],d.isDataHolder){this.dependsOnList.push(d);var g=d.addToImpactsList(this);g&&(b=!0),f[d.getFullName()]=!0}else;for(e=0;e<c.length;e++){d=c[e];var h=f[d.getFullName()];h||(d.removeFromImpactsList(this),b=!0)}return this.dependenciesSet=!0,b},hax.core.Dependent.createDependencyError=function(a){for(var b="Error in dependency: ",c=0;c<a.length;c++)c>0&&(b+=", "),b+=a[c].getFullName();var d=new hax.core.ActionError(b,"Calculation - Dependency",this);this.addError(d)},hax.core.Codeable={},hax.core.Codeable.init=function(a,b){this.argList=a,this.codeSet=!1,this.functionBody="",this.supplementalCode="",this.varInfo=null,this.dependencyInfo=null,this.contextSetter=null,this.objectFunction=null,this.codeErrors=[],this.calcInProgress=!1,this.dataSet=!1,this.functionInitialized=!1},hax.core.Codeable.isCodeable=!0,hax.core.Codeable.getArgList=function(){return this.argList},hax.core.Codeable.getFunctionBody=function(){return this.functionBody},hax.core.Codeable.getSupplementalCode=function(){return this.supplementalCode},hax.core.Codeable.setCodeInfo=function(a){if(this.argList=a.argList,this.functionBody=a.functionBody,this.supplementalCode=a.supplementalCode,this.varInfo=a.varInfo,a.errors&&0!==a.errors.length)this.codeErrors=a.errors;else try{a.generatorFunction(this),this.codeErrors=[]}catch(b){this.codeErrors.push(hax.core.ActionError.processException(b,"Codeable - Set Code",!1))}this.codeErrors.length>0&&(this.objectFunction=null,this.contextSetter=null),this.codeSet=!0,this.isDependent&&this.setDependenciesSetFlag(!1)},hax.core.Codeable.initializeDependencies=function(){if(this.hasCode()&&this.varInfo&&0===this.codeErrors.length)try{var a=hax.core.codeDependencies.getDependencyInfo(this.varInfo,this.getContextManager());this.updateDependencies(a)}catch(b){this.codeErrors.push(hax.core.ActionError.processException(b,"Codeable - Set Dependencies",!1))}else this.updateDependencies([])},hax.core.Codeable.updateDependeciesForModelChange=function(a){if(this.hasCode()&&this.varInfo){var b=hax.core.codeDependencies.getDependencyInfo(this.varInfo,this.getContextManager()),c=this.updateDependencies(b);c&&hax.core.calculation.addToRecalculateList(a,this)}},hax.core.Codeable.clearCode=function(){this.codeSet=!1,this.functionBody="",this.supplementalCode="",this.varInfo=null,this.dependencyInfo=null,this.contextSetter=null,this.objectFunction=null,this.codeErrors=[];var a=[];this.updateDependencies(a)},hax.core.Codeable.hasCode=function(){return this.codeSet},hax.core.Codeable.needsCalculating=function(){return this.codeSet&&this.getDependenciesSetFlag()},hax.core.Codeable.prepareForCalculate=function(){this.isDataHolder&&this.clearDataSet(),this.clearErrors(),this.functionInitialized=!1},hax.core.Codeable.calculate=function(){if(!(this.isDataHolder&&this.getDataSet()||this.hasError())){if(this.codeErrors.length>0)return void this.addErrors(this.codeErrors);if(!this.objectFunction||!this.contextSetter){var a="Function not found for member: "+this.getName(),b=new hax.core.ActionError(a,"Codeable - Calculate",this);return void this.addError(b)}try{this.processObjectFunction(this.objectFunction)}catch(c){c.stack&&console.error(c.stack);var d=c.message?c.message:"Unknown error",b=new hax.core.ActionError(d,"Codeable - Calculate",this);b.setParentException(c),this.addError(b)}}},hax.core.Codeable.initFunction=function(){if(!this.functionInitialized){if(this.calcInProgress){var a="Circular reference error",b=new hax.core.ActionError(a,"Codeable - Calculate",this);return this.addError(b),void(this.calcInProgress=!1)}this.calcInProgress=!0;try{if(this.initializeImpactors(),this.hasError())return void(this.calcInProgress=!1);this.contextSetter(this.getContextManager())}catch(c){c.stack&&console.error(c.stack);var a=c.message?c.message:"Unknown error",b=new hax.core.ActionError(a,"Codeable - Calculate",this);b.setParentException(c),this.addError(b)}this.calcInProgress=!1,this.functionInitialized=!0}},hax.core.Codeable.getUpdateData=function(){var a={};return this.hasCode()?(a.argList=this.getArgList(),a.functionBody=this.getFunctionBody(),a.supplementalCode=this.getSupplementalCode()):a.data=this.getData(),a},hax.core.Codeable.createContextManager=function(){return new hax.core.ContextManager(this)},hax.core.Codeable.setObjectFunction=function(a){this.objectFunction=a},hax.core.Codeable.setContextSetter=function(a){this.contextSetter=a},hax.core.Owner={},hax.core.Owner.init=function(){},hax.core.Owner.isOwner=!0,hax.core.Parent={},hax.core.Parent.init=function(){},hax.core.Parent.isParent=!0,hax.core.Parent.isRoot=function(){return null==this.getParent()},hax.core.Parent.lookupChildFromPath=function(a){for(var b=this,c=0;b&&c<a.length&&b.isParent;c++)b=b.lookupChild(a[c]);return b},hax.core.Parent.createContextManager=function(){var a=new hax.core.ContextManager(this),b={};return b.isLocal=!this.isRoot(),b.parent=this,a.addToContextList(b),a},hax.core.Parent.getPossesionNameBase=function(){return this.isRoot()?this.owner?this.owner.getPossesionNameBase():this.getName()+":":this.getFullName()+"."},hax.core.Parent.getFullName=function(){return this.isRoot()?this.owner?this.owner.getPossesionNameBase():this.getName()+":":hax.core.Child.getFullName.call(this)},hax.core.RootHolder={},hax.core.RootHolder.init=function(){},hax.core.RootHolder.isRootHolder=!0,hax.core.Workspace=function(a,b,c){hax.core.EventManager.init.call(this),hax.core.ContextHolder.init.call(this),hax.core.Owner.init.call(this),hax.core.RootHolder.init.call(this),void 0===c&&(c=null),this.owner=c;var d=hax.core.util.getObjectType(a);"String"===d?(this.name=a,this.rootFolder=new hax.core.Folder(a,this)):this.loadFromJson(a,b)},hax.core.util.mixin(hax.core.Workspace,hax.core.EventManager),hax.core.util.mixin(hax.core.Workspace,hax.core.ContextHolder),hax.core.util.mixin(hax.core.Workspace,hax.core.Owner),hax.core.util.mixin(hax.core.Workspace,hax.core.RootHolder),hax.core.Workspace.prototype.getName=function(){return this.name},hax.core.Workspace.prototype.getRoot=function(){return this.rootFolder},hax.core.Workspace.prototype.setRoot=function(a){this.rootFolder=a},hax.core.Workspace.prototype.getOwner=function(){return this.owner},hax.core.Workspace.prototype.updateDependeciesForModelChange=function(a){this.rootFolder&&this.rootFolder.updateDependeciesForModelChange(a)},hax.core.Workspace.prototype.close=function(){},hax.core.Workspace.prototype.getWorkspace=function(){return this},hax.core.Workspace.prototype.getPossesionNameBase=function(){return this.name+":"},hax.core.Workspace.prototype.createContextManager=function(){var a=new hax.core.ContextManager(this),b={};return b.isLocal=!1,b.data=__globals__,a.addToContextList(b),a},hax.core.Workspace.createVirtualWorkpaceFromFolder=function(a,b,c){var d={};return d.name=a,d.fileType=hax.core.Workspace.SAVE_FILE_TYPE,d.version=hax.core.Workspace.SAVE_FILE_VERSION,d.data=b.toJson(),new hax.core.Workspace(d,null,c)},hax.core.Workspace.SAVE_FILE_TYPE="hax workspace",hax.core.Workspace.SAVE_FILE_VERSION=.1,hax.core.Workspace.prototype.toJson=function(){var a={};return a.name=this.name,a.fileType=hax.core.Workspace.SAVE_FILE_TYPE,a.version=hax.core.Workspace.SAVE_FILE_VERSION,a.data=this.rootFolder.toJson(),a},hax.core.Workspace.prototype.loadFromJson=function(a,b){var c=a.fileType;if(c!==hax.core.Workspace.SAVE_FILE_TYPE)throw hax.core.util.createError("Bad file format.",!1);if(a.version!==hax.core.Workspace.SAVE_FILE_VERSION)throw hax.core.util.createError("Incorrect file version.",!1);return this.name=a.name,a.contextManager&&this.setContextManager(a.contextManager),b||(b=new hax.core.ActionResponse),hax.core.createmember.createMember(this,a.data,b),b},hax.core.Workspace.memberGenerators={},hax.core.Workspace.getMemberGenerator=function(a){return hax.core.Workspace.memberGenerators[a]},hax.core.Workspace.addMemberGenerator=function(a){hax.core.Workspace.memberGenerators[a.type]=a},hax.core.JsonTable=function(a,b,c){hax.core.Child.init.call(this,a,hax.core.JsonTable.generator),hax.core.DataHolder.init.call(this),hax.core.Dependent.init.call(this),hax.core.ContextHolder.init.call(this),hax.core.Codeable.init.call(this,[],!0),this.initOwner(b),c||(c={},c.data=""),hax.core.updatemember.applyCodeOrData(this,c)},hax.core.util.mixin(hax.core.JsonTable,hax.core.Child),hax.core.util.mixin(hax.core.JsonTable,hax.core.DataHolder),hax.core.util.mixin(hax.core.JsonTable,hax.core.Dependent),hax.core.util.mixin(hax.core.JsonTable,hax.core.ContextHolder),hax.core.util.mixin(hax.core.JsonTable,hax.core.Codeable),hax.core.JsonTable.prototype.setData=function(a){return hax.core.util.deepFreeze(a),hax.core.DataHolder.setData.call(this,a)},hax.core.JsonTable.prototype.processObjectFunction=function(a){var b=a();this.setData(b)},hax.core.JsonTable.fromJson=function(a,b,c){return new hax.core.JsonTable(b.name,a,b.updateData)},hax.core.JsonTable.generator={},hax.core.JsonTable.generator.displayName="Table",hax.core.JsonTable.generator.type="hax.core.JsonTable",hax.core.JsonTable.generator.createMember=hax.core.JsonTable.fromJson,hax.core.Workspace.addMemberGenerator(hax.core.JsonTable.generator),hax.core.FunctionTable=function(a,b,c){hax.core.Child.init.call(this,a,hax.core.FunctionTable.generator),hax.core.DataHolder.init.call(this),hax.core.Dependent.init.call(this),hax.core.ContextHolder.init.call(this),hax.core.Codeable.init.call(this,d,!1),this.initOwner(b);var d=c.argList?c.argList:[],e=c.functionBody?c.functionBody:"",f=c.supplementalCode?c.supplementalCode:"";hax.core.updatemember.applyCode(this,d,e,f)},hax.core.util.mixin(hax.core.FunctionTable,hax.core.Child),hax.core.util.mixin(hax.core.FunctionTable,hax.core.DataHolder),hax.core.util.mixin(hax.core.FunctionTable,hax.core.Dependent),hax.core.util.mixin(hax.core.FunctionTable,hax.core.ContextHolder),hax.core.util.mixin(hax.core.FunctionTable,hax.core.Codeable),hax.core.FunctionTable.prototype.processObjectFunction=function(a){this.setData(a)},hax.core.FunctionTable.prototype.getDisplayName=function(){var a=this.getName(),b=this.getArgList(),c=b.join(",");return a+"("+c+")"},hax.core.FunctionTable.fromJson=function(a,b,c){return new hax.core.FunctionTable(b.name,a,b.updateData)},hax.core.FunctionTable.generator={},hax.core.FunctionTable.generator.displayName="Function",hax.core.FunctionTable.generator.type="hax.core.FunctionTable",hax.core.FunctionTable.generator.createMember=hax.core.FunctionTable.fromJson,hax.core.Workspace.addMemberGenerator(hax.core.FunctionTable.generator),hax.core.Control=function(a,b,c){hax.core.Child.init.call(this,a,hax.core.Control.generator),hax.core.Dependent.init.call(this),hax.core.ContextHolder.init.call(this),hax.core.Codeable.init.call(this,["resource"],!0),this.initOwner(b),this.resource=null,c||(c={});var d=c.argList?c.argList:["resource"],e=c.functionBody?c.functionBody:"",f=c.supplementalCode?c.supplementalCode:"";hax.core.updatemember.applyCode(this,d,e,f)},hax.core.util.mixin(hax.core.Control,hax.core.Child),hax.core.util.mixin(hax.core.Control,hax.core.Dependent),hax.core.util.mixin(hax.core.Control,hax.core.ContextHolder),hax.core.util.mixin(hax.core.Control,hax.core.Codeable),hax.core.Control.prototype.getResource=function(){return this.resource},hax.core.Control.prototype.updateResource=function(a){this.resource=a,this.needsCalculating()&&this.calculate()},hax.core.Control.prototype.processObjectFunction=function(a){this.resource&&a(this.resource)},hax.core.Control.fromJson=function(a,b,c){return new hax.core.Control(b.name,a,b.updateData)},hax.core.Control.generator={},hax.core.Control.generator.displayName="Control",hax.core.Control.generator.type="hax.core.Control",hax.core.Control.generator.createMember=hax.core.Control.fromJson,hax.core.Workspace.addMemberGenerator(hax.core.Control.generator),hax.core.Folder=function(a,b){hax.core.Child.init.call(this,a,hax.core.Folder.generator),hax.core.DataHolder.init.call(this),hax.core.Dependent.init.call(this),hax.core.ContextHolder.init.call(this),hax.core.Owner.init.call(this),hax.core.Parent.init.call(this),this.initOwner(b),this.childMap={},this.dataMap={},Object.freeze(this.dataMap),this.setData(this.dataMap)},hax.core.util.mixin(hax.core.Folder,hax.core.Child),hax.core.util.mixin(hax.core.Folder,hax.core.DataHolder),hax.core.util.mixin(hax.core.Folder,hax.core.Dependent),hax.core.util.mixin(hax.core.Folder,hax.core.ContextHolder),hax.core.util.mixin(hax.core.Folder,hax.core.Owner),hax.core.util.mixin(hax.core.Folder,hax.core.Parent),hax.core.Folder.prototype.getChildMap=function(){return this.childMap},hax.core.Folder.prototype.lookupChild=function(a){return this.childMap[a]},hax.core.Folder.prototype.addChild=function(a){var b=a.getName();if(this.childMap[b])throw hax.core.util.createError("There is already an object with the given name.",!1);if(this.childMap[b]=a,a.isDataHolder){var c=a.getData();void 0!==c&&this.spliceDataMap(b,c)}this.calculateDependents()},hax.core.Folder.prototype.removeChild=function(a){var b=a.getParent();if(b&&b===this){var c=a.getName();delete this.childMap[c],a.isDataHolder&&this.spliceDataMap(c),this.calculateDependents()}},hax.core.Folder.prototype.updateData=function(a){if(a.isDataHolder){var b=a.getName(),c=a.getData();return void 0===this.childMap[b]?void alert("Error - this table "+b+" has not yet been added to the folder."):void this.spliceDataMap(b,c)}},hax.core.Folder.prototype.needsCalculating=function(){return!1},hax.core.Folder.prototype.calculate=function(){},hax.core.Folder.prototype.updateDependeciesForModelChange=function(a){for(var b in this.childMap){var c=this.childMap[b];c.isDependent&&c.updateDependeciesForModelChange(a)}},hax.core.Folder.fromJson=function(a,b,c){var d=new hax.core.Folder(b.name,a);for(var e in b.children){var f=b.children[e];c.push(f)}return d},hax.core.Folder.prototype.addToJson=function(a){a.children={};for(var b in this.childMap){var c=this.childMap[b];a.children[b]=c.toJson()}},hax.core.Folder.prototype.calculateDependents=function(){var a=[];for(var b in this.childMap){var c=this.childMap[b];c.isDataHolder&&a.push(c)}this.updateDependencies(a)},hax.core.Folder.prototype.spliceDataMap=function(a,b){var c={};for(var d in this.dataMap)d!==a&&(c[d]=this.dataMap[d]);void 0!==b&&(c[a]=b),Object.freeze(c),this.dataMap=c,this.setData(this.dataMap)},hax.core.Folder.generator={},hax.core.Folder.generator.displayName="Folder",hax.core.Folder.generator.type="hax.core.Folder",hax.core.Folder.generator.createMember=hax.core.Folder.fromJson,hax.core.Workspace.addMemberGenerator(hax.core.Folder.generator),hax.core.FolderFunction=function(a,b,c,d){if(hax.core.Child.init.call(this,a,hax.core.FolderFunction.generator),hax.core.DataHolder.init.call(this),hax.core.Dependent.init.call(this),hax.core.ContextHolder.init.call(this),hax.core.Owner.init.call(this),hax.core.RootHolder.init.call(this),this.initOwner(b),this.argList=void 0!==c.argList?c.argList:"",this.returnValueString=void 0!==c.returnValue?c.returnValue:[],this.setData(function(){}),d){var e=new hax.core.Folder(a,this);this.setRoot(e)}},hax.core.util.mixin(hax.core.FolderFunction,hax.core.Child),hax.core.util.mixin(hax.core.FolderFunction,hax.core.DataHolder),hax.core.util.mixin(hax.core.FolderFunction,hax.core.Dependent),hax.core.util.mixin(hax.core.FolderFunction,hax.core.ContextHolder),hax.core.util.mixin(hax.core.FolderFunction,hax.core.Owner),hax.core.util.mixin(hax.core.FolderFunction,hax.core.RootHolder),hax.core.FolderFunction.prototype.getInternalFolder=function(){return this.internalFolder},hax.core.FolderFunction.prototype.getRoot=function(){return this.getInternalFolder()},hax.core.FolderFunction.prototype.setRoot=function(a){this.internalFolder=a;var b=[a];this.updateDependencies(b)},hax.core.FolderFunction.prototype.getReturnValueString=function(){
return this.returnValueString},hax.core.FolderFunction.prototype.getArgList=function(){return this.argList},hax.core.FolderFunction.prototype.getDisplayName=function(){var a=this.getName(),b=this.getArgList(),c=b.join(","),d=a+"("+c+")";return null!=this.returnValueString&&this.returnValueString.length>0&&(d+=" = "+this.returnValueString),d},hax.core.FolderFunction.prototype.onDelete=function(){var a;if(this.internalFolder){var b=hax.core.deletemember.deleteMember(this.internalFolder);if(!b.getSuccess()){var c=b.getErrorMsg();alert(c)}}return a=hax.core.Child.onDelete.call(this)},hax.core.FolderFunction.fromJson=function(a,b,c){var d={};d.argList=b.argList,d.returnValue=b.returnValue;var e;return b.internalFolder?(c.push(b.internalFolder),e=!1):e=!0,new hax.core.FolderFunction(b.name,a,d,e)},hax.core.FolderFunction.prototype.addToJson=function(a){a.argList=this.argList,a.returnValue=this.returnValueString,a.internalFolder=this.internalFolder.toJson()},hax.core.FolderFunction.prototype.needsCalculating=function(){return!0},hax.core.FolderFunction.prototype.prepareForCalculate=function(){this.clearDataSet()},hax.core.FolderFunction.prototype.calculate=function(){var a=[],b=this.getFolderFunctionFunction(a);0==a.length?this.setData(b):this.addErrors(a),this.initializeImpactors()},hax.core.FolderFunction.prototype.updateDependeciesForModelChange=function(a){this.internalFolder&&this.internalFolder.updateDependeciesForModelChange(a)},hax.core.FolderFunction.prototype.createContextManager=function(){return new hax.core.ContextManager(this)},hax.core.FolderFunction.prototype.getPossesionNameBase=function(){return this.getFullName()+":"},hax.core.FolderFunction.prototype.setReturnValueString=function(a){this.returnValueString=a},hax.core.FolderFunction.prototype.setArgList=function(a){this.argList=a},hax.core.FolderFunction.prototype.getFolderFunctionFunction=function(a){var b,c,d,e,f=!1,g=this,h=function(h){if(!f){if(b=g.createVirtualWorkspace(a),!b)return null;c=b.getRoot(),d=g.loadInputElements(c,a),e=g.loadOutputElement(c,a)}for(var i=[],j=0;j<d.length;j++){var k={};k.member=d[j],k.data=arguments[j],i.push(k)}var l=hax.core.updatemember.updateObjects(i);if(l.getSuccess())return e?e.getData():void 0;throw hax.core.util.createError(l.getErrorMsg())};return h},hax.core.FolderFunction.prototype.createVirtualWorkspace=function(a){try{return hax.core.Workspace.createVirtualWorkpaceFromFolder("temp",this.internalFolder,this.getOwner())}catch(b){var c=hax.core.ActionError.processException(exception,"FolderFunction - Code",!1);return a.push(c),null}},hax.core.FolderFunction.prototype.loadInputElements=function(a,b){for(var c=[],d=0;d<this.argList.length;d++){var e=this.argList[d],f=a.lookupChild(e);f&&c.push(f)}return c},hax.core.FolderFunction.prototype.loadOutputElement=function(a,b){var c=a.lookupChild(this.returnValueString);return c},hax.core.FolderFunction.generator={},hax.core.FolderFunction.generator.displayName="Folder Function",hax.core.FolderFunction.generator.type="hax.core.FolderFunction",hax.core.FolderFunction.generator.createMember=hax.core.FolderFunction.fromJson,hax.core.Workspace.addMemberGenerator(hax.core.FolderFunction.generator),hax.core.action={},hax.core.ActionResponse=function(){this.success=!0,this.errors=[],this.fatal=!1},hax.core.ActionResponse.prototype.addError=function(a){this.success=!1,a.getIsFatal()&&(this.fatal=!0),this.errors.indexOf(a)<0&&this.errors.push(a)},hax.core.ActionResponse.prototype.getSuccess=function(){return this.success},hax.core.ActionResponse.prototype.getErrorMsg=function(){var a="";this.fatal&&(a+="Unknown Error: The application is in an indeterminant state. It is recommended it be closed.\n");for(var b=0;b<this.errors.length;b++){var c=this.errors[b],d="";c.member&&(d+=c.member.getName()+": "),d+=c.msg,a+=d+"\n"}return a},hax.core.ActionError=function(a,b,c){this.msg=null!=a?a:hax.core.ActionError.UNKNOWN_ERROR_MESSAGE,this.errorType=b,this.member=c,this.isFatal=!1,this.parentException=null},hax.core.ActionError.UNKNOWN_ERROR_MESSAGE="Unknown Error",hax.core.ActionError.prototype.setParentException=function(a){this.parentException=a},hax.core.ActionError.prototype.setIsFatal=function(a){this.isFatal=a},hax.core.ActionError.prototype.getIsFatal=function(){return this.isFatal},hax.core.ActionError.prototype.getType=function(){return this.errorType},hax.core.ActionError.processException=function(a,b,c,d){a.stack&&console.error(a.stack);var e=d?d:"";a.message&&(e+=a.message),0==e.length&&(e="Unknown error");var f=new hax.core.ActionError(e,b,null);f.setParentException(a);var g;return g=void 0!==a.isFatal?a.isFatal:c,f.setIsFatal(g),f},hax.core.createmember={},hax.core.createmember.MEMBER_CREATED_EVENT="memberCreated",hax.core.createmember.fireCreatedEvent=function(a){var b=a.getWorkspace();b.dispatchEvent(hax.core.createmember.MEMBER_CREATED_EVENT,a)},hax.core.createmember.fireCreatedEventList=function(a){for(var b=0;b<a.length;b++)hax.core.createmember.fireCreatedEvent(a[b])},hax.core.createmember.createMember=function(a,b,c){var d=c?c:new hax.core.ActionResponse;try{var e=[],f=[],g=hax.core.createmember.instantiateMember(a,b,f,d);d.member=g;var h=g.getWorkspace();h.updateDependeciesForModelChange(e),hax.core.calculation.callRecalculateList(e,d);var i=hax.core.util.getListInFirstButNotSecond(e,f);hax.core.createmember.fireCreatedEventList(f),hax.core.updatemember.fireUpdatedEventList(i)}catch(j){var k=hax.core.ActionError.processException(j,"AppException",!0);d.addError(k)}return d},hax.core.createmember.instantiateMember=function(a,b,c,d){var e=hax.core.Workspace.getMemberGenerator(b.type);if(!e){var f="Member type not found: "+b.type,g=new hax.core.ActionError(f,"Model",null);return d.addError(g),null}var h=[],i=e.createMember(a,b,h);c.push(i);for(var j=0;j<h.length;j++){var k=h[j];hax.core.createmember.instantiateMember(i,k,c,d)}return i},hax.core.updatemember={},hax.core.updatemember.MEMBER_UPDATED_EVENT="memberUpdated",hax.core.updatemember.CODE_APPLIED=0,hax.core.updatemember.DATA_APPLIED=1,hax.core.updatemember.fireUpdatedEvent=function(a){var b=a.getWorkspace();b.dispatchEvent(hax.core.updatemember.MEMBER_UPDATED_EVENT,a)},hax.core.updatemember.fireUpdatedEventList=function(a){for(var b=0;b<a.length;b++)hax.core.updatemember.fireUpdatedEvent(a[b])},hax.core.updatemember.updateCode=function(a,b,c,d,e){var f=e?e:new hax.core.ActionResponse;try{var g=[];hax.core.updatemember.applyCode(a,b,c,d,g),a.initializeDependencies(),hax.core.calculation.addToRecalculateList(g,a),hax.core.calculation.callRecalculateList(g,f),hax.core.updatemember.fireUpdatedEventList(g)}catch(h){var i=hax.core.ActionError.processException(h,"AppException",!0);f.addError(i)}return f},hax.core.updatemember.updateData=function(a,b,c){var d=c?c:new hax.core.ActionResponse;try{var e=[];hax.core.updatemember.applyData(a,b,e),hax.core.calculation.addToRecalculateList(e,a),hax.core.calculation.callRecalculateList(e,d),hax.core.updatemember.fireUpdatedEvent(a),hax.core.updatemember.fireUpdatedEventList(e)}catch(f){var g=hax.core.ActionError.processException(f,"AppException",!0);d.addError(g)}return d},hax.core.updatemember.updateObjects=function(a,b){var c=b?b:new hax.core.ActionResponse;try{for(var d=[],e=[],f=0;f<a.length;f++){var g=a[f],h=g.member,i=hax.core.updatemember.applyCodeOrData(h,g);i===hax.core.updatemember.CODE_APPLIED?h.initializeDependencies():e.push(h),hax.core.calculation.addToRecalculateList(d,h)}hax.core.calculation.callRecalculateList(d,c),hax.core.updatemember.fireUpdatedEventList(e),hax.core.updatemember.fireUpdatedEventList(d)}catch(j){var k=hax.core.ActionError.processException(j,"AppException",!0);c.addError(k)}return c},hax.core.updatemember.applyCodeOrData=function(a,b){var c=b.data,d=b.argList,e=b.functionBody,f=b.supplementalCode;return void 0!==e?(hax.core.updatemember.applyCode(a,d,e,f),hax.core.updatemember.CODE_APPLIED):void 0!==c?(hax.core.updatemember.applyData(a,c),hax.core.updatemember.DATA_APPLIED):void 0},hax.core.updatemember.applyCode=function(a,b,c,d){var e={};e.argList=b,e.functionBody=c,e.supplementalCode=d;var f=a.getFullName();hax.core.codeCompiler.processCode(e,f),a.setCodeInfo(e)},hax.core.updatemember.applyData=function(a,b){a.clearErrors(),a.isCodeable&&a.clearCode(),a.setData(b)},hax.core.updatefolderFunction={},hax.core.updatefolderFunction.updatePropertyValues=function(a,b,c,d){a.setArgList(b),a.setReturnValueString(c),hax.core.calculation.addToRecalculateList(d,a)},hax.core.movemember={},hax.core.movemember.MEMBER_MOVED_EVENT="memberMoved",hax.core.movemember.fireMovedEventList=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=e.getWorkspace(),g={};g.member=e,g.oldFullName=b[d],g.newFullName=c[d],f.dispatchEvent(hax.core.movemember.MEMBER_MOVED_EVENT,g)}},hax.core.movemember.moveMember=function(a,b,c,d){var e=[];hax.core.movemember.loadMovedList(a,e);var f=hax.core.movemember.getNameList(e);a.move(b,c);var g=hax.core.movemember.getNameList(e),h=a.getWorkspace();h.updateDependeciesForModelChange(d);var i=hax.core.util.getListInFirstButNotSecond(d,e);hax.core.movemember.fireMovedEventList(e,f,g),hax.core.updatemember.fireUpdatedEventList(i)},hax.core.movemember.loadMovedList=function(a,b){if(b.push(a),a.isParent){var c=a.getChildMap();for(var d in c){var e=c[d];hax.core.movemember.loadMovedList(e,b)}}else if(a.isRootHolder){var f=a.getRoot();hax.core.movemember.loadMovedList(f,b)}},hax.core.movemember.getNameList=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c].getFullName();return b},hax.core.deletemember={},hax.core.deletemember.MEMBER_DELETED_EVENT="memberDeleted",hax.core.deletemember.fireDeletedEventList=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.workspace;d.dispatchEvent(hax.core.deletemember.MEMBER_DELETED_EVENT,c)}},hax.core.deletemember.deleteMember=function(a,b){var c=b?b:new hax.core.ActionResponse;try{var d=[],e=[],f=a.getWorkspace();hax.core.deletemember.fillDeleteInfoList(a,e);for(var g=0;g<e.length;g++){var h=e[g],a=h.member;a.onDeleteChild(),a.isDependent&&a.onDeleteDependent()}f.updateDependeciesForModelChange(d),hax.core.calculation.callRecalculateList(d,c),hax.core.deletemember.fireDeletedEventList(e),hax.core.updatemember.fireUpdatedEventList(d)}catch(i){var j=hax.core.ActionError.processException(i,"AppException",!0);c.addError(j)}return c},hax.core.deletemember.fillDeleteInfoList=function(a,b){var c={};if(c.member=a,c.workspace=a.getWorkspace(),c.fullName=a.getFullName(),b.push(c),a.isParent){var d=a.getChildMap();for(var e in d){var f=d[e];hax.core.deletemember.fillDeleteInfoList(f,b)}}else if(a.isRootHolder){var g=a.getRoot();hax.core.deletemember.fillDeleteInfoList(g,b)}},hax.visiui={},hax.visiui.initResourcePath=function(a){hax.visiui.RESOURCE_DIR=a},hax.visiui.getResourcePath=function(a){return hax.visiui.RESOURCE_DIR+a},hax.visiui.MENU_ZINDEX=100,hax.visiui.WINDOW_FRAME_ZINIDEX=10,hax.visiui.DIALOG_ZINDEX=200,hax.visiui.idIndex=0,hax.visiui.idBase="_visiui_id_",hax.visiui.createId=function(){return hax.visiui.idBase+hax.visiui.idIndex++},hax.visiui.applyStyle=function(a,b){for(var c in b)a.style[c]=b[c]},hax.visiui.createElement=function(a,b,c){var d=document.createElement(a);if(b)for(var e in b)d[e]=b[e];return c&&hax.visiui.applyStyle(d,c),d},hax.visiui.dialogLayer=null,hax.visiui.BASE_ELEMENT_STYLE={position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",zIndex:1},hax.visiui.DIALOG_LAYER_STYLE={position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",zIndex:2,pointerEvents:"none"},hax.visiui.DIALOG_SHIELD_STYLE={position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",pointerEvents:"auto"},hax.visiui.initWindows=function(a){var b=document.getElementById(a);if(!b)throw hax.core.util.createError("Container ID not found: "+a);var c={};return c.baseElement=hax.visiui.createElement("div",null,hax.visiui.BASE_ELEMENT_STYLE),c.dialogLayer=hax.visiui.createElement("div",null,hax.visiui.DIALOG_LAYER_STYLE),b.appendChild(c.baseElement),b.appendChild(c.dialogLayer),hax.visiui.dialogLayer=c.dialogLayer,c},hax.visiui.createDialog=function(a){var b=hax.visiui.createElement("div",null,hax.visiui.DIALOG_SHIELD_STYLE),c=new hax.visiui.SimpleParentContainer(b,(!0));return hax.visiui.dialogLayer.appendChild(b),a.frameColorClass||(a.frameColorClass="visicomp_windowColor"),a.titleBarClass||(a.titleBarClass="visicomp_titleBarClass"),new hax.visiui.WindowFrame(c,a)},hax.visiui.closeDialog=function(a){var b=a.getParent();a.hide(),hax.visiui.dialogLayer.removeChild(b.getContainerElement())},hax.visiui.ParentContainer={},hax.visiui.ParentContainer.init=function(a,b){this.containerElement=a,this.eventManager=b,this.windowFrameStack=[],this.prevNewChildX=0,this.prevNewChildY=0,this.wrapCount=0},hax.visiui.ParentContainer.BASE_ZINDEX=0,hax.visiui.ParentContainer.DELTA_CHILD_X=75,hax.visiui.ParentContainer.DELTA_CHILD_Y=75,hax.visiui.ParentContainer.MIN_WRAP_WIDTH=20,hax.visiui.ParentContainer.MIN_WRAP_HEIGHT=200,hax.visiui.ParentContainer.CONTENT_SHOWN="content shown",hax.visiui.ParentContainer.CONTENT_HIDDEN="content hidden",hax.visiui.ParentContainer.getContainerElement=function(){return this.containerElement},hax.visiui.ParentContainer.getEventManager=function(){return this.eventManager},hax.visiui.ParentContainer.addWindow=function(a){this.containerElement.appendChild(a.getElement()),this.windowFrameStack.push(a),this.updateOrder()},hax.visiui.ParentContainer.removeWindow=function(a){this.containerElement.removeChild(a.getElement());var b=this.windowFrameStack.indexOf(a);this.windowFrameStack.splice(b,1),this.updateOrder()},hax.visiui.ParentContainer.bringToFront=function(a){var b=this.windowFrameStack.indexOf(a);this.windowFrameStack.splice(b,1),this.windowFrameStack.push(a),this.updateOrder()},hax.visiui.ParentContainer.getCenterOnPagePosition=function(a){var b=a.getElement(),c=(this.containerElement.offsetWidth-b.clientWidth)/2,d=(this.containerElement.offsetHeight-b.clientHeight)/2;return[c,d]},hax.visiui.ParentContainer.getNextWindowPosition=function(){var a=this.prevNewChildX+hax.visiui.ParentContainer.DELTA_CHILD_X,b=this.prevNewChildY+hax.visiui.ParentContainer.DELTA_CHILD_Y;return a>this.containerElement.offsetWidth&&a>hax.visiui.ParentContainer.MIN_WRAP_WIDTH&&b>this.containerElement.offsetHeight&&b>hax.visiui.ParentContainer.MIN_WRAP_HEIGHT&&(this.wrapCount++,a=hax.visiui.ParentContainer.DELTA_CHILD_X*(this.wrapCount+1),b=hax.visiui.ParentContainer.DELTA_CHILD_Y),this.prevNewChildX=a,this.prevNewChildY=b,[a,b]},hax.visiui.ParentContainer.updateOrder=function(){for(var a=hax.visiui.ParentContainer.BASE_ZINDEX,b=0;b<this.windowFrameStack.length;b++){var c=this.windowFrameStack[b];c.setZIndex(a++)}},hax.visiui.ParentHighlighter={},hax.visiui.ParentHighlighter.init=function(a){this.borderOutlineStyle="solid 3px "+hax.visiui.ParentHighlighter.getColor(),a.style.border=this.borderOutlineStyle},hax.visiui.ParentHighlighter.addWindow=function(a){var b=a.getElement();b.style.outline=this.borderOutlineStyle,hax.visiui.ParentContainer.addWindow.call(this,a)},hax.visiui.ParentHighlighter.removeWindow=function(a){var b=a.getElement();b.style.outline="",hax.visiui.ParentContainer.removeWindow.call(this,a)},hax.visiui.ParentHighlighter.colorIndex=0,hax.visiui.ParentHighlighter.getColor=function(){var a=hax.visiui.ParentHighlighter.colorArray[hax.visiui.ParentHighlighter.colorIndex];return hax.visiui.ParentHighlighter.colorIndex=(hax.visiui.ParentHighlighter.colorIndex+1)%hax.visiui.ParentHighlighter.colorArray.length,a},hax.visiui.ParentHighlighter.colorArray=["DimGray","Indigo","DarkCyan","LimeGreen","RebeccaPurple","MediumBlue","DarkGoldenRod","Navy","MediumSeaGreen","DarkViolet","ForestGreen","RoyalBlue","Chocolate","Red","Purple","DarkSlateGray","OliveDrab","DarkRed","MidnightBlue","Brown","DarkMagenta","DarkSlateBlue","Green","Sienna","FireBrick","Blue","Olive","SteelBlue","Teal","IndianRed","MediumVioletRed","SlateGray","SaddleBrown","SeaGreen","Chartreuse","LightSeaGreen","DarkBlue","Crimson","Lime","LawnGreen","DarkOliveGreen","OrangeRed","Maroon","DarkOrange","Gray","SpringGreen"],hax.visiui.WindowFrame=function(a,b){b||(b={}),b.frameColorClass||(b.frameColorClass=hax.visiui.WindowFrame.DEFAULT_FRAME_COLOR_CLASS),b.titleBarClass||(b.titleBarClass=hax.visiui.WindowFrame.DEFAULT_TITLE_BAR_CLASS),hax.core.EventManager.init.call(this),this.parentContainer=a,this.parentElement=a.getContainerElement(),this.options=b,this.windowState=hax.visiui.WindowFrame.NORMAL,this.coordinateInfo={},this.coordinateInfo.x=0,this.coordinateInfo.y=0,this.coordinateInfo.width=hax.visiui.WindowFrame.DEFAULT_WINDOW_WIDTH,this.coordinateInfo.height=hax.visiui.WindowFrame.DEFAULT_WINDOW_HEIGHT,this.isShowing=!1,this.frame=null,this.titleCell=null,this.bodyCell=null,this.headerCell=null,this.titleBar=null,this.titleBarLeftElements=null,this.titleBarRightElements=null,this.header=null,this.body=null,this.content=null,this.minimizeButton=null,this.restoreButton=null,this.maximizeButton=null,this.closable=null,this.windowDragActive=!1,this.moveOffsetX=null,this.moveOffsetX=null,this.moveOnMouseMove=null,this.moveOnMouseLeave=null,this.moveOnMouseUp=null,this.resizeEastActive=!1,this.resizeWestActive=!1,this.resizeNorthActive=!1,this.resizeSouthActive=!1,this.resizeOffsetWidth=null,this.resizeOffsetHeight=null,this.resizeOnMouseUp=null,this.resizeOnMouseMove=null,this.resizeOnMouseLeave=null,this.minWidth=0,this.minHeight=0,this.initUI();var c=this,d=function(a){c.parentContainer.bringToFront(c)},e=this.getElement();e.addEventListener("mousedown",d),this.onShow=function(){c.show()},this.onHide=function(){c.isShowing=!1};var f=this.parentContainer.getEventManager();f.addListener(hax.visiui.ParentContainer.CONTENT_SHOWN,this.onShow),f.addListener(hax.visiui.ParentContainer.CONTENT_HIDDEN,this.onHide)},hax.core.util.mixin(hax.visiui.WindowFrame,hax.core.EventManager),hax.visiui.WindowFrame.MINIMIZED=-1,hax.visiui.WindowFrame.NORMAL=0,hax.visiui.WindowFrame.MAXIMIZED=1,hax.visiui.WindowFrame.MINIMIZE_CMD_IMAGE="/minimize.png",hax.visiui.WindowFrame.RESTORE_CMD_IMAGE="/restore.png",hax.visiui.WindowFrame.MAXIMIZE_CMD_IMAGE="/maximize.png",hax.visiui.WindowFrame.CLOSE_CMD_IMAGE="/close.png",hax.visiui.WindowFrame.MENU_IMAGE="/hamburger.png",hax.visiui.WindowFrame.RESIZE_LOCATION_SIZE=10,hax.visiui.WindowFrame.RESIZE_TOLERANCE=5,hax.visiui.WindowFrame.RESIZE_EAST=1,hax.visiui.WindowFrame.RESIZE_WEST=2,hax.visiui.WindowFrame.RESIZE_SOUTH=4,hax.visiui.WindowFrame.RESIZE_NORTH=8,hax.visiui.WindowFrame.RESIZE_NE=hax.visiui.WindowFrame.RESIZE_NORTH+hax.visiui.WindowFrame.RESIZE_EAST,hax.visiui.WindowFrame.RESIZE_NW=hax.visiui.WindowFrame.RESIZE_NORTH+hax.visiui.WindowFrame.RESIZE_WEST,hax.visiui.WindowFrame.RESIZE_SE=hax.visiui.WindowFrame.RESIZE_SOUTH+hax.visiui.WindowFrame.RESIZE_EAST,hax.visiui.WindowFrame.RESIZE_SW=hax.visiui.WindowFrame.RESIZE_SOUTH+hax.visiui.WindowFrame.RESIZE_WEST,hax.visiui.WindowFrame.DEFAULT_WINDOW_HEIGHT=300,hax.visiui.WindowFrame.DEFAULT_WINDOW_WIDTH=300,hax.visiui.WindowFrame.DEFAULT_TITLE_BAR_CLASS="visiui_win_titleBarClass",hax.visiui.WindowFrame.DEFAULT_FRAME_COLOR_CLASS="visiui_win_windowColorClass",hax.visiui.WindowFrame.TITLE_BAR_LEFT_STYLE={display:"inline",width:"100%"},hax.visiui.WindowFrame.TITLE_BAR_RIGHT_STYLE={"float":"right",display:"inline"},hax.visiui.WindowFrame.TITLE_STYLE={display:"inline-block",cursor:"default","font-weight":"bold",color:"darkblue"},hax.visiui.WindowFrame.COMMAND_BUTTON_STYLE={display:"inline-block",marginRight:"3px"},hax.visiui.WindowFrame.prototype.getTitle=function(a){return this.title},hax.visiui.WindowFrame.prototype.setTitle=function(a){null!==a&&void 0!==a&&0!==a.length||(a="&nbsp;"),this.title=a,this.titleElement||(this.titleElement=document.createElement("div"),hax.visiui.applyStyle(this.titleElement,hax.visiui.WindowFrame.TITLE_STYLE)),this.titleElement.innerHTML=a,this.titleBarLeftElements.appendChild(this.titleElement)},hax.visiui.WindowFrame.prototype.getMenu=function(){if(!this.menu){this.menu=hax.visiui.Menu.createMenuFromImage(hax.visiui.getResourcePath(hax.visiui.WindowFrame.MENU_IMAGE));var a=this.titleBarLeftElements.firstChild;a?this.titleBarLeftElements.insertBefore(this.menu.getElement(),a):this.titleBarLeftElements.appendChild(this.menu.getElement())}return this.menu},hax.visiui.WindowFrame.prototype.loadHeaders=function(a){if(hax.core.util.removeAllChildren(this.headerElement),a.length>0)for(var b=0;b<a.length;b++)this.headerElement.appendChild(a[b])},hax.visiui.WindowFrame.prototype.changeParent=function(a){this.hide();var b=this.parentContainer,c=b.getEventManager();c.removeListener(hax.visiui.ParentContainer.CONTENT_SHOWN,this.onShow),c.removeListener(hax.visiui.ParentContainer.CONTENT_HIDDEN,this.onHide),this.parentContainer=a,this.parentElement=a.getContainerElement();var d=a.getEventManager();d.addListener(hax.visiui.ParentContainer.CONTENT_SHOWN,this.onShow),d.addListener(hax.visiui.ParentContainer.CONTENT_HIDDEN,this.onHide),this.show()},hax.visiui.WindowFrame.prototype.show=function(){this.isShowing||(this.parentContainer.addWindow(this),this.parentContainer.getContentIsShowing()&&(this.isShowing=!0,this.frameShown(),void 0!==this.coordinateInfo.height&&this.updateCoordinates()))},hax.visiui.WindowFrame.prototype.hide=function(){this.parentContainer.removeWindow(this),this.isShowing&&(this.isShowing=!1,this.frameHidden())},hax.visiui.WindowFrame.prototype.deleteWindow=function(){var a=this.parentContainer.getEventManager();a.removeListener(hax.visiui.ParentContainer.CONTENT_SHOWN,this.onShow),a.removeListener(hax.visiui.ParentContainer.CONTENT_HIDDEN,this.onHide),this.hide()},hax.visiui.WindowFrame.prototype.getIsShowing=function(){return this.isShowing},hax.visiui.WindowFrame.prototype.getContentIsShowing=function(){return this.isShowing&&this.windowState!=hax.visiui.WindowFrame.MINIMIZED},hax.visiui.WindowFrame.prototype.setPosition=function(a,b){a<0&&(a=0),b<0&&(b=0),this.coordinateInfo.x=a,this.coordinateInfo.y=b,this.updateCoordinates()},hax.visiui.WindowFrame.prototype.setSize=function(a,b){this.coordinateInfo.width=a,this.coordinateInfo.height=b,this.updateCoordinates()},hax.visiui.WindowFrame.prototype.fitToContent=function(a){var b=this.body.offsetWidth,c=this.body.offsetHeight,d=a.offsetWidth,e=a.offsetHeight,f=this.coordinateInfo.width+d-b+hax.visiui.WindowFrame.FIT_WIDTH_BUFFER,g=this.coordinateInfo.height+e-c+hax.visiui.WindowFrame.FIT_HEIGHT_BUFFER;this.setSize(f,g)},hax.visiui.WindowFrame.prototype.centerInParent=function(){var a=this.parentContainer.getCenterOnPagePosition(this);this.setPosition(a[0],a[1])},hax.visiui.WindowFrame.FIT_HEIGHT_BUFFER=20,hax.visiui.WindowFrame.FIT_WIDTH_BUFFER=20,hax.visiui.WindowFrame.prototype.getCoordinateInfo=function(){return this.coordinateInfo},hax.visiui.WindowFrame.prototype.setCoordinateInfo=function(a){this.coordinateInfo=a,this.updateCoordinates()},hax.visiui.WindowFrame.prototype.getWindowState=function(){return this.windowState},hax.visiui.WindowFrame.prototype.setWindowState=function(a){switch(a){case hax.visiui.WindowFrame.NORMAL:this.restoreContent();break;case hax.visiui.WindowFrame.MINIMIZED:this.minimizeContent();break;case hax.visiui.WindowFrame.MAXIMIZED:this.maximizeContent();break;default:alert("Unknown window state: "+a)}},hax.visiui.WindowFrame.prototype.getElement=function(){return this.frame},hax.visiui.WindowFrame.prototype.getBody=function(){return this.body},hax.visiui.WindowFrame.prototype.getParent=function(){return this.parentContainer},hax.visiui.WindowFrame.prototype.setContent=function(a){for(;this.body.firstChild;)this.body.removeChild(this.body.firstChild);this.content=a,this.content&&this.body.appendChild(this.content)},hax.visiui.WindowFrame.prototype.setZIndex=function(a){this.frame.style.zIndex=String(a)},hax.visiui.WindowFrame.prototype.addTitleBarElement=function(a){this.titleBarLeftElements.appendChild(a)},hax.visiui.WindowFrame.prototype.removeTitleBarElement=function(a){this.titleBarLeftElements.appendRemove(a)},hax.visiui.WindowFrame.prototype.addRightTitleBarElement=function(a){this.titleBarRightElements.firstChild?this.titleBarRightElements.insertBefore(a,this.titleBarRightElements.firstChild):this.titleBarRightElements.appendChild(a)},hax.visiui.WindowFrame.prototype.removeRightTitleBarElement=function(a){this.titleBarRightElements.appendRemove(a)},hax.visiui.WindowFrame.prototype.moveMouseDown=function(a){this.windowState!==hax.visiui.WindowFrame.MAXIMIZED&&this.parentElement&&(this.windowDragActive=!0,this.moveOffsetX=a.clientX-this.frame.offsetLeft,this.moveOffsetY=a.clientY-this.frame.offsetTop,this.parentElement.addEventListener("mousemove",this.moveOnMouseMove),this.parentElement.addEventListener("mouseleave",this.moveOnMouseLeave),this.parentElement.addEventListener("mouseup",this.moveOnMouseUp))},hax.visiui.WindowFrame.prototype.moveMouseMove=function(a){if(this.windowDragActive){var b=a.clientX-this.moveOffsetX;b<0&&(b=0);var c=a.clientY-this.moveOffsetY;c<0&&(c=0),this.coordinateInfo.x=b,this.coordinateInfo.y=c,this.updateCoordinates()}},hax.visiui.WindowFrame.prototype.moveMouseUp=function(a){this.endMove()},hax.visiui.WindowFrame.prototype.moveMouseLeave=function(a){this.endMove()},hax.visiui.WindowFrame.prototype.resizeMouseDown=function(a,b){this.windowState!==hax.visiui.WindowFrame.MAXIMIZED&&b&&(b&hax.visiui.WindowFrame.RESIZE_EAST?(this.resizeEastActive=!0,this.resizeOffsetWidth=a.clientX-this.frame.clientWidth):b&hax.visiui.WindowFrame.RESIZE_WEST&&(this.resizeWestActive=!0,this.resizeOffsetWidth=a.clientX+this.frame.clientWidth,this.moveOffsetX=a.clientX-this.frame.offsetLeft),b&hax.visiui.WindowFrame.RESIZE_SOUTH?(this.resizeSouthActive=!0,this.resizeOffsetHeight=a.clientY-this.frame.clientHeight):b&hax.visiui.WindowFrame.RESIZE_NORTH&&(this.resizeNorthActive=!0,this.resizeOffsetHeight=a.clientY+this.frame.clientHeight,this.moveOffsetY=a.clientY-this.frame.offsetTop),this.parentElement.addEventListener("mouseup",this.resizeOnMouseUp),this.parentElement.addEventListener("mousemove",this.resizeOnMouseMove),this.parentElement.addEventListener("mouseleave",this.resizeOnMouseLeave))},hax.visiui.WindowFrame.prototype.resizeMouseMove=function(a){var b,c,d,e,f=!1;if(this.resizeEastActive){if(c=a.clientX-this.resizeOffsetWidth,c<this.minWidth)return;this.coordinateInfo.width=c,f=!0}else if(this.resizeWestActive){if(c=this.resizeOffsetWidth-a.clientX,c<this.minWidth)return;d=a.clientX-this.moveOffsetX,d<0&&(d=0),this.coordinateInfo.width=c,this.coordinateInfo.x=d,f=!0}if(this.resizeSouthActive){if(b=a.clientY-this.resizeOffsetHeight,b<this.minHeight)return;this.coordinateInfo.height=b,f=!0}else if(this.resizeNorthActive){if(b=this.resizeOffsetHeight-a.clientY,b<this.minHeight)return;e=a.clientY-this.moveOffsetY,e<0&&(e=0),this.coordinateInfo.height=b,this.coordinateInfo.y=e,f=!0}f&&this.updateCoordinates()},hax.visiui.WindowFrame.prototype.resizeMouseUp=function(a){this.endResize()},hax.visiui.WindowFrame.prototype.resizeMouseLeave=function(a){this.endResize()},hax.visiui.WindowFrame.prototype.endMove=function(a){this.windowDragActive=!1,this.parentElement.removeEventListener("mousemove",this.moveOnMouseMove),this.parentElement.removeEventListener("mouseup",this.moveOnMouseUp)},hax.visiui.WindowFrame.prototype.endResize=function(){this.resizeEastActive=!1,this.resizeWestActive=!1,this.resizeSouthActive=!1,this.resizeNorthActive=!1,this.parentElement.removeEventListener("mouseup",this.resizeOnMouseUp),this.parentElement.removeEventListener("mousemove",this.resizeOnMouseMove)},hax.visiui.WindowFrame.prototype.minimizeContent=function(){this.body.style.display="none";var a=this.windowState===hax.visiui.WindowFrame.MINIMIZED;this.windowState===hax.visiui.WindowFrame.MAXIMIZED;this.windowState=hax.visiui.WindowFrame.MINIMIZED,this.updateCoordinates(),this.setMinMaxButtons(),a||this.contentOnlyHidden()},hax.visiui.WindowFrame.prototype.restoreContent=function(){this.body.style.display="";var a=this.windowState===hax.visiui.WindowFrame.MINIMIZED;this.windowState===hax.visiui.WindowFrame.MAXIMIZED;this.windowState=hax.visiui.WindowFrame.NORMAL,this.updateCoordinates(),this.setMinMaxButtons(),a&&this.contentOnlyShown()},hax.visiui.WindowFrame.prototype.maximizeContent=function(){this.body.style.display="";var a=this.windowState===hax.visiui.WindowFrame.MINIMIZED;this.windowState=hax.visiui.WindowFrame.MAXIMIZED,this.updateCoordinates(),this.setMinMaxButtons(),a&&this.contentOnlyShown()},hax.visiui.WindowFrame.prototype.setMinMaxButtons=function(){this.minimizeButton&&(this.windowState==hax.visiui.WindowFrame.MINIMIZED?this.minimizeButton.style.display="none":this.minimizeButton.style.display=""),this.restoreButton&&(this.windowState==hax.visiui.WindowFrame.NORMAL?this.restoreButton.style.display="none":this.restoreButton.style.display=""),this.maximizeButton&&(this.windowState==hax.visiui.WindowFrame.MAXIMIZED?this.maximizeButton.style.display="none":this.maximizeButton.style.display="")},hax.visiui.WindowFrame.prototype.updateCoordinates=function(){this.windowState===hax.visiui.WindowFrame.MAXIMIZED?(this.frame.style.left="0px",this.frame.style.top="0px",this.frame.style.height="100%",this.frame.style.width="100%"):this.windowState===hax.visiui.WindowFrame.NORMAL?(this.frame.style.left=this.coordinateInfo.x+"px",this.frame.style.top=this.coordinateInfo.y+"px",void 0!==this.coordinateInfo.height?this.frame.style.height=this.coordinateInfo.height+"px":this.frame.style.height=hax.visiui.WindowFrame.DEFAULT_WINDOW_HEIGHT+"px",void 0!==this.coordinateInfo.width?this.frame.style.width=this.coordinateInfo.width+"px":this.frame.style.width=hax.visiui.WindowFrame.DEFAULT_WINDOW_WIDTH+"px"):this.windowState===hax.visiui.WindowFrame.MINIMIZED&&(this.frame.style.left=this.coordinateInfo.x+"px",this.frame.style.top=this.coordinateInfo.y+"px",this.frame.style.height="0px",this.frame.style.width="0px")},hax.visiui.WindowFrame.prototype.frameShown=function(){this.dispatchEvent(hax.visiui.ParentContainer.CONTENT_SHOWN,this)},hax.visiui.WindowFrame.prototype.frameHidden=function(){this.dispatchEvent(hax.visiui.ParentContainer.CONTENT_HIDDEN,this)},hax.visiui.WindowFrame.prototype.contentOnlyShown=function(){this.dispatchEvent(hax.visiui.ParentContainer.CONTENT_SHOWN,this)},hax.visiui.WindowFrame.prototype.contentOnlyHidden=function(){this.dispatchEvent(hax.visiui.ParentContainer.CONTENT_HIDDEN,this)},hax.visiui.WindowFrame.prototype.initUI=function(){var a,b,c;a=document.createElement("table"),a.className="visiui_win_main",this.frame=a,b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_topLeft",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_WEST|hax.visiui.WindowFrame.RESIZE_NORTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_top",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_NORTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_topRight",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_EAST|hax.visiui.WindowFrame.RESIZE_NORTH),b.appendChild(c),b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_left",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_WEST),c.rowSpan=3,b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass,this.titleBarCell=c,b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_right",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_EAST),c.rowSpan=3,b.appendChild(c),b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className="visiui_win_headerCell",this.headerCell=c,b.appendChild(c),b=document.createElement("tr"),b.className="visiui_win_bodyRow",a.appendChild(b),c=document.createElement("td"),
c.className="visiui_win_bodyCell",this.bodyCell=c,b.appendChild(c),b=document.createElement("tr"),a.appendChild(b),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_bottomLeft",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_WEST|hax.visiui.WindowFrame.RESIZE_SOUTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_bottom",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_SOUTH),b.appendChild(c),c=document.createElement("td"),c.className=this.options.frameColorClass+" visiui_win_bottomRight",this.addResizeHandlers(c,hax.visiui.WindowFrame.RESIZE_EAST|hax.visiui.WindowFrame.RESIZE_SOUTH),b.appendChild(c),this.createTitleBar(),this.createHeaderContainer(),this.createBody()},hax.visiui.WindowFrame.prototype.addResizeHandlers=function(a,b){if(this.options.resizable){var c=this;a.onmousedown=function(a){c.resizeMouseDown(a,b)},this.resizeOnMouseMove||(this.resizeOnMouseMove=function(a){c.resizeMouseMove(a)},this.resizeOnMouseUp=function(a){c.resizeMouseUp(a)},this.resizeOnMouseLeave=function(a){c.resizeMouseLeave(a)})}},hax.visiui.WindowFrame.prototype.createTitleBar=function(){this.titleBar=document.createElement("div"),this.titleBar.className=this.options.titleBarClass,this.titleBarLeftElements=document.createElement("div"),hax.visiui.applyStyle(this.titleBarLeftElements,hax.visiui.WindowFrame.TITLE_BAR_LEFT_STYLE),this.titleBar.appendChild(this.titleBarLeftElements),this.titleBarRightElements=document.createElement("div"),hax.visiui.applyStyle(this.titleBarRightElements,hax.visiui.WindowFrame.TITLE_BAR_RIGHT_STYLE),this.titleBar.appendChild(this.titleBarRightElements);var a=this;this.options.minimizable&&(this.minimizeButton=document.createElement("img"),hax.visiui.applyStyle(this.minimizeButton,hax.visiui.WindowFrame.COMMAND_BUTTON_STYLE),this.minimizeButton.src=hax.visiui.getResourcePath(hax.visiui.WindowFrame.MINIMIZE_CMD_IMAGE),this.minimizeButton.onclick=function(){a.minimizeContent()},this.titleBarRightElements.appendChild(this.minimizeButton)),(this.options.minimizable||this.options.maximizable)&&(this.restoreButton=document.createElement("img"),hax.visiui.applyStyle(this.restoreButton,hax.visiui.WindowFrame.COMMAND_BUTTON_STYLE),this.restoreButton.src=hax.visiui.getResourcePath(hax.visiui.WindowFrame.RESTORE_CMD_IMAGE),this.restoreButton.onclick=function(){a.restoreContent()},this.titleBarRightElements.appendChild(this.restoreButton)),this.options.maximizable&&(this.maximizeButton=document.createElement("img"),hax.visiui.applyStyle(this.maximizeButton,hax.visiui.WindowFrame.COMMAND_BUTTON_STYLE),this.maximizeButton.src=hax.visiui.getResourcePath(hax.visiui.WindowFrame.MAXIMIZE_CMD_IMAGE),this.maximizeButton.onclick=function(){a.maximizeContent()},this.titleBarRightElements.appendChild(this.maximizeButton)),this.windowState=hax.visiui.WindowFrame.NORMAL,this.setMinMaxButtons(),this.options.closable&&(this.closeButton=document.createElement("img"),hax.visiui.applyStyle(this.closeButton,hax.visiui.WindowFrame.COMMAND_BUTTON_STYLE),this.closeButton.src=hax.visiui.getResourcePath(hax.visiui.WindowFrame.CLOSE_CMD_IMAGE),this.closeButton.onclick=function(){a.hide()},this.titleBarRightElements.appendChild(this.closeButton)),this.setTitle(""),this.options.movable&&(this.titleBar.onmousedown=function(b){a.moveMouseDown(b)},this.moveOnMouseMove=function(b){a.moveMouseMove(b)},this.moveOnMouseUp=function(b){a.moveMouseUp(b)},this.moveOnMouseLeave=function(b){a.moveMouseLeave(b)}),this.titleBarCell.appendChild(this.titleBar)},hax.visiui.WindowFrame.prototype.createHeaderContainer=function(){this.headerElement=document.createElement("div"),this.headerElement.className="visiui_win_header",this.headerCell.appendChild(this.headerElement),this.loadHeaders([])},hax.visiui.WindowFrame.prototype.createBody=function(){this.body=document.createElement("div"),this.body.className="visiui_win_body",this.bodyCell.appendChild(this.body)},hax.visiui.SimpleParentContainer=function(a,b){hax.core.EventManager.init.call(this),hax.visiui.ParentContainer.init.call(this,a,this),this.isShowing=b},hax.core.util.mixin(hax.visiui.SimpleParentContainer,hax.core.EventManager),hax.core.util.mixin(hax.visiui.SimpleParentContainer,hax.visiui.ParentContainer),hax.visiui.SimpleParentContainer.prototype.getContentIsShowing=function(){return this.isShowing},hax.visiui.SimpleParentContainer.prototype.isShown=function(){this.isShowing=!0,this.dispatchEvent(hax.visiui.ParentContainer.CONTENT_SHOWN,this)},hax.visiui.SimpleParentContainer.prototype.isHidden=function(){this.isShowing=!1,this.dispatchEvent(hax.visiui.ParentContainer.CONTENT_HIDDEN,this)},hax.visiui.TabFrame=function(a,b){b||(b={}),b.tabBarColorClass&&b.activeTabColorClass||alert("The tabBarColorClass and  activeTabColorClass must be set in the options for tab frame!"),b.titleBarClass="",hax.core.EventManager.init.call(this),this.options=b,this.tabTable={},this.activeTab=null,this.tabFrameControl=document.createElement("div"),hax.visiui.applyStyle(this.tabFrameControl,hax.visiui.TabFrame.CONTAINER_STYLE),a.appendChild(this.tabFrameControl),this.tabFrame=document.createElement("div"),hax.visiui.applyStyle(this.tabFrame,hax.visiui.TabFrame.DISPLAY_FRAME_STYLE),this.tabFrameControl.appendChild(this.tabFrame),this.tabBar=document.createElement("div"),hax.visiui.applyStyle(this.tabBar,hax.visiui.TabFrame.TAB_BAR_STYLE),this.tabBar.className=this.options.tabBarColorClass,this.tabFrameControl.appendChild(this.tabBar),hax.visiui.ParentContainer.init.call(this,this.tabFrame,this)},hax.core.util.mixin(hax.visiui.TabFrame,hax.core.EventManager),hax.core.util.mixin(hax.visiui.TabFrame,hax.visiui.ParentContainer),hax.visiui.TabFrame.TAB_SHOWN="tabShown",hax.visiui.TabFrame.TABS_RESIZED="tabsResized",hax.visiui.TabFrame.CONTAINER_FRAME_MARGIN_PX=5,hax.visiui.TabFrame.CONTAINER_STYLE={position:"relative",display:"table",width:"100%",height:"100%",top:"0px",left:"0px"},hax.visiui.TabFrame.DISPLAY_FRAME_STYLE={position:"relative",display:"table-row",width:"100%",height:"100%",top:"0px",left:"0px",backgroundColor:"white",borderBottomWidth:" 0px"},hax.visiui.TabFrame.TAB_BAR_STYLE={position:"relative",display:"table-row",width:"100%",margin:"0px",border:" 1px solid gray",borderTopWidth:" 0px"},hax.visiui.TabFrame.TAB_BASE_STYLE={display:"inline-block",cursor:" default",border:" 1px solid black",padding:"2px"},hax.visiui.TabFrame.TAB_INACTIVE_STYLE={display:"inline-block",cursor:" default",border:" 1px solid black",borderTopColor:"",padding:"2px"},hax.visiui.TabFrame.TAB_ACTIVE_STYLE={display:"inline-block",cursor:" default",border:" 1px solid black",borderTopColor:"white",padding:"2px"},hax.visiui.TabFrame.prototype.getElement=function(){return this.tabFrameControl},hax.visiui.TabFrame.prototype.getTab=function(a){var b=this.tabTable[a];return b?b.tabDisplay:null},hax.visiui.TabFrame.prototype.addTab=function(a){if(this.tabTable[a])return alert("There is already a tab with this name!"),null;var b=new hax.visiui.Tab(a,this);this.tabFrame.appendChild(b.getContainerElement());var c=document.createElement("div");hax.visiui.applyStyle(c,hax.visiui.TabFrame.TAB_BASE_STYLE),c.innerHTML=a,this.tabBar.appendChild(c);var d=this;c.onclick=function(){d.setActiveTab(a)},c.onmousedown=function(a){a.preventDefault()};var e={};return e.tabDisplay=b,e.tabLabel=c,this.tabTable[a]=e,null==this.activeTab&&(this.activeTab=a),this.updateTabDisplay(),b},hax.visiui.TabFrame.prototype.removeTab=function(a){var b=this.tabTable[a];if(b){if(this.tabFrame.removeChild(b.tabDisplay.getContainerElement()),this.tabBar.removeChild(b.tabLabel),delete this.tabTable[a],this.activeTab==a){this.activeTab=null;for(var c in this.tabTable){this.activeTab=c;break}}this.updateTabDisplay()}},hax.visiui.TabFrame.prototype.setActiveTab=function(a){this.activeTab=a,this.updateTabDisplay()},hax.visiui.TabFrame.prototype.getActiveTabTitle=function(){return this.activeTab},hax.visiui.TabFrame.prototype.updateTabDisplay=function(){var a;for(a in this.tabTable){var b=this.tabTable[a];a==this.activeTab?(b.tabDisplay.getContainerElement().style.display="",hax.visiui.applyStyle(b.tabLabel,hax.visiui.TabFrame.TAB_ACTIVE_STYLE),b.tabLabel.className=this.options.activeTabColorClass,this.dispatchEvent(hax.visiui.TabFrame.TAB_SHOWN,this.activeTab)):(b.tabDisplay.getContainerElement().style.display="none",hax.visiui.applyStyle(b.tabLabel,hax.visiui.TabFrame.TAB_INACTIVE_STYLE),b.tabLabel.className=this.options.tabBarColorClass)}},hax.visiui.Tab=function(a,b){var c=document.createElement("div");hax.core.EventManager.init.call(this),hax.visiui.ParentContainer.init.call(this,c,this),hax.visiui.ParentHighlighter.init.call(this,c),this.name=a,this.isShowing=!1,hax.visiui.applyStyle(c,hax.visiui.Tab.TAB_WINDOW_STYLE),this.displayFrame=c;var d=this;b.addListener(hax.visiui.TabFrame.TABS_RESIZED,function(){d.dispatchEvent(hax.visiui.WindowFrame.RESIZED,this)}),b.addListener(hax.visiui.TabFrame.TAB_SHOWN,function(a){a==d.name?(d.isShowing=!0,d.dispatchEvent(hax.visiui.ParentContainer.CONTENT_SHOWN,d)):(d.isShowing=!1,d.dispatchEvent(hax.visiui.ParentContainer.CONTENT_HIDDEN,d))})},hax.core.util.mixin(hax.visiui.Tab,hax.core.EventManager),hax.core.util.mixin(hax.visiui.Tab,hax.visiui.ParentContainer),hax.core.util.mixin(hax.visiui.Tab,hax.visiui.ParentHighlighter),hax.visiui.Tab.TAB_WINDOW_STYLE={top:"0px",left:"0px",height:"100%",position:"relative",backgroundColor:"white",overflow:"auto"},hax.visiui.Tab.prototype.getContentIsShowing=function(){return this.isShowing},hax.visiui.Menu={},hax.visiui.Menu.initialized=!1,hax.visiui.Menu.activeMenu=null,hax.visiui.Menu.createMenu=function(a){var b=document.createElement("div");return b.innerHTML=a,new hax.visiui.MenuHeader(b)},hax.visiui.Menu.createMenuFromImage=function(a){var b=document.createElement("img");b.src=a;var c=document.createElement("div");return c.appendChild(b),new hax.visiui.MenuHeader(c)},hax.visiui.Menu.showContextMenu=function(a,b){a.setPosition(b.clientX,b.clientY,document.body),b.preventDefault(),hax.visiui.Menu.show(a)},hax.visiui.Menu.menuHeaderPressed=function(a){hax.visiui.Menu.activeMenu?hax.visiui.Menu.hideActiveMenu():hax.visiui.Menu.show(a.getMenuBody())},hax.visiui.Menu.menuHeaderEntered=function(a){hax.visiui.Menu.activeMenu&&!hax.visiui.Menu.activeMenu.getIsContext()&&hax.visiui.Menu.show(a.getMenuBody())},hax.visiui.Menu.nonMenuPressed=function(){hax.visiui.Menu.activeMenu&&hax.visiui.Menu.hideActiveMenu()},hax.visiui.Menu.show=function(a){hax.visiui.Menu.activeMenu&&hax.visiui.Menu.hideActiveMenu();var b=a.getParentElement(),c=a.getMenuElement();b&&c&&(b.appendChild(c),hax.visiui.Menu.activeMenu=a)},hax.visiui.Menu.hideActiveMenu=function(){if(hax.visiui.Menu.activeMenu){var a=hax.visiui.Menu.activeMenu.getParentElement(),b=hax.visiui.Menu.activeMenu.getMenuElement(),c=hax.visiui.Menu.activeMenu.getMenuHeader();a&&b&&(a.removeChild(b),hax.visiui.Menu.activeMenu=null),c&&c.restoreNormalAppearance()}},hax.visiui.Menu.nonMenuMouseHandler=null,hax.visiui.Menu.initialize=function(){window.addEventListener("mousedown",hax.visiui.Menu.nonMenuPressed),hax.visiui.Menu.initialized=!0},hax.visiui.Menu.deinitialize=function(){window.removeEventListener("mousedown",hax.visiui.Menu.nonMenuPressed),hax.visiui.Menu.initialized=!1},hax.visiui.MenuHeader=function(a){hax.visiui.Menu.initialized||hax.visiui.Menu.initialize(),this.domElement=a,this.menuBody=new hax.visiui.MenuBody,this.initHeadingElement(),this.menuBody.attachToMenuHeader(this)},hax.visiui.MenuHeader.MENU_HEADING_BASE_STYLE={display:"inline-block",position:"relative",cursor:" default",overflow:"visible"},hax.visiui.MenuHeader.MENU_HEADING_NORMAL_STYLE={border:"",backgroundColor:"",padding:"2px"},hax.visiui.MenuHeader.MENU_HEADING_HOVER_STYLE={backgroundColor:"lightgray",padding:"2px"},hax.visiui.MenuHeader.prototype.getElement=function(){return this.domElement},hax.visiui.MenuHeader.prototype.getMenuBody=function(){return this.menuBody},hax.visiui.MenuHeader.prototype.addEventMenuItem=function(a,b,c,d){this.menuBody.addEventMenuItem(a,b,c,d)},hax.visiui.MenuHeader.prototype.addCallbackMenuItem=function(a,b){this.menuBody.addCallbackMenuItem(a,b)},hax.visiui.MenuHeader.prototype.addMenuItem=function(a){this.menuBody.addMenuItem(a)},hax.visiui.MenuHeader.prototype.setMenuItems=function(a){this.menuBody.setMenuItems(a)},hax.visiui.MenuHeader.prototype.removeMenuItem=function(a){this.menuBody.removeMenuItem(a)},hax.visiui.MenuHeader.prototype.initHeadingElement=function(){hax.visiui.applyStyle(this.domElement,hax.visiui.MenuHeader.MENU_HEADING_BASE_STYLE),hax.visiui.applyStyle(this.domElement,hax.visiui.MenuHeader.MENU_HEADING_NORMAL_STYLE);var a=this;this.domElement.onmousedown=function(b){hax.visiui.Menu.menuHeaderPressed(a),b.stopPropagation()},this.domElement.onmouseenter=function(b){hax.visiui.applyStyle(a.domElement,hax.visiui.MenuHeader.MENU_HEADING_HOVER_STYLE),hax.visiui.Menu.menuHeaderEntered(a)},this.domElement.onmouseleave=function(b){hax.visiui.applyStyle(a.domElement,hax.visiui.MenuHeader.MENU_HEADING_NORMAL_STYLE)}},hax.visiui.MenuHeader.prototype.restoreNormalAppearance=function(){hax.visiui.applyStyle(this.domElement,hax.visiui.MenuHeader.MENU_HEADING_NORMAL_STYLE)},hax.visiui.MenuBody=function(){hax.visiui.Menu.initialized||hax.visiui.Menu.initialize(),this.menuDiv=null,this.parentElement=null,this.menuItems={},this.createMenuElement(),this.menuHeader=null},hax.visiui.MenuBody.MENU_STYLE={overflow:"visible",position:"absolute",top:"100%",left:"0%",zIndex:"2000",border:"1px solid lightgray",backgroundColor:"white"},hax.visiui.MenuBody.MENU_ITEM_BASE_STYLE={cursor:"default",display:"table"},hax.visiui.MenuBody.MENU_ITEM_NORMAL_STYLE={backgroundColor:"",padding:"2px"},hax.visiui.MenuBody.MENU_ITEM_HOVER_STYLE={backgroundColor:"lightgray",padding:"2px"},hax.visiui.MenuBody.convertSpacesForHtml=function(a){return a.replace(/ /g,"&nbsp;")},hax.visiui.MenuBody.prototype.getMenuElement=function(){return this.menuDiv},hax.visiui.MenuBody.prototype.getParentElement=function(){return this.parentElement},hax.visiui.MenuBody.prototype.getMenuHeader=function(){return this.menuHeader},hax.visiui.MenuBody.prototype.getIsContext=function(){return null==this.menuHeader},hax.visiui.MenuBody.prototype.attachToMenuHeader=function(a){this.parentElement=a.getElement(),this.menuDiv.style.left="0%",this.menuDiv.style.top="100%",this.menuHeader=a},hax.visiui.MenuBody.prototype.setPosition=function(a,b,c){this.parentElement=c,c.appendChild(this.menuDiv);var d=c.offsetWidth,e=c.offsetHeight,f=this.menuDiv.clientWidth,g=this.menuDiv.clientHeight;c.appendChild(this.menuDiv),a+f>d&&a>d/2?this.menuDiv.style.left=a-f+"px":this.menuDiv.style.left=a+"px",b+g>e&&b>e/2?this.menuDiv.style.top=b-g+"px":this.menuDiv.style.top=b+"px"},hax.visiui.MenuBody.prototype.addEventMenuItem=function(a,b,c,d){var e={};e.title=a,e.eventName=b,e.eventData=c,e.eventManager=d,this.addMenuItem(e)},hax.visiui.MenuBody.prototype.addCallbackMenuItem=function(a,b){var c={};c.title=a,c.callback=b,this.addMenuItem(c)},hax.visiui.MenuBody.prototype.addMenuItem=function(a){a.element=document.createElement("div"),hax.visiui.applyStyle(a.element,hax.visiui.MenuBody.MENU_ITEM_NORMAL_STYLE);var b=hax.visiui.MenuBody.convertSpacesForHtml(a.title);a.element.innerHTML=b,a.element.onmousedown=function(a){a.stopPropagation()},a.element.onmouseup=function(b){hax.visiui.Menu.hideActiveMenu(),a.eventName?a.eventManager.dispatchEvent(a.eventName,a.eventData):a.callback&&a.callback(),b.stopPropagation(),hax.visiui.applyStyle(a.element,hax.visiui.MenuBody.MENU_ITEM_NORMAL_STYLE)},a.element.onmouseenter=function(b){hax.visiui.applyStyle(a.element,hax.visiui.MenuBody.MENU_ITEM_HOVER_STYLE)},a.element.onmouseleave=function(b){hax.visiui.applyStyle(a.element,hax.visiui.MenuBody.MENU_ITEM_NORMAL_STYLE)},this.menuDiv.appendChild(a.element),this.menuItems[a.title]=a},hax.visiui.MenuBody.prototype.setMenuItems=function(a){for(var b=0;b<a.length;b++)this.addMenuItem(a[b])},hax.visiui.MenuBody.prototype.removeMenuItem=function(a){var b=this.menuItems[a];b&&(this.menuDiv.removeChild(b.element),delete this.menuItems[a])},hax.visiui.MenuBody.prototype.createMenuElement=function(){this.menuDiv=document.createElement("div"),hax.visiui.applyStyle(this.menuDiv,hax.visiui.MenuBody.MENU_STYLE)},hax.jsonedit={};var OBJECT_CONSTRUCTOR={}.constructor,ARRAY_CONSTRUCTOR=[].constructor,STRING_CONSTRUCTOR="".constructor,NUMBER_CONSTRUCTOR=(0).constructor,BOOLEAN_CONSTRUCTOR=(!0).constructor;hax.jsonedit.getObjectType=function(a){return null==a?"value":a.constructor==OBJECT_CONSTRUCTOR?"object":a.constructor==ARRAY_CONSTRUCTOR?"array":"value"},hax.jsonedit.getValueType=function(a){return null==a?"null":a.constructor==STRING_CONSTRUCTOR?"string":a.constructor==NUMBER_CONSTRUCTOR?"number":a.constructor==BOOLEAN_CONSTRUCTOR?"boolean":"other"},hax.jsonedit.isBoolString=function(a){return"false"===a||"true"===a},hax.jsonedit.isNullString=function(a){return"null"===a},hax.jsonedit.canBeConvertedToNonString=function(a){return isFinite(a)||hax.jsonedit.isBoolString(a)||hax.jsonedit.isNullString(a)},hax.jsonedit.stringToNonString=function(stringValue){var stringToValueCode="value = "+stringValue,value;try{return eval(stringToValueCode),value}catch(error){return stringValue}};var PIXELS_PER_INDENT=10;hax.jsonedit.createIndentElement=function(a){var b=document.createElement("div");return b.className="indentCell",b.style.width=PIXELS_PER_INDENT*a+"px",b},hax.jsonedit.createObjectDelimiter=function(a){var b=document.createElement("div");return b.className="objectDelimCell",b.innerHTML=a,b},hax.jsonedit.createExpandButton=function(a){var b=document.createElement("div");return b.className="buttonCell",b.innerHTML="+",b.onclick=function(){a.setExpanded(!0)},b},hax.jsonedit.createContractButton=function(a){var b=document.createElement("div");return b.className="buttonCell",b.innerHTML="-",b.onclick=function(){a.setExpanded(!1)},b},hax.jsonedit.KeyEntry=function(a,b,c,d,e,f,g){this.editArea=a,this.key=c,this.type=d,this.data=e,this.isEditable=f,this.indentLevel=b.getIndentLevel()+1,this.parentValue=b,this.isVirtual=g,this.body=null,this.keyEditObject=null,this.valueEntry=null,this.createBody(this.data)},hax.jsonedit.KeyEntry.prototype.setKey=function(a){this.key=a,this.keyEditObject.setValue(a)},hax.jsonedit.KeyEntry.prototype.getInitialKey=function(){return this.key},hax.jsonedit.KeyEntry.prototype.getCurrentKey=function(){return this.keyEditObject.getValue()},hax.jsonedit.KeyEntry.prototype.getCurrentValue=function(){return this.valueEntry.getCurrentValue()},hax.jsonedit.KeyEntry.prototype.getElement=function(){return this.body},hax.jsonedit.KeyEntry.prototype.getParentValueObject=function(){return this.parentValue},hax.jsonedit.KeyEntry.prototype.getIndentLevel=function(){return this.indentLevel},hax.jsonedit.KeyEntry.prototype.setIsVirtual=function(a){this.isVirtual=a,this.keyEditObject.setIsVirtual(a),this.valueEntry.setIsVirtual(a)},hax.jsonedit.KeyEntry.prototype.updateValueElements=function(){hax.core.util.removeAllChildren(this.body),this.formatBody()},hax.jsonedit.KeyEntry.prototype.createBody=function(a){this.body=document.createElement("div"),this.body.className="jsonBody",this.createKeyElement(),this.valueEntry=new hax.jsonedit.ValueEntry(this.editArea,this,a,this.isEditable,this.isVirtual),this.formatBody()},hax.jsonedit.KeyEntry.prototype.formatBody=function(){this.body.appendChild(hax.jsonedit.createIndentElement(this.indentLevel)),this.body.appendChild(this.keyEditObject.getElement());for(var a=this.valueEntry.getElementList(),b=0;b<a.length;b++)this.body.appendChild(a[b])},hax.jsonedit.KeyEntry.prototype.createKeyElement=function(){var a=this.type===hax.jsonedit.EditField.FIELD_TYPE_KEY&&this.isEditable;if(this.keyEditObject=new hax.jsonedit.EditField(this.key,this.type,a,this.isVirtual),a){var b=this,c=function(a){b.isVirtual&&b.parentValue.makeVirtualEntryReal(),b.editArea.valueEdited()};this.keyEditObject.setOnEditCallback(c);var d=function(a){b.navigateCells(a)};this.keyEditObject.setNavCallback(d)}},hax.jsonedit.KeyEntry.prototype.navigateCells=function(a){this.parentValue&&this.parentValue.navigateChildren(this,!0,a)},hax.jsonedit.KeyEntry.prototype.loadContextMenu=function(a,b){var c=this,d=this.parentValue,e=this.keyEditObject.getElement(),f=this.valueEntry,g=f.getType(),h=this.isVirtual;if(e.oncontextmenu=function(e){if(e.preventDefault(),e.stopPropagation(),c.isEditable){var i=new hax.visiui.MenuBody;h||(i.addCallbackMenuItem("Insert Above",function(){d.insertElement("","",b)}),i.addCallbackMenuItem("Insert Below",function(){d.insertElement("","",b+1)}),b>0&&i.addCallbackMenuItem("Move Up",function(){d.moveChildKeyToNextIndex(b-1)}),b<a-1&&i.addCallbackMenuItem("Move Down",function(){d.moveChildKeyToNextIndex(b)}),c.isVirtual||i.addCallbackMenuItem("Delete Entry",function(){d.deleteChildElement(c)}),"value"==g?(i.addCallbackMenuItem("Convert To Object",function(){f.valueToObject()}),i.addCallbackMenuItem("Convert To Array",function(){f.valueToArray()}),f.convertibleToNumber()&&i.addCallbackMenuItem("Convert To Number",function(){f.valueToNonString()}),f.convertibleToBool()&&i.addCallbackMenuItem("Convert To Boolean",function(){f.valueToNonString()}),f.convertibleToNull()&&i.addCallbackMenuItem("Convert To Null",function(){f.valueToNonString()}),f.convertibleToString()&&i.addCallbackMenuItem("Convert To String",function(){f.valueToString()})):"object"==g?(i.addCallbackMenuItem("Convert To Value",function(){f.convertToValue()}),i.addCallbackMenuItem("Convert To Array",function(){f.objectToArray()})):"array"==g&&(i.addCallbackMenuItem("Convert To Value",function(){f.convertToValue()}),i.addCallbackMenuItem("Convert To Object",function(){f.arrayToObject()}))),hax.visiui.Menu.showContextMenu(i,e)}},"value"==g){var i=this.valueEntry.getValueEditObject();i.getElement().oncontextmenu=e.oncontextmenu}},hax.jsonedit.KeyEntry.prototype.convertToKeyType=function(a){this.type!=hax.jsonedit.EditField.FIELD_TYPE_KEY&&(this.type=hax.jsonedit.EditField.FIELD_TYPE_KEY,this.key=String(a),this.createKeyElement(),hax.core.util.removeAllChildren(this.body),this.formatBody())},hax.jsonedit.KeyEntry.prototype.convertToIndexType=function(a){this.type!=hax.jsonedit.EditField.FIELD_TYPE_INDEX&&(this.type=hax.jsonedit.EditField.FIELD_TYPE_INDEX,this.key=a,this.createKeyElement(),hax.core.util.removeAllChildren(this.body),this.formatBody())},hax.jsonedit.ValueEntry=function(a,b,c,d,e){this.editArea=a,this.parent=b,this.data=c,this.isEditable=d,this.type=hax.jsonedit.getObjectType(c),this.indentLevel=b.getIndentLevel()+1,this.elementList=[],this.isVirtual=e,this.valueEditObject=null,this.childKeyEntries=[],this.virtualChildKey=null,this.listDiv=null,this.isExpanded=!0,this.expandedList=[],this.contractedList=[],"value"==this.type?this.createValueEntry(this.data):(this.createChildKeyEntries(this.data),this.updateChildKeys(),this.createElementList())},hax.jsonedit.ValueEntry.prototype.getInitialValue=function(){return this.data},hax.jsonedit.ValueEntry.prototype.getCurrentValue=function(){var a,b,c;if("value"==this.type)a=this.valueEditObject.getValue();else if("object"==this.type)for(a={},b=0;b<this.childKeyEntries.length;b++)c=this.childKeyEntries[b],a[c.getCurrentKey()]=c.getCurrentValue();else if("array"==this.type)for(a=[],b=0;b<this.childKeyEntries.length;b++)c=this.childKeyEntries[b],a[b]=c.getCurrentValue();return a},hax.jsonedit.ValueEntry.prototype.getType=function(){return this.type},hax.jsonedit.ValueEntry.prototype.setExpanded=function(a){this.isExpanded=a,this.doExpandContract()},hax.jsonedit.ValueEntry.prototype.getElementList=function(){return this.elementList},hax.jsonedit.ValueEntry.prototype.getValueEditObject=function(){return this.valueEditObject},hax.jsonedit.ValueEntry.prototype.getIndentLevel=function(){return this.indentLevel},hax.jsonedit.ValueEntry.prototype.setIsVirtual=function(a){this.isVirtual=a,this.valueEditObject.setIsVirtual(a)},hax.jsonedit.ValueEntry.prototype.navigateCells=function(a){var b=this.parent.getParentValueObject();b&&b.navigateChildren(this.parent,!1,a)},hax.jsonedit.ValueEntry.prototype.navigateChildren=function(a,b,c){var d,e=!1,f=0;if("array"==this.type?c==hax.jsonedit.EditField.DIRECTION_NEXT||c==hax.jsonedit.EditField.DIRECTION_DOWN?(d=!b,d&&(e=!1,f=1)):c==hax.jsonedit.EditField.DIRECTION_PREV||c==hax.jsonedit.EditField.DIRECTION_UP?(d=!b,d&&(e=!1,f=-1)):c!=hax.jsonedit.EditField.DIRECTION_RIGHT&&c!=hax.jsonedit.EditField.DIRECTION_LEFT||(d=!1):"object"==this.type&&(c==hax.jsonedit.EditField.DIRECTION_NEXT?(d=!0,e=!b,f=b?0:1):c==hax.jsonedit.EditField.DIRECTION_PREV?(d=!0,e=!b,f=b?-1:0):c==hax.jsonedit.EditField.DIRECTION_RIGHT?(d=b,d&&(e=!1,f=0)):c==hax.jsonedit.EditField.DIRECTION_LEFT?(d=!b,d&&(e=!0,f=0)):c==hax.jsonedit.EditField.DIRECTION_UP?(d=!0,e=b,f=-1):c==hax.jsonedit.EditField.DIRECTION_DOWN&&(d=!0,e=b,f=1)),d){var g,h,i=-1,j=null;if(g=a==this.virtualChildKey?this.childKeyEntries.length:this.childKeyEntries.indexOf(a),g>=0&&(i=g+f,i>=0&&i<this.childKeyEntries.length?j=this.childKeyEntries[i]:i==this.childKeyEntries.length&&(j=this.virtualChildKey)),j)if(e)h=j.keyEditObject;else{var k=j.valueEntry;"value"==k.getType()&&(h=k.valueEditObject)}h&&h.startEdit()}},hax.jsonedit.ValueEntry.prototype.insertElement=function(a,b,c){var d;void 0===c&&(c=this.childKeyEntries.length);var e;if(e=c>=this.childKeyEntries.length?this.virtualChildKey.getElement():this.childKeyEntries[c].getElement(),"object"==this.type)d=new hax.jsonedit.KeyEntry(this.editArea,this,a,"key",b,this.isEditable,(!1));else if("array"==this.type){d=new hax.jsonedit.KeyEntry(this.editArea,this,c,"index",b,this.isEditable,(!1));for(var f=c+1;f<this.childKeyEntries.length;f++)this.childKeyEntries[f].setKey(f);this.virtualChildKey.setKey(this.childKeyEntries.length+1)}this.childKeyEntries.splice(c,0,d),this.updateChildKeys(),this.listDiv.insertBefore(d.getElement(),e)},hax.jsonedit.ValueEntry.prototype.moveChildKeyToNextIndex=function(a){if(a<0||a>=this.childKeyEntries.length-1)return void alert("Can not make the specified key move");var b=this.childKeyEntries[a],c=this.childKeyEntries[a+1];this.childKeyEntries[a]=c,this.childKeyEntries[a+1]=b,this.updateChildKeys(),this.listDiv.insertBefore(c.getElement(),b.getElement())},hax.jsonedit.ValueEntry.prototype.deleteChildElement=function(a){var b=this.childKeyEntries.indexOf(a);return b==-1?void alert("Element not found!"):(this.childKeyEntries.splice(b,1),this.updateChildKeys(),void this.listDiv.removeChild(a.getElement()))},hax.jsonedit.ValueEntry.prototype.convertibleToNumber=function(){if("value"===this.type){var a=this.getCurrentValue(),b=hax.jsonedit.getValueType(a);if("string"===b)return isFinite(a)}return!1},hax.jsonedit.ValueEntry.prototype.convertibleToBool=function(){if("value"===this.type){var a=this.getCurrentValue(),b=hax.jsonedit.getValueType(a);if("string"===b)return hax.jsonedit.isBoolString(a)}return!1},hax.jsonedit.ValueEntry.prototype.convertibleToNull=function(){if("value"===this.type){var a=this.getCurrentValue(),b=hax.jsonedit.getValueType(a);if("string"===b)return hax.jsonedit.isNullString(a)}return!1},hax.jsonedit.ValueEntry.prototype.valueToNonString=function(){var a=this.getCurrentValue(),b=hax.jsonedit.stringToNonString(a);this.valueEditObject.setValue(b),this.editArea.valueEdited()},hax.jsonedit.ValueEntry.prototype.convertibleToString=function(){if("value"===this.type){var a=this.getCurrentValue(),b=hax.jsonedit.getValueType(a);return"string"!==b}return!1},hax.jsonedit.ValueEntry.prototype.valueToString=function(){var a=this.getCurrentValue(),b=String(a);this.valueEditObject.setValue(b),this.editArea.valueEdited()},hax.jsonedit.ValueEntry.prototype.valueToArray=function(){if("value"==!this.type)throw"Type value expected. Found "+this.type;this.type="array";var a=[this.valueEditObject.getValue()];if(this.createChildKeyEntries(a),this.updateChildKeys(),this.createElementList(),this.parent){var b=this.parent.getParentValueObject();b&&b.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},hax.jsonedit.ValueEntry.prototype.valueToObject=function(){if("value"==!this.type)throw"Type value expected. Found "+this.type;this.type="object";var a={a:this.valueEditObject.getValue()};if(this.createChildKeyEntries(a),this.updateChildKeys(),this.createElementList(),this.parent){var b=this.parent.getParentValueObject();b&&b.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},hax.jsonedit.ValueEntry.prototype.objectToArray=function(){if("object"==!this.type)throw"Type object expected. Found "+this.type;this.type="array";var a=0;if(this.childKeyEntries)for(a=0;a<this.childKeyEntries.length;a++){var b=this.childKeyEntries[a];b.convertToIndexType(a)}if(this.virtualChildKey&&this.virtualChildKey.convertToIndexType(a),this.valueEditObject=null,this.updateChildKeys(),this.createElementList(),this.parent){var c=this.parent.getParentValueObject();c&&c.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},hax.jsonedit.ValueEntry.prototype.arrayToObject=function(){if("array"==!this.type)throw"Type array expected. Found "+this.type;this.type="object";var a=0;if(this.childKeyEntries)for(a=0;a<this.childKeyEntries.length;a++){var b=this.childKeyEntries[a];b.convertToKeyType(String(a))}if(this.virtualChildKey&&this.virtualChildKey.convertToKeyType(""),this.updateChildKeys(),this.createElementList(),this.parent){var c=this.parent.getParentValueObject();c&&c.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()},hax.jsonedit.ValueEntry.prototype.convertToValue=function(){if("value"!=this.type){this.type="value";var a;if(this.childKeyEntries&&this.childKeyEntries.length>0){var b=this.childKeyEntries[0];a=b.getCurrentValue()}else a="";if(this.createValueEntry(a),this.parent){var c=this.parent.getParentValueObject();c&&c.updateChildKeys(),this.parent.updateValueElements()}this.editArea.valueEdited()}},hax.jsonedit.ValueEntry.prototype.createValueEntry=function(a){"value"==this.type&&(this.valueEditObject=null,this.childKeyEntries=[],this.virtualChildKey=null,this.elementList=[],this.createValueElement(a),this.listDiv=null,this.contractedList=null,this.expandedList=null)},hax.jsonedit.ValueEntry.prototype.createChildKeyEntries=function(a){if("value"!=this.type){this.valueEditObject=null,this.childKeyEntries=[],this.virtualChildKey=null,this.elementList=[];var b;if("object"==this.type){for(var c in a)b=new hax.jsonedit.KeyEntry(this.editArea,this,c,"key",a[c],this.isEditable,(!1)),this.childKeyEntries.push(b);this.isEditable&&(b=new hax.jsonedit.KeyEntry(this.editArea,this,"","key","",this.isEditable,(!0)),this.virtualChildKey=b)}else if("array"==this.type){for(var d=0;d<a.length;d++)b=new hax.jsonedit.KeyEntry(this.editArea,this,d,"index",a[d],this.isEditable,(!1)),this.childKeyEntries.push(b);this.isEditable&&(b=new hax.jsonedit.KeyEntry(this.editArea,this,d,"index","",this.isEditable,(!0)),this.virtualChildKey=b)}}},hax.jsonedit.ValueEntry.prototype.createElementList=function(){this.listDiv=document.createElement("div"),this.elementList=[],this.contractedList=[],this.expandedList=[];for(var a,b,c,d,e=hax.jsonedit.createIndentElement(this.indentLevel),f=0;f<this.childKeyEntries.length;f++)d=this.childKeyEntries[f],this.listDiv.appendChild(d.getElement());this.virtualChildKey&&this.listDiv.appendChild(this.virtualChildKey.getElement());var g=hax.jsonedit.createExpandButton(this),h=hax.jsonedit.createContractButton(this);"object"==this.type?(a=hax.jsonedit.createObjectDelimiter("{"),b=hax.jsonedit.createObjectDelimiter("}"),c=hax.jsonedit.createObjectDelimiter("}")):"array"==this.type&&(a=hax.jsonedit.createObjectDelimiter("["),b=hax.jsonedit.createObjectDelimiter("]"),c=hax.jsonedit.createObjectDelimiter("]")),this.elementList.push(a),this.elementList.push(g),this.contractedList.push(g),
this.elementList.push(b),this.contractedList.push(b),this.elementList.push(h),this.expandedList.push(h),(this.childKeyEntries.length>0||this.virtualChildKey)&&(this.elementList.push(this.listDiv),this.expandedList.push(this.listDiv),this.elementList.push(e),this.expandedList.push(e)),this.elementList.push(c),this.expandedList.push(c),this.doExpandContract()},hax.jsonedit.ValueEntry.prototype.updateChildKeys=function(){var a,b;if("object"==this.type){var c;a=0;for(c in this.childKeyEntries)a++;b=0;for(c in this.childKeyEntries){var d=this.childKeyEntries[c];d.loadContextMenu(a,b),b++}this.virtualChildKey&&this.virtualChildKey.loadContextMenu(a,a)}else if("array"==this.type){for(a=this.childKeyEntries.length,b=0;b<a;b++)d=this.childKeyEntries[b],d.getCurrentKey()!=b&&d.setKey(b),d.loadContextMenu(a,b);this.virtualChildKey&&(this.virtualChildKey.getCurrentKey()!=a&&this.virtualChildKey.setKey(a),this.virtualChildKey.loadContextMenu(a,a))}},hax.jsonedit.ValueEntry.prototype.doExpandContract=function(){if(this.expandedList&&this.contractedList){var a,b,c=this.isExpanded?this.expandedList:this.contractedList,d=this.isExpanded?this.contractedList:this.expandedList;for(a=0;a<c.length;a++)b=c[a],b.style.display="";for(a=0;a<d.length;a++)b=d[a],b.style.display="none"}},hax.jsonedit.ValueEntry.prototype.createValueElement=function(a){this.valueEditObject=new hax.jsonedit.EditField(a,hax.jsonedit.EditField.FIELD_TYPE_VALUE,this.isEditable,this.isVirtual);var b=this,c=function(a){if(b.isVirtual){var c=b.parent.getParentValueObject();c&&c.makeVirtualEntryReal()}b.editArea.valueEdited()};this.valueEditObject.setOnEditCallback(c);var d=function(a){b.navigateCells(a)};this.valueEditObject.setNavCallback(d);var e=this.valueEditObject.getElement();this.elementList.push(e)},hax.jsonedit.ValueEntry.prototype.makeVirtualEntryReal=function(a){var b=this.virtualChildKey;b.setIsVirtual(!1),this.childKeyEntries.push(b);var c;"object"==this.type?(c=new hax.jsonedit.KeyEntry(this.editArea,this,"","key","",this.isEditable,(!0)),this.virtualChildKey=c):"array"==this.type&&(c=new hax.jsonedit.KeyEntry(this.editArea,this,this.childKeyEntries.length,"index","",this.isEditable,(!0)),this.virtualChildKey=c),this.updateChildKeys(),this.createElementList(),this.parent.updateValueElements()},hax.jsonedit.EditField=function(a,b,c,d){this.fieldType=b,this.isEditable=c,this.isVirtual=d,this.element=document.createElement("div"),this.onEdit=null,this.onNavigate=null,this.editField=null;var e=this;this.element.onclick=function(){e.onClick()},this.setValue(a)},hax.jsonedit.EditField.FIELD_TYPE_VALUE="value",hax.jsonedit.EditField.FIELD_TYPE_KEY="key",hax.jsonedit.EditField.FIELD_TYPE_INDEX="index",hax.jsonedit.EditField.prototype.setOnEditCallback=function(a){return this.onEdit=a},hax.jsonedit.EditField.prototype.setNavCallback=function(a){this.onNavigate=a},hax.jsonedit.EditField.prototype.setIsVirtual=function(a){this.isVirtual=a,this.setCssClass()},hax.jsonedit.EditField.prototype.getValue=function(){return this.value},hax.jsonedit.EditField.prototype.setValue=function(a){void 0===a&&(a=null,console.log("The value undefined is not valid for a JSON. It has been converted to null.")),this.value=a,this.isString="string"===hax.jsonedit.getValueType(a),this.setCssClass(),null===a?this.element.innerHTML="null":""===a?this.element.innerHTML="&nbsp;":this.element.innerHTML=a},hax.jsonedit.EditField.prototype.setCssClass=function(){var a="cell_base cell_"+this.fieldType;this.isVirtual?a+="_virtual":"value"===this.fieldType&&(a+=this.isString?"_string":"_nonstring"),this.element.className=a},hax.jsonedit.EditField.prototype.getElement=function(){return this.element},hax.jsonedit.EditField.prototype.onClick=function(){this.isEditable&&!this.editField&&this.startEdit()},hax.jsonedit.EditField.prototype.startEdit=function(){if(!this.editField){var a,b=getSelection();b.anchorNode.parentNode==this.element?(a={},b.anchorOffset<=b.focusOffset?(a.start=b.anchorOffset,a.end=b.focusOffset):(a.start=b.focusOffset,a.end=b.anchorOffset)):a=null,this.editField=document.createElement("input"),this.editField.type="text",void 0!==this.value&&(this.editField.value=this.value),hax.core.util.removeAllChildren(this.element),this.element.appendChild(this.editField),a?this.editField.setSelectionRange(a.start,a.end):this.editField.select(),this.editField.focus();var c=this;this.editField.onblur=function(){c.endEdit()},this.editField.onkeydown=function(a){c.onKeyDown(a)}}},hax.jsonedit.EditField.prototype.endEdit=function(){if(this.editField){var a=this.editField.value;if(a!=this.value){var b,c=this.editField.value;b=this.isString&&""!==this.value?c:hax.jsonedit.canBeConvertedToNonString(c)?hax.jsonedit.stringToNonString(c):c,this.editField=null,this.setValue(b),this.onEdit&&this.onEdit(this.value)}else this.editField=null,this.element.innerHTML=this.value}},hax.jsonedit.EditField.DIRECTION_NONE=0,hax.jsonedit.EditField.DIRECTION_UP=1,hax.jsonedit.EditField.DIRECTION_DOWN=2,hax.jsonedit.EditField.DIRECTION_RIGHT=3,hax.jsonedit.EditField.DIRECTION_LEFT=4,hax.jsonedit.EditField.DIRECTION_NEXT=5,hax.jsonedit.EditField.DIRECTION_PREV=6,hax.jsonedit.EditField.ENTER_KEY=13,hax.jsonedit.EditField.TAB_KEY=9,hax.jsonedit.EditField.UP_KEY=38,hax.jsonedit.EditField.DOWN_KEY=40,hax.jsonedit.EditField.RIGHT_KEY=39,hax.jsonedit.EditField.LEFT_KEY=37,hax.jsonedit.EditField.prototype.onKeyDown=function(a){var b=!1,c=hax.jsonedit.EditField.DIRECTION_NONE,d=!1;a.keyCode==hax.jsonedit.EditField.ENTER_KEY?(b=!0,c=a.shiftKey?hax.jsonedit.EditField.DIRECTION_PREV:hax.jsonedit.EditField.DIRECTION_NEXT,d=!0):a.keyCode==hax.jsonedit.EditField.TAB_KEY?(b=!0,c=a.shiftKey?hax.jsonedit.EditField.DIRECTION_PREV:hax.jsonedit.EditField.DIRECTION_NEXT,d=!0):a.keyCode==hax.jsonedit.EditField.UP_KEY?(b=!0,c=hax.jsonedit.EditField.DIRECTION_UP,d=!0):a.keyCode==hax.jsonedit.EditField.DOWN_KEY?(b=!0,c=hax.jsonedit.EditField.DIRECTION_DOWN,d=!0):a.keyCode==hax.jsonedit.EditField.RIGHT_KEY?this.cursorAtEndOfEditField()&&(b=!0,c=hax.jsonedit.EditField.DIRECTION_RIGHT,d=!0):a.keyCode==hax.jsonedit.EditField.LEFT_KEY&&this.cursorAtStartOfEditField()&&(b=!0,c=hax.jsonedit.EditField.DIRECTION_LEFT,d=!0),d&&(a.preventDefault(),a.stopPropagation()),b&&(this.endEdit(),c!=hax.jsonedit.EditField.DIRECTION_NONE&&this.onNavigate&&this.onNavigate(c))},hax.jsonedit.EditField.prototype.cursorAtStartOfEditField=function(){return 0==this.editField.selectionStart&&0==this.editField.selectionEnd},hax.jsonedit.EditField.prototype.cursorAtEndOfEditField=function(){var a=String(this.editField.value).length;return this.editField.selectionStart==a&&this.editField.selectionEnd==a},hax.jsonedit.JsonEditArea=function(a,b,c){this.body=a,this.isEditable=c,void 0===b&&(b=""),this.valueEntry=new hax.jsonedit.ValueEntry(this,this,b,this.isEditable),this.valueEntry.setExpanded(!0),this.formatBody()},hax.jsonedit.JsonEditArea.prototype.setEditCallback=function(a){this.editCallback=a},hax.jsonedit.JsonEditArea.prototype.getCurrentValue=function(){return this.valueEntry.getCurrentValue()},hax.jsonedit.JsonEditArea.prototype.getElement=function(){return this.body},hax.jsonedit.JsonEditArea.prototype.getParentValueObject=function(){},hax.jsonedit.JsonEditArea.prototype.getIndentLevel=function(){return 0},hax.jsonedit.JsonEditArea.prototype.formatBody=function(){for(var a=this.valueEntry.getElementList(),b=0;b<a.length;b++)this.body.appendChild(a[b]);this.loadContextMenu()},hax.jsonedit.JsonEditArea.prototype.loadContextMenu=function(){var a=this,b=this.body,c=this.valueEntry,d=c.getType();b.oncontextmenu=function(b){b.preventDefault(),b.stopPropagation();var e=new hax.visiui.MenuBody;e.addCallbackMenuItem("Get Value",function(){alert(JSON.stringify(c.getCurrentValue()))}),a.isEditable&&("value"==d?(e.addCallbackMenuItem("Convert To Object",function(){c.valueToObject()}),e.addCallbackMenuItem("Convert To Array",function(){c.valueToArray()}),c.convertibleToNumber()&&e.addCallbackMenuItem("Convert To Number",function(){c.valueToNonString()}),c.convertibleToBool()&&e.addCallbackMenuItem("Convert To Boolean",function(){c.valueToNonString()}),c.convertibleToNull()&&e.addCallbackMenuItem("Convert To Null",function(){c.valueToNonString()}),c.convertibleToString()&&e.addCallbackMenuItem("Convert To String",function(){c.valueToString()})):"object"==d?(e.addCallbackMenuItem("Convert To Value",function(){c.convertToValue()}),e.addCallbackMenuItem("Convert To Array",function(){c.objectToArray()})):"array"==d&&(e.addCallbackMenuItem("Convert To Value",function(){c.convertToValue()}),e.addCallbackMenuItem("Convert To Object",function(){c.arrayToObject()}))),hax.visiui.Menu.showContextMenu(e,b)}},hax.jsonedit.JsonEditArea.prototype.updateValueElements=function(){hax.core.util.removeAllChildren(this.body),this.formatBody()},hax.jsonedit.JsonEditArea.prototype.valueEdited=function(){this.editCallback&&this.editCallback()},hax.visiui.setResizeListener=function(a,b){var c={position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",overflow:"hidden",zIndex:-1},d=function(){var a=e.contentDocument.body;a.onresize=b,b()},e=hax.visiui.createElement("iframe",null,c);e.onload=d,a.appendChild(e)},hax.visiui.removeResizeListener=function(a,b){alert("implement this!")},hax.app||(hax.app={}),hax.app.visiui||(hax.app.visiui={}),hax.app.visiui.dialog||(hax.app.visiui.dialog={}),hax.app.visiui.Hax=function(a){hax.core.EventManager.init.call(this),this.workspaceUIs={},this.componentGenerators={},this.standardComponents=[],this.additionalComponents=[],this.linkManager=new hax.app.visiui.LinkManager,this.loadComponentGenerators(),this.createUI(a);var b=hax.core.util.readQueryField("url",document.URL);b?hax.app.visiui.openworkspace.openWorkspaceFromUrl(this,b):hax.app.visiui.createworkspace.createWorkspace(this,hax.app.visiui.Hax.DEFAULT_WORKSPACE_NAME)},hax.core.util.mixin(hax.app.visiui.Hax,hax.core.EventManager),hax.app.visiui.Hax.DEFAULT_WORKSPACE_NAME="workspace",hax.app.visiui.Hax.prototype.getWorkspace=function(a){var b=this.getWorkspaceUI(a);return b?b.getWorkspace():null},hax.app.visiui.Hax.prototype.getWorkspaceUI=function(a){return this.workspaceUIs[a]},hax.app.visiui.Hax.prototype.getActiveWorkspaceUI=function(){var a=this.tabFrame.getActiveTabTitle();return a?this.workspaceUIs[a]:null},hax.app.visiui.Hax.prototype.getActiveWorkspace=function(){var a=this.getActiveWorkspaceUI();return a?a.getWorkspace():null},hax.app.visiui.Hax.prototype.addWorkspaceUI=function(a,b){if(this.workspaceUIs[b])throw hax.core.util.createError("There is already an open workspace with the name "+b,!1);var c=this.tabFrame.addTab(b);return this.tabFrame.setActiveTab(b),a.setApp(this,c),this.workspaceUIs[b]=a,!0},hax.app.visiui.Hax.prototype.removeWorkspaceUI=function(a){return delete this.workspaceUIs[a],this.tabFrame.removeTab(a),!0},hax.app.visiui.Hax.prototype.updateWorkspaceLinks=function(a,b,c,d){this.linkManager.updateWorkspaceLinks(a,b,c,d)},hax.app.visiui.Hax.prototype.registerComponent=function(a){var b=a.uniqueName;return this.componentGenerators[b]?void alert("There is already a registered component with this name. Either the component has already been added of the name is not unique."):(this.componentGenerators[b]=a,void this.additionalComponents.push(b))},hax.app.visiui.Hax.prototype.getComponentGenerator=function(a){return this.componentGenerators[a]},hax.app.visiui.Hax.prototype.loadComponentGenerators=function(){this.registerStandardComponent(hax.app.visiui.JsonTableComponent.generator),this.registerStandardComponent(hax.app.visiui.GridTableComponent.generator),this.registerStandardComponent(hax.app.visiui.FolderComponent.generator),this.registerStandardComponent(hax.app.visiui.FunctionComponent.generator),this.registerStandardComponent(hax.app.visiui.FolderFunctionComponent.generator),this.registerComponent(hax.app.visiui.CustomControlComponent.generator)},hax.app.visiui.Hax.prototype.registerStandardComponent=function(a){var b=a.uniqueName;return this.componentGenerators[b]?void alert("There is already a registered component with this name. Either the component has already been added of the name is not unique."):(this.componentGenerators[b]=a,void this.standardComponents.push(b))},hax.app.visiui.Hax.prototype.createUI=function(a){var b=hax.visiui.initWindows(a),c=b.baseElement,d=document.createElement("div"),e={position:"relative",display:"table",width:"100%",height:"100%"};hax.visiui.applyStyle(d,e),c.appendChild(d);var f=this.createMenuBar();d.appendChild(f);var g=document.createElement("div"),h={position:"relative",backgroundColor:"white",display:"table-row",width:"100%",height:"100%"};hax.visiui.applyStyle(g,h),d.appendChild(g);var i={};i.tabBarColorClass="visicomp_tabFrameColor",i.activeTabColorClass="visicomp_tabFrameActiveColor",this.tabFrame=new hax.visiui.TabFrame(g,i)},hax.app.visiui.Hax.prototype.populateAddChildMenu=function(a,b,c){for(var d=0;d<this.standardComponents.length;d++){var e=this.standardComponents[d],f=this.componentGenerators[e],g="Add "+f.displayName,h=hax.app.visiui.updatecomponent.getAddComponentCallback(this,f,b,c);a.addCallbackMenuItem(g,h)}var i=hax.app.visiui.addadditionalcomponent.getAddAdditionalComponentCallback(this,b,c);a.addCallbackMenuItem("Other Components...",i)},hax.app.visiui.Hax.prototype.setFolderContextMenu=function(a,b){var c=this,d={};d.parentKey=hax.app.visiui.WorkspaceUI.getObjectKey(b),a.oncontextmenu=function(a){if(a.preventDefault(),a.stopPropagation(),a.offsetX){var b={},e={};e.x=a.offsetX,e.y=a.offsetY,b.coordInfo=e}var f=new hax.visiui.MenuBody;c.populateAddChildMenu(f,d,b),hax.visiui.Menu.showContextMenu(f,a)}},hax.app.visiui.LinkManager=function(){this.linkMap={}},hax.app.visiui.LinkManager.prototype.updateWorkspaceLinks=function(a,b,c,d){var e,f,g,h,i,j,k;for(f=c.length,e=0;e<f;e++)if(h=c[e],i=h.link,j=h.type,k=this.linkMap[i],k&&(g=k.indexOf(i),g!==-1&&(k.splice(e,1),0===k.length))){var l=this.removeLinkFromPage(i,j);l&&delete this.linkMap[i]}var m;for(d&&(m=this.getResponseProcessor(b,d)),f=b.length,e=0;e<f;e++)h=b[e],i=h.link,j=h.type,k=this.linkMap[i],k?(g=k.indexOf(i),g!=-1||k.push(a),m&&m.getOnLoad(i)()):(k=[],k.push(a),this.linkMap[i]=k,this.addLinkToPage(i,j,m))},hax.app.visiui.LinkManager.prototype.addLinkToPage=function(a,b,c){"js"===b?hax.app.visiui.LinkManager.addJsLink(a,c):"css"===b&&hax.app.visiui.LinkManager.addCssLink(a,c)},hax.app.visiui.LinkManager.prototype.removeLinkFromPage=function(a,b){return"css"===b&&(hax.app.visiui.LinkManager.removeLink(a),!0)},hax.app.visiui.LinkManager.addJsLink=function(a,b){var c=document.getElementById(a);if(c)alert("THIS SHOULDN'T HAPPEN!");else{var d={};d.id=a,d.src=a,b&&(d.onload=b.getOnLoad(a),d.onerror=b.getOnError(a)),c=hax.visiui.createElement("script",d),document.head.appendChild(c)}},hax.app.visiui.LinkManager.addCssLink=function(a,b){var c=document.getElementById(a);if(c)alert("THIS SHOULDN'T HAPPEN!");else{var d={};d.id=a,d.rel="stylesheet",d.type="text/css",d.href=a,b&&(d.onload=b.getOnLoad(a),d.onerror=b.getOnError(a)),c=hax.visiui.createElement("link",d),document.head.appendChild(c)}},hax.app.visiui.LinkManager.removeLink=function(a){var b=document.getElementById(a);b&&document.head.removeChild(b)},hax.app.visiui.LinkManager.prototype.getResponseProcessor=function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d].link;var e=function(a){var d=c.indexOf(a);d>=0&&c.splice(d,1),0===c.length&&b()},f={};return f.getOnLoad=function(a){return function(){console.log("link loaded: "+a),e(a)}},f.getOnError=function(a){return function(){console.log("link not loaded: "+a),e(a),alert("Error loading link: "+a)}},f},hax.app.visiui.Component={},hax.app.visiui.Component.init=function(a,b,c,d){if(d||(d={}),this.workspaceUI=a,this.object=b,this.generator=c,this.parentContainer=this.workspaceUI.getParentContainerObject(b),!this.parentContainer)throw hax.core.util.createError("Parent object not found: "+b.getFullName());this.workspaceUI.registerMember(this.object,this),this.cleanupActions=[];var e={};e.minimizable=!0,e.maximizable=!0,e.resizable=!0,e.movable=!0,e.frameColorClass="visicomp_windowColor",e.titleBarClass="visicomp_titleBarClass",this.window=new hax.visiui.WindowFrame(this.parentContainer,e);var f=this.window.getMenu();if(this.window.setTitle(this.getObject().getDisplayName()),d.coordInfo)this.window.setCoordinateInfo(d.coordInfo);else{var g=this.parentContainer.getNextWindowPosition();this.window.setPosition(g[0],g[1]),this.window.setSize(c.DEFAULT_WIDTH,c.DEFAULT_HEIGHT)}d.windowState&&this.window.setWindowState(d.windowState),this.window.show(),this.menuItemInfoList=[];var h={};h.title="Edit Properties",h.callback=hax.app.visiui.updatecomponent.getUpdateComponentCallback(this,this.generator),this.menuItemInfoList.push(h);var h={};h.title="Delete",h.callback=this.createDeleteCallback(h.title),this.menuItemInfoList.push(h),this.populateFrame&&this.populateFrame(),f.setMenuItems(this.menuItemInfoList)},hax.app.visiui.Component.addCleanupAction=function(a){this.cleanupActions.push(a)},hax.app.visiui.Component.showErrorBar=function(a){this.errorDiv||(this.errorDiv=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",backgroundColor:"red",color:"white"})),this.errorDiv.innerHTML=a,this.errorBarActive=!0,this.showActiveHeaders()},hax.app.visiui.Component.hideErrorBar=function(){this.errorBarActive=!1,this.showActiveHeaders()},hax.app.visiui.Component.showSaveBar=function(a,b){this.saveDiv||(this.saveDiv=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",backgroundColor:"white",border:"solid 1px gray",padding:"3px"}),this.saveDiv.appendChild(document.createTextNode("Edit: ")),this.saveBarSaveButton=document.createElement("button"),this.saveBarSaveButton.innerHTML="Save",this.saveDiv.appendChild(this.saveBarSaveButton),this.saveDiv.appendChild(document.createTextNode(" ")),this.saveBarCancelButton=document.createElement("button"),this.saveBarCancelButton.innerHTML="Cancel",this.saveDiv.appendChild(this.saveBarCancelButton)),this.saveBarSaveButton.onclick=a,this.saveBarCancelButton.onclick=b,this.saveBarActive=!0,this.showActiveHeaders()},hax.app.visiui.Component.editActive=function(){return this.saveBarActive},hax.app.visiui.Component.hideSaveBar=function(){this.saveBarActive=!1,this.showActiveHeaders()},hax.app.visiui.Component.showActiveHeaders=function(){var a=this.getWindow(),b=[];this.errorBarActive&&this.errorDiv&&b.push(this.errorDiv),this.saveBarActive&&this.saveDiv&&b.push(this.saveDiv),a.loadHeaders(b)},hax.app.visiui.Component.getObject=function(){return this.object},hax.app.visiui.Component.getWorkspace=function(){return this.object.getWorkspace()},hax.app.visiui.Component.getWorkspaceUI=function(){return this.workspaceUI},hax.app.visiui.Component.getWindow=function(){return this.window},hax.app.visiui.Component.setScrollingContentElement=function(){this.contentDiv=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"}),this.window.setContent(this.contentDiv)},hax.app.visiui.Component.setFixedContentElement=function(){this.contentDiv=this.window.getBody()},hax.app.visiui.Component.getContentElement=function(){return this.contentDiv},hax.app.visiui.Component.toJson=function(){var a={};return a.key=this.getObject().getFullName(),a.type=this.generator.uniqueName,a.coordInfo=this.window.getCoordinateInfo(),a.windowState=this.window.getWindowState(),this.writeToJson&&this.writeToJson(a),a},hax.app.visiui.Component.onDelete=function(){var a=this.getWindow();a.deleteWindow();for(var b=0;b<this.cleanupActions.length;b++)this.cleanupActions[b]()},hax.app.visiui.Component.memberMoved=function(a){this.parenContainer=a,this.window.changeParent(a),this.updateTitle()},hax.app.visiui.Component.memberUpdated=function(){this.updateTitle()},hax.app.visiui.Component.updateTitle=function(){var a=this.getWindow();if(a){var b=this.getObject(),c=b.getDisplayName(),d=a.getTitle();d!==c&&a.setTitle(c)}},hax.app.visiui.Component.getPropertyValues=function(){var a=this.object,b={};return b.name=a.getName(),b.parentKey=hax.app.visiui.WorkspaceUI.getObjectKey(a.getParent()),this.generator.addPropFunction&&this.generator.addPropFunction(a,b),b},hax.app.visiui.Component.updatePropertyValues=function(a,b){var c=new hax.core.ActionResponse,d=[],e=this.object;try{if(a.name!==b.name||a.parentKey!==b.parentKey){var f=this.workspaceUI.getObjectByKey(b.parentKey);hax.core.movemember.moveMember(e,b.name,f,d)}this.generator.updatePropHandler&&this.generator.updatePropHandler(e,a,b,d),hax.core.calculation.callRecalculateList(d,c),hax.core.updatemember.fireUpdatedEventList(d)}catch(g){var h=hax.core.ActionError.processException(g,"AppException",!0);c.addError(h)}return c},hax.app.visiui.Component.createDeleteCallback=function(){var a=this.getObject();return function(){var b=confirm("Are you sure you want to delete this object?");if(b){var c=hax.core.deletemember.deleteMember(a);if(!c.getSuccess()){var d=c.getErrorMsg();alert(d)}}}},hax.app.visiui.TableEditComponent={},hax.app.visiui.TableEditComponent.init=function(a,b,c){this.viewTypes=a,this.defaultView=b,this.initUI(),this.clearFunctionOnBlankInfo=c,this.clearFunctionActive=!1,this.clearFunctionCallback=null;var d=this,e=function(){d.destroy()};this.addCleanupAction(e)},hax.app.visiui.TableEditComponent.NO_EDIT_BACKGROUND_COLOR="#f4f4f4",hax.app.visiui.TableEditComponent.setViewType=function(a){return this.viewType!==a&&(this.editActive()?(alert("You must save or cancel the edit session to change the view mode."),!1):(this.viewModeElement&&this.showModeElement(null),this.viewModeElement=this.getViewModeElement(a),this.viewType=a,!0))},hax.app.visiui.TableEditComponent.updateViewDropdown=function(a){a||(a=this.defaultView),this.select.value=a},hax.app.visiui.TableEditComponent.memberUpdated=function(){hax.app.visiui.Component.memberUpdated.call(this);var a=this.getObject();if(a.hasError()){for(var b="",c=a.getErrors(),d=0;d<c.length;d++)b+=c[d].msg+"\n";this.showErrorBar(b)}else this.hideErrorBar();this.viewModeElementShowing!==this.viewModeElement&&this.showModeElement(this.viewModeElement);var e=this.viewModeElement.isData===!1||!a.hasCode();if(this.viewModeElement.showData(e),this.clearFunctionOnBlankInfo)if(a.hasCode()){if(!this.clearFunctionActive){var f=this.getWindow().getMenu();this.clearFunctionCallback||(this.clearFunctionCallback=this.getClearFunctionCallback()),f.addCallbackMenuItem(this.clearFunctionOnBlankInfo.menuLabel,this.clearFunctionCallback),this.clearFunctionActive=!0}}else if(this.clearFunctionActive){var f=this.getWindow().getMenu();f.removeMenuItem(this.clearFunctionOnBlankInfo.menuLabel),this.clearFunctionActive=!1}},hax.app.visiui.TableEditComponent.getClearFunctionCallback=function(){var a=this.getObject(),b=this.clearFunctionOnBlankInfo.dataValue;return function(){var c=hax.core.updatemember.updateData(a,b);c.getSuccess()||alert(c.getErrorMsg())}},hax.app.visiui.TableEditComponent.startEditUI=function(a,b){this.select.disabled=!0,this.showSaveBar(a,b)},hax.app.visiui.TableEditComponent.endEditUI=function(){this.hideSaveBar(),this.select.disabled=!1},hax.app.visiui.TableEditComponent.initUI=function(){this.setFixedContentElement(),this.select=hax.visiui.createElement("select",null,{marginRight:"3px",backgroundColor:"transparent"});for(var a=0;a<this.viewTypes.length;a++){var b=this.viewTypes[a];this.select.add(hax.visiui.createElement("option",{text:b}))}var c=this,d=function(a){var b=c.setViewType(c.select.value);return b?c.memberUpdated():c.updateViewDropdown(this.viewType),b};this.select.onchange=d,this.window.addRightTitleBarElement(this.select),this.setViewType(this.defaultView),this.updateViewDropdown()},hax.app.visiui.TableEditComponent.showModeElement=function(a){var b=this.getContentElement();if(hax.core.util.removeAllChildren(b),a){var c=a.getElement();b.appendChild(c)}this.viewModeElementShowing&&this.viewModeElementShowing.destroy(),this.viewModeElementShowing=a},hax.app.visiui.TableEditComponent.destroy=function(){this.viewModeElement&&this.viewModeElement.destroy()},hax.app.visiui.WorkspaceUI=function(){this.workspace=null,this.app=null,this.tab=null,this.componentMap={},this.activeFolderName=null,this.jsLinkArray=[],this.cssLinkArray=[]},hax.app.visiui.WorkspaceUI.prototype.setApp=function(a,b){this.app=a,this.tab=b},hax.app.visiui.WorkspaceUI.prototype.getApp=function(){return this.app},hax.app.visiui.WorkspaceUI.prototype.setWorkspace=function(a,b){this.workspace=a;var c=this.workspace.getRoot();this.registerMember(c,null),this.addComponentContainer(c,this.tab),b&&this.loadFolderComponentContentFromJson(c,b);var d=this,e=function(a){d.memberUpdated(a)};this.workspace.addListener(hax.core.updatemember.MEMBER_UPDATED_EVENT,e);var f=function(a){d.childDeleted(a)};this.workspace.addListener(hax.core.deletemember.MEMBER_DELETED_EVENT,f);var g=function(a){d.childMoved(a)};this.workspace.addListener(hax.core.movemember.MEMBER_MOVED_EVENT,g);var h=this.tab.getContainerElement(),i=this.getApp();i.setFolderContextMenu(h,c)},hax.app.visiui.WorkspaceUI.prototype.getWorkspace=function(){return this.workspace},hax.app.visiui.WorkspaceUI.prototype.getComponent=function(a){var b=hax.app.visiui.WorkspaceUI.getObjectKey(a),c=this.componentMap[b];return c?c.component:null},hax.app.visiui.WorkspaceUI.prototype.getFolderList=function(){var a=[];for(var b in this.componentMap){var c=this.componentMap[b];c.parentContainer&&a.push(b)}return a},hax.app.visiui.WorkspaceUI.prototype.getParentContainerObject=function(a){var b=a.getParent(),c=hax.app.visiui.WorkspaceUI.getObjectKey(b),d=this.componentMap[c];if(!d.parentContainer)throw hax.core.util.createError("Parent container not found!");return d.parentContainer},hax.app.visiui.WorkspaceUI.prototype.registerMember=function(a,b){if(a.getWorkspace()!==this.workspace)throw hax.core.util.createError("Component registered in wrong workspace: "+a.getFullName());var c=hax.app.visiui.WorkspaceUI.getObjectKey(a);if(this.componentMap[c])throw hax.core.util.createError("There is already a component with the given name.",!0);var d={};d.object=a,d.component=b,this.componentMap[c]=d},hax.app.visiui.WorkspaceUI.prototype.addComponentContainer=function(a,b){var c=hax.app.visiui.WorkspaceUI.getObjectKey(a),d=this.componentMap[c];return d?void(d.parentContainer=b):void alert("Unknown error - component info not found: "+c)},hax.app.visiui.WorkspaceUI.prototype.memberUpdated=function(a){var b=a.getFullName(),c=this.componentMap[b];c&&c.component&&c.component.memberUpdated()},hax.app.visiui.WorkspaceUI.prototype.childDeleted=function(a){var b=a.fullName,c=this.componentMap[b];delete this.componentMap[b],c&&c.component&&c.component.onDelete()},hax.app.visiui.WorkspaceUI.prototype.childMoved=function(a){var b=this.componentMap[a.oldFullName];if(delete this.componentMap[a.oldFullName],this.componentMap[a.newFullName]=b,b&&b.component){var c=this.getParentContainerObject(b.object);b.component.memberMoved(c)}},hax.app.visiui.WorkspaceUI.getObjectKey=function(a){return a.getFullName()},hax.app.visiui.WorkspaceUI.prototype.getObjectByKey=function(a){var b=this.componentMap[a];return b?b.object:null},hax.app.visiui.WorkspaceUI.prototype.getComponentByKey=function(a){var b=this.componentMap[a];return b?b.component:null},hax.app.visiui.WorkspaceUI.prototype.close=function(){for(var a in this.componentMap){var b=this.componentMap[a];b&&b.component&&b.component.onDelete()}},hax.app.visiui.WorkspaceUI.prototype.toJson=function(){var a={};a.name=this.workspace.getName(),a.fileType="hax workspace",a.jsLinks=this.jsLinkArray,a.cssLinks=this.cssLinkArray,a.workspace=this.workspace.toJson();var b=this.workspace.getRoot();return a.components=this.getFolderComponentContentJson(b),a},hax.app.visiui.WorkspaceUI.prototype.getFolderComponentContentJson=function(a){var b={},c=a.getChildMap();for(var d in c){var e=c[d],f=this.getComponent(e),g=e.getName();b[g]=f.toJson()}return b},hax.app.visiui.WorkspaceUI.prototype.loadFolderComponentContentFromJson=function(a,b){for(var c in b){var d=b[c],e=a.lookupChild(c);this.loadComponentFromJson(e,d)}},hax.app.visiui.WorkspaceUI.prototype.loadComponentFromJson=function(a,b){var c=b.type,d=this.app.getComponentGenerator(c);if(!d)throw hax.core.util.createError("Component type not found: "+c);d.createComponentFromJson(this,a,b)},hax.app.visiui.WorkspaceUI.prototype.getJsLinks=function(){return this.jsLinkArray},hax.app.visiui.WorkspaceUI.prototype.setLinks=function(a,b,c,d){var e=this.jsLinkArray,f=this.cssLinkArray,g=[],h=[];this.createLinkAddRemoveList(a,e,"js",g,h),this.createLinkAddRemoveList(b,f,"css",g,h),this.jsLinkArray=a,this.cssLinkArray=b,this.app.updateWorkspaceLinks(d,g,h,c)},hax.app.visiui.WorkspaceUI.prototype.getCssLinks=function(){return this.cssLinkArray},hax.app.visiui.WorkspaceUI.prototype.createLinkAddRemoveList=function(a,b,c,d,e){var f,g,h={};for(f=0;f<a.length;f++)g=a[f],h[g]=!0;for(f=0;f<b.length;f++)g=b[f],h[g]?h[g]=!1:e.push({link:g,type:c});for(g in h)h[g]&&d.push({link:g,type:c})},hax.app.visiui.FolderComponent=function(a,b,c){hax.app.visiui.Component.init.call(this,a,b,hax.app.visiui.FolderComponent.generator,c),hax.visiui.ParentContainer.init.call(this,this.getContentElement(),this.getWindow()),hax.visiui.ParentHighlighter.init.call(this,this.getContentElement()),a.addComponentContainer(b,this)},hax.core.util.mixin(hax.app.visiui.FolderComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.FolderComponent,hax.visiui.ParentContainer),hax.core.util.mixin(hax.app.visiui.FolderComponent,hax.visiui.ParentHighlighter),hax.app.visiui.FolderComponent.prototype.getContentIsShowing=function(){return this.getWindow().getContentIsShowing()},hax.app.visiui.FolderComponent.prototype.writeToJson=function(a){var b=this.getObject(),c=this.getWorkspaceUI();a.children=c.getFolderComponentContentJson(b)},hax.app.visiui.FolderComponent.prototype.populateFrame=function(){this.setScrollingContentElement();var a=this.getContentElement(),b=this.getObject(),c=this.getWorkspaceUI().getApp();c.setFolderContextMenu(a,b)},hax.app.visiui.FolderComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.core.Folder.generator.type;var f=hax.core.createmember.createMember(d,e),g=f.member;if(g){var h=new hax.app.visiui.FolderComponent(a,g,c);f.component=h}return f},hax.app.visiui.FolderComponent.createComponentFromJson=function(a,b,c){var d=new hax.app.visiui.FolderComponent(a,b,c);return c&&c.children&&a.loadFolderComponentContentFromJson(b,c.children),d},hax.app.visiui.FolderComponent.generator={},hax.app.visiui.FolderComponent.generator.displayName="Folder",hax.app.visiui.FolderComponent.generator.uniqueName="hax.app.visiui.FolderComponent",hax.app.visiui.FolderComponent.generator.createComponent=hax.app.visiui.FolderComponent.createComponent,hax.app.visiui.FolderComponent.generator.createComponentFromJson=hax.app.visiui.FolderComponent.createComponentFromJson,hax.app.visiui.FolderComponent.generator.DEFAULT_WIDTH=500,hax.app.visiui.FolderComponent.generator.DEFAULT_HEIGHT=500,hax.app.visiui.JsonTableComponent=function(a,b,c){hax.app.visiui.Component.init.call(this,a,b,hax.app.visiui.JsonTableComponent.generator,c),hax.app.visiui.TableEditComponent.init.call(this,hax.app.visiui.JsonTableComponent.VIEW_MODES,hax.app.visiui.JsonTableComponent.DEFAULT_VIEW,hax.app.visiui.JsonTableComponent.BLANK_DATA_VALUE_INFO),this.memberUpdated()},hax.core.util.mixin(hax.app.visiui.JsonTableComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.JsonTableComponent,hax.app.visiui.TableEditComponent),hax.app.visiui.JsonTableComponent.VIEW_PLAIN_TEXT="Text",hax.app.visiui.JsonTableComponent.VIEW_JSON_TEXT="JSON",hax.app.visiui.JsonTableComponent.VIEW_FORM="Form",hax.app.visiui.JsonTableComponent.VIEW_CODE="Formula",hax.app.visiui.JsonTableComponent.VIEW_SUPPLEMENTAL_CODE="Private",hax.app.visiui.JsonTableComponent.VIEW_MODES=[hax.app.visiui.JsonTableComponent.VIEW_PLAIN_TEXT,hax.app.visiui.JsonTableComponent.VIEW_JSON_TEXT,hax.app.visiui.JsonTableComponent.VIEW_FORM,hax.app.visiui.JsonTableComponent.VIEW_CODE,hax.app.visiui.JsonTableComponent.VIEW_SUPPLEMENTAL_CODE],
hax.app.visiui.JsonTableComponent.DEFAULT_VIEW=hax.app.visiui.JsonTableComponent.VIEW_PLAIN_TEXT,hax.app.visiui.JsonTableComponent.BLANK_DATA_VALUE_INFO={dataValue:"",menuLabel:"Clear Formula"},hax.app.visiui.JsonTableComponent.prototype.getViewModeElement=function(a){switch(a){case hax.app.visiui.JsonTableComponent.VIEW_PLAIN_TEXT:return new hax.app.visiui.AceDataMode(this,(!1));case hax.app.visiui.JsonTableComponent.VIEW_JSON_TEXT:return new hax.app.visiui.AceDataMode(this,(!0));case hax.app.visiui.JsonTableComponent.VIEW_FORM:return new hax.app.visiui.FormDataMode(this);case hax.app.visiui.JsonTableComponent.VIEW_CODE:return new hax.app.visiui.AceCodeMode(this,hax.app.visiui.JsonTableComponent.BLANK_DATA_VALUE_INFO,hax.app.visiui.JsonTableComponent.editorCodeWrapper);case hax.app.visiui.JsonTableComponent.VIEW_SUPPLEMENTAL_CODE:return new hax.app.visiui.AceSupplementalMode(this);default:return alert("unrecognized view element!"),null}},hax.app.visiui.JsonTableComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.core.JsonTable.generator.type;var f=hax.core.createmember.createMember(d,e),g=f.member;if(g){var h=new hax.app.visiui.JsonTableComponent(a,g,c);f.component=h}return f},hax.app.visiui.JsonTableComponent.createComponentFromJson=function(a,b,c){var d=new hax.app.visiui.JsonTableComponent(a,b,c);return d},hax.app.visiui.JsonTableComponent.generator={},hax.app.visiui.JsonTableComponent.generator.displayName="Data Table",hax.app.visiui.JsonTableComponent.generator.uniqueName="hax.app.visiui.JsonTableComponent",hax.app.visiui.JsonTableComponent.generator.createComponent=hax.app.visiui.JsonTableComponent.createComponent,hax.app.visiui.JsonTableComponent.generator.createComponentFromJson=hax.app.visiui.JsonTableComponent.createComponentFromJson,hax.app.visiui.JsonTableComponent.generator.DEFAULT_WIDTH=200,hax.app.visiui.JsonTableComponent.generator.DEFAULT_HEIGHT=200,hax.app.visiui.JsonTableComponent.editorCodeWrapper={},hax.app.visiui.JsonTableComponent.editorCodeWrapper.FUNCTION_PREFIX="var value;\n",hax.app.visiui.JsonTableComponent.editorCodeWrapper.FUNCTION_SUFFIX="\nreturn value;\n\n",hax.app.visiui.JsonTableComponent.editorCodeWrapper.displayName="Formula",hax.app.visiui.JsonTableComponent.editorCodeWrapper.wrapCode=function(a){return hax.app.visiui.JsonTableComponent.editorCodeWrapper.FUNCTION_PREFIX+a+hax.app.visiui.JsonTableComponent.editorCodeWrapper.FUNCTION_SUFFIX},hax.app.visiui.JsonTableComponent.editorCodeWrapper.unwrapCode=function(a){if(null==a||(a.length=0))return"";var b=a.replace("var value;","");return b=b.replace("return value;",""),b.trim()},hax.app.visiui.GridTableComponent=function(a,b,c){hax.app.visiui.Component.init.call(this,a,b,hax.app.visiui.GridTableComponent.generator,c),hax.app.visiui.TableEditComponent.init.call(this,hax.app.visiui.GridTableComponent.VIEW_MODES,hax.app.visiui.GridTableComponent.DEFAULT_VIEW,hax.app.visiui.GridTableComponent.BLANK_DATA_VALUE_INFO),this.memberUpdated()},hax.core.util.mixin(hax.app.visiui.GridTableComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.GridTableComponent,hax.app.visiui.TableEditComponent),hax.app.visiui.GridTableComponent.VIEW_GRID="Grid",hax.app.visiui.GridTableComponent.VIEW_CODE="Formula",hax.app.visiui.GridTableComponent.VIEW_SUPPLEMENTAL_CODE="Private",hax.app.visiui.GridTableComponent.VIEW_MODES=[hax.app.visiui.GridTableComponent.VIEW_GRID,hax.app.visiui.GridTableComponent.VIEW_CODE,hax.app.visiui.GridTableComponent.VIEW_SUPPLEMENTAL_CODE],hax.app.visiui.GridTableComponent.BLANK_DATA_VALUE_INFO={dataValue:[[null]],menuLabel:"Clear Formula"},hax.app.visiui.GridTableComponent.DEFAULT_VIEW=hax.app.visiui.GridTableComponent.VIEW_GRID,hax.app.visiui.GridTableComponent.prototype.getViewModeElement=function(a){switch(a){case hax.app.visiui.GridTableComponent.VIEW_CODE:return new hax.app.visiui.AceCodeMode(this,hax.app.visiui.GridTableComponent.BLANK_DATA_VALUE_INFO,hax.app.visiui.JsonTableComponent.editorCodeWrapper);case hax.app.visiui.GridTableComponent.VIEW_SUPPLEMENTAL_CODE:return new hax.app.visiui.AceSupplementalMode(this);case hax.app.visiui.GridTableComponent.VIEW_GRID:return new hax.app.visiui.HandsonGridMode(this);default:return alert("unrecognized view element!"),null}},hax.app.visiui.GridTableComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.core.JsonTable.generator.type,e.updateData={},e.updateData.data=[[""]];var f=hax.core.createmember.createMember(d,e),g=f.member;if(g){var h=new hax.app.visiui.GridTableComponent(a,g,c);f.component=h}return f},hax.app.visiui.GridTableComponent.createComponentFromJson=function(a,b,c){var d=new hax.app.visiui.GridTableComponent(a,b,c);return d},hax.app.visiui.GridTableComponent.generator={},hax.app.visiui.GridTableComponent.generator.displayName="Grid Table",hax.app.visiui.GridTableComponent.generator.uniqueName="hax.app.visiui.GridTableComponent",hax.app.visiui.GridTableComponent.generator.createComponent=hax.app.visiui.GridTableComponent.createComponent,hax.app.visiui.GridTableComponent.generator.createComponentFromJson=hax.app.visiui.GridTableComponent.createComponentFromJson,hax.app.visiui.GridTableComponent.generator.DEFAULT_WIDTH=200,hax.app.visiui.GridTableComponent.generator.DEFAULT_HEIGHT=200,hax.app.visiui.FunctionComponent=function(a,b,c){hax.app.visiui.Component.init.call(this,a,b,hax.app.visiui.FunctionComponent.generator,c),hax.app.visiui.TableEditComponent.init.call(this,hax.app.visiui.FunctionComponent.VIEW_MODES,hax.app.visiui.FunctionComponent.DEFAULT_VIEW),this.memberUpdated()},hax.core.util.mixin(hax.app.visiui.FunctionComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.FunctionComponent,hax.app.visiui.TableEditComponent),hax.app.visiui.FunctionComponent.VIEW_CODE="Code",hax.app.visiui.FunctionComponent.VIEW_SUPPLEMENTAL_CODE="Private",hax.app.visiui.FunctionComponent.VIEW_MODES=[hax.app.visiui.FunctionComponent.VIEW_CODE,hax.app.visiui.FunctionComponent.VIEW_SUPPLEMENTAL_CODE],hax.app.visiui.FunctionComponent.DEFAULT_VIEW=hax.app.visiui.FunctionComponent.VIEW_CODE,hax.app.visiui.FunctionComponent.prototype.getViewModeElement=function(a){switch(a){case hax.app.visiui.FunctionComponent.VIEW_CODE:return new hax.app.visiui.AceCodeMode(this,(!1));case hax.app.visiui.FunctionComponent.VIEW_SUPPLEMENTAL_CODE:return new hax.app.visiui.AceSupplementalMode(this);default:return alert("unrecognized view element!"),null}},hax.app.visiui.FunctionComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};if(e.name=b.name,b.argListString){var f=hax.app.visiui.FunctionComponent.parseStringArray(b.argListString);e.updateData={},e.updateData.argList=f}e.type=hax.core.FunctionTable.generator.type;var g=hax.core.createmember.createMember(d,e),h=g.member;if(h){var i=new hax.app.visiui.FunctionComponent(a,h,c);g.component=i}return g},hax.app.visiui.FunctionComponent.createComponentFromJson=function(a,b,c){var d=new hax.app.visiui.FunctionComponent(a,b,c);return d},hax.app.visiui.FunctionComponent.addPropValues=function(a,b){var c=a.getArgList(),d=c.toString();return b.argListString=d,b},hax.app.visiui.FunctionComponent.propUpdateHandler=function(a,b,c,d){if(b.argListString!==c.argListString){var e=hax.app.visiui.FunctionComponent.parseStringArray(c.argListString),f=a.getFunctionBody(),g=a.getSupplementalCode();hax.core.updatemember.updateCode(a,e,f,g,d)}},hax.app.visiui.FunctionComponent.parseStringArray=function(a){for(var b=a.split(","),c=0;c<b.length;c++)b[c]=b[c].trim();return b},hax.app.visiui.FunctionComponent.generator={},hax.app.visiui.FunctionComponent.generator.displayName="Function",hax.app.visiui.FunctionComponent.generator.uniqueName="hax.app.visiui.FunctionComponent",hax.app.visiui.FunctionComponent.generator.createComponent=hax.app.visiui.FunctionComponent.createComponent,hax.app.visiui.FunctionComponent.generator.createComponentFromJson=hax.app.visiui.FunctionComponent.createComponentFromJson,hax.app.visiui.FunctionComponent.generator.DEFAULT_WIDTH=200,hax.app.visiui.FunctionComponent.generator.DEFAULT_HEIGHT=200,hax.app.visiui.FunctionComponent.generator.propertyDialogLines=[{type:"inputElement",heading:"Arg List: ",resultKey:"argListString"}],hax.app.visiui.FunctionComponent.generator.addPropFunction=hax.app.visiui.FunctionComponent.addPropValues,hax.app.visiui.FunctionComponent.generator.updatePropHandler=hax.app.visiui.FunctionComponent.propUpdateHandler,hax.app.visiui.FolderFunctionComponent=function(a,b,c){hax.app.visiui.Component.init.call(this,a,b,hax.app.visiui.FolderFunctionComponent.generator,c),hax.visiui.ParentContainer.init.call(this,this.getContentElement(),this.getWindow()),hax.visiui.ParentHighlighter.init.call(this,this.getContentElement());var d=b.getInternalFolder();a.registerMember(d,null),a.addComponentContainer(d,this),this.memberUpdated()},hax.core.util.mixin(hax.app.visiui.FolderFunctionComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.FolderFunctionComponent,hax.visiui.ParentContainer),hax.core.util.mixin(hax.app.visiui.FolderFunctionComponent,hax.visiui.ParentHighlighter),hax.app.visiui.FolderFunctionComponent.prototype.getContentIsShowing=function(){return this.getWindow().getContentIsShowing()},hax.app.visiui.FolderFunctionComponent.prototype.writeToJson=function(a){var b=this.getObject(),c=b.getInternalFolder(),d=this.getWorkspaceUI();a.children=d.getFolderComponentContentJson(c)},hax.app.visiui.FolderFunctionComponent.prototype.populateFrame=function(){this.setScrollingContentElement();var a=this.getContentElement(),b=this.getObject(),c=b.getInternalFolder(),d=this.getWorkspaceUI().getApp();d.setFolderContextMenu(a,c)},hax.app.visiui.FolderFunctionComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};if(e.name=b.name,b.argListString){var f=hax.app.visiui.FunctionComponent.parseStringArray(b.argListString);e.argList=f}b.returnValueString&&(e.returnValue=b.returnValueString),e.type=hax.core.FolderFunction.generator.type;var g=hax.core.createmember.createMember(d,e),h=g.member;if(g.getSuccess()){var i=new hax.app.visiui.FolderFunctionComponent(a,h,c);g.component=i}return g},hax.app.visiui.FolderFunctionComponent.createComponentFromJson=function(a,b,c){var d=new hax.app.visiui.FolderFunctionComponent(a,b,c);if(c&&c.children){var e=b.getInternalFolder();a.loadFolderComponentContentFromJson(e,c.children)}return d},hax.app.visiui.FolderFunctionComponent.addPropValues=function(a,b){var c=a.getArgList(),d=c.toString();return b.argListString=d,b.returnValueString=a.getReturnValueString(),b},hax.app.visiui.FolderFunctionComponent.propUpdateHandler=function(a,b,c,d){if(b.argListString!==c.argListString||b.returnValueString!==c.returnValueString){var e=hax.app.visiui.FunctionComponent.parseStringArray(c.argListString);hax.core.updatefolderFunction.updatePropertyValues(a,e,c.returnValueString,d)}},hax.app.visiui.FolderFunctionComponent.generator={},hax.app.visiui.FolderFunctionComponent.generator.displayName="Folder Function",hax.app.visiui.FolderFunctionComponent.generator.uniqueName="hax.app.visiui.FolderFunctionComponent",hax.app.visiui.FolderFunctionComponent.generator.createComponent=hax.app.visiui.FolderFunctionComponent.createComponent,hax.app.visiui.FolderFunctionComponent.generator.createComponentFromJson=hax.app.visiui.FolderFunctionComponent.createComponentFromJson,hax.app.visiui.FolderFunctionComponent.generator.DEFAULT_WIDTH=500,hax.app.visiui.FolderFunctionComponent.generator.DEFAULT_HEIGHT=500,hax.app.visiui.FolderFunctionComponent.generator.propertyDialogLines=[{type:"inputElement",heading:"Arg List: ",resultKey:"argListString"},{type:"inputElement",heading:"Return Val: ",resultKey:"returnValueString"}],hax.app.visiui.FolderFunctionComponent.generator.addPropFunction=hax.app.visiui.FolderFunctionComponent.addPropValues,hax.app.visiui.FolderFunctionComponent.generator.updatePropHandler=hax.app.visiui.FolderFunctionComponent.propUpdateHandler,hax.app.visiui.BasicControlComponent=function(a,b,c,d){hax.app.visiui.Component.init.call(this,a,b,c,d),hax.app.visiui.TableEditComponent.init.call(this,hax.app.visiui.BasicControlComponent.VIEW_MODES,hax.app.visiui.BasicControlComponent.DEFAULT_VIEW);var e=b.getResource();e.setComponent(this),b.calculate();var f=function(){e["delete"]&&e["delete"]()};this.addCleanupAction(f)},hax.core.util.mixin(hax.app.visiui.BasicControlComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.BasicControlComponent,hax.app.visiui.TableEditComponent),hax.app.visiui.BasicControlComponent.prototype.getOutputElement=function(){return this.outputMode.getElement()},hax.app.visiui.BasicControlComponent.VIEW_OUTPUT="Output",hax.app.visiui.BasicControlComponent.VIEW_CODE="Code",hax.app.visiui.BasicControlComponent.VIEW_SUPPLEMENTAL_CODE="Private",hax.app.visiui.BasicControlComponent.VIEW_MODES=[hax.app.visiui.BasicControlComponent.VIEW_OUTPUT,hax.app.visiui.BasicControlComponent.VIEW_CODE,hax.app.visiui.BasicControlComponent.VIEW_SUPPLEMENTAL_CODE],hax.app.visiui.BasicControlComponent.DEFAULT_VIEW=hax.app.visiui.BasicControlComponent.VIEW_OUTPUT,hax.app.visiui.BasicControlComponent.prototype.getViewModeElement=function(a){switch(a){case hax.app.visiui.BasicControlComponent.VIEW_OUTPUT:return this.outputMode||(this.outputMode=new hax.app.visiui.ResourceOutputMode(this)),this.outputMode;case hax.app.visiui.BasicControlComponent.VIEW_CODE:return new hax.app.visiui.AceCodeMode(this,(!1));case hax.app.visiui.BasicControlComponent.VIEW_SUPPLEMENTAL_CODE:return new hax.app.visiui.AceSupplementalMode(this);default:return alert("unrecognized view element!"),null}},hax.app.visiui.BasicControlComponent.createBaseComponent=function(a,b,c,d,e){var f=a.getObjectByKey(b.parentKey),g={};g.name=b.name,g.type=hax.core.Control.generator.type;var h=hax.core.createmember.createMember(f,g),i=h.member;if(i){i.updateResource(c);var j=new hax.app.visiui.BasicControlComponent(a,i,d,e);h.component=j}return h},hax.app.visiui.BasicControlComponent.createBaseComponentFromJson=function(a,b,c,d){var e=new hax.app.visiui.BasicControlComponent(a,b,c,d);return e},hax.app.visiui.CustomControlComponent=function(a,b,c){hax.app.visiui.Component.init.call(this,a,b,hax.app.visiui.CustomControlComponent.generator,c),hax.app.visiui.TableEditComponent.init.call(this,hax.app.visiui.CustomControlComponent.VIEW_MODES,hax.app.visiui.CustomControlComponent.DEFAULT_VIEW),c&&c.resource?this.loadResourceFromJson(c.resource):this.loadEmptyResource();var d=function(){resource["delete"]&&resource["delete"]()};this.addCleanupAction(d)},hax.core.util.mixin(hax.app.visiui.CustomControlComponent,hax.app.visiui.Component),hax.core.util.mixin(hax.app.visiui.CustomControlComponent,hax.app.visiui.TableEditComponent),hax.app.visiui.CustomControlComponent.prototype.getHtml=function(){return this.html},hax.app.visiui.CustomControlComponent.prototype.getCustomizeScript=function(){return this.customizeScript},hax.app.visiui.CustomControlComponent.prototype.getSupplementalCode=function(){return this.supplementalCode},hax.app.visiui.CustomControlComponent.prototype.getCss=function(a){return this.css},hax.app.visiui.CustomControlComponent.prototype.getOutputElement=function(){return this.outputMode.getElement()},hax.app.visiui.CustomControlComponent.VIEW_OUTPUT="Output",hax.app.visiui.CustomControlComponent.VIEW_CODE="Model Code",hax.app.visiui.CustomControlComponent.VIEW_SUPPLEMENTAL_CODE="Private",hax.app.visiui.CustomControlComponent.VIEW_CUSTOM_CODE="Base Code",hax.app.visiui.CustomControlComponent.VIEW_CUSTOM_SUPPLEMENTAL_CODE="Base Private",hax.app.visiui.CustomControlComponent.VIEW_MODES=[hax.app.visiui.CustomControlComponent.VIEW_OUTPUT,hax.app.visiui.CustomControlComponent.VIEW_CODE,hax.app.visiui.CustomControlComponent.VIEW_SUPPLEMENTAL_CODE,hax.app.visiui.CustomControlComponent.VIEW_CUSTOM_CODE,hax.app.visiui.CustomControlComponent.VIEW_CUSTOM_SUPPLEMENTAL_CODE],hax.app.visiui.CustomControlComponent.DEFAULT_VIEW=hax.app.visiui.CustomControlComponent.VIEW_OUTPUT,hax.app.visiui.CustomControlComponent.prototype.getViewModeElement=function(a){switch(a){case hax.app.visiui.CustomControlComponent.VIEW_OUTPUT:return this.outputMode||(this.outputMode=new hax.app.visiui.ResourceOutputMode(this)),this.outputMode;case hax.app.visiui.CustomControlComponent.VIEW_CODE:return new hax.app.visiui.AceCodeMode(this,(!1));case hax.app.visiui.CustomControlComponent.VIEW_SUPPLEMENTAL_CODE:return new hax.app.visiui.AceSupplementalMode(this);case hax.app.visiui.CustomControlComponent.VIEW_CUSTOM_CODE:return new hax.app.visiui.AceCustomCodeMode(this);case hax.app.visiui.CustomControlComponent.VIEW_CUSTOM_SUPPLEMENTAL_CODE:return new hax.app.visiui.AceCustomSupplementalMode(this);default:return alert("unrecognized view element!"),null}},hax.app.visiui.CustomControlComponent.prototype.writeToJson=function(a){var b=this.getObject(),c=b.getResource();c&&(a.resource={},a.resource.html=this.html,a.resource.customizeScript=this.customizeScript,a.resource.supplementalCode=this.supplementalCode,a.resource.css=this.css)},hax.app.visiui.CustomControlComponent.prototype.updateFromJson=function(a){a.resource?this.loadResourceFromJson(a.resource):this.loadEmptyResource()},hax.app.visiui.CustomControlComponent.prototype.loadEmptyResource=function(){this.update("","return {};","","")},hax.app.visiui.CustomControlComponent.prototype.loadResourceFromJson=function(a){a||(a={});var b=void 0!==a.html?a.html:"",c=void 0!==a.customizeScript?a.customizeScript:"",d=void 0!==a.supplementalCode?a.supplementalCode:"",e=void 0===a.css?a.css:"";this.update(b,c,d,e)},hax.app.visiui.CustomControlComponent.prototype.update=function(a,b,c,d){this.html=a,this.customizeScript=b,this.supplementalCode=c,this.css=d;var e=new hax.core.ActionResponse,f=this.getObject();f.clearErrors();try{var g=this.createResource();if(!g)throw new Error("resource.setComponent(component) is not defined");f.updateResource(g),g.setComponent&&g.setComponent(this),f.calculate(),this.memberUpdated()}catch(h){h.stack&&console.error(h.stack);var i=h.message?h.message:hax.core.ActionError.UNKNOWN_ERROR_MESSAGE,j=new hax.core.ActionError(i,"Custom Control - Update",f);j.setParentException(h),f.addError(j),e.addError(j)}return e},hax.app.visiui.CustomControlComponent.prototype.createResource=function(){var a=hax.core.util.formatString(hax.app.visiui.CustomControlComponent.GENERATOR_FUNCTION_FORMAT_TEXT,this.customizeScript,this.supplementalCode),b=new Function(a),c=b(),d=c(this);return d},hax.app.visiui.CustomControlComponent.GENERATOR_FUNCTION_FORMAT_TEXT=["","//supplemental code","{1}","//end supplemental code","","//member function","var generator = function(component) {","{0}","}","//end member function","return generator;",""].join("\n"),hax.app.visiui.CustomControlComponent.createComponent=function(a,b,c){var d=a.getObjectByKey(b.parentKey),e={};e.name=b.name,e.type=hax.core.Control.generator.type;var f=hax.core.createmember.createMember(d,e),g=f.member;if(g){var h=new hax.app.visiui.CustomControlComponent.createComponentFromJson(a,g,c);f.component=h}return f},hax.app.visiui.CustomControlComponent.createComponentFromJson=function(a,b,c){var d=new hax.app.visiui.CustomControlComponent(a,b,c);return d},hax.app.visiui.CustomControlComponent.generator={},hax.app.visiui.CustomControlComponent.generator.displayName="Custom Control",hax.app.visiui.CustomControlComponent.generator.uniqueName="hax.app.visiui.CustomControlComponent",hax.app.visiui.CustomControlComponent.generator.createComponent=hax.app.visiui.CustomControlComponent.createComponent,hax.app.visiui.CustomControlComponent.generator.createComponentFromJson=hax.app.visiui.CustomControlComponent.createComponentFromJson,hax.app.visiui.CustomControlComponent.generator.DEFAULT_WIDTH=500,hax.app.visiui.CustomControlComponent.generator.DEFAULT_HEIGHT=500,hax.app.visiui.CustomResource=function(){this.contentElement=null,this.html="",this.customizeScript="",this.supplementalCode="",this.css=""},hax.app.visiui.CustomResource.prototype.setComponent=function(a){this.component=a},hax.app.visiui.CustomResource.prototype.getContentElement=function(){return this.component.getOutputElement()},hax.app.visiui.CustomResource.prototype.getComponent=function(){return this.component},hax.app.visiui.CustomResource.prototype.getHtml=function(){return this.html},hax.app.visiui.CustomResource.prototype.getCustomizeScript=function(){return this.customizeScript},hax.app.visiui.CustomResource.prototype.getSupplementalCode=function(){return this.supplementalCode},hax.app.visiui.CustomResource.prototype.getCss=function(a){return this.css},hax.app.visiui.CustomResource.prototype.update=function(a,b,c,d){this.html=a,this.customizeScript=b,this.supplementalCode=c,this.css=d,this.updateResource()},hax.app.visiui.CustomResource.prototype.updateResource=function(){var a=hax.core.util.formatString(hax.app.visiui.CustomResource.GENERATOR_FUNCTION_FORMAT_TEXT,this.customizeScript,this.supplementalCode),b=new Function(a),c=b(),d=c(this),e=this.getObject();e.updateResource(d)},hax.app.visiui.CustomResource.GENERATOR_FUNCTION_FORMAT_TEXT=["","//supplemental code","{1}","//end supplemental code","","//member function","var generator = function(component) {","{0}","}","//end member function","return generator;",""].join("\n"),hax.app.visiui.createworkspace={},hax.app.visiui.createworkspace.getCreateCallback=function(a){return function(){var b=function(b){var c=hax.app.visiui.createworkspace.createWorkspace(a,b);return c.getSuccess()||alert(c.getErrorMsg()),!0};hax.app.visiui.dialog.showCreateWorkspaceDialog(b)}},hax.app.visiui.createworkspace.createWorkspace=function(a,b){var c,d=new hax.core.ActionResponse;try{var e=new hax.app.visiui.WorkspaceUI;c=a.addWorkspaceUI(e,b);var f=new hax.core.Workspace(b);e.setWorkspace(f),d.workspaceUI=e}catch(g){c&&a.removeWorkspaceUI(b);var h=hax.core.ActionError.processException(g,"AppException",!1);d.addError(h)}return d},hax.app.visiui.closeworkspace={},hax.app.visiui.closeworkspace.getCloseCallback=function(a){return function(){var b=hax.app.visiui.closeworkspace.closeWorkspace(a);b.getSuccess()||alert(b.getErrorMsg())}},hax.app.visiui.closeworkspace.closeWorkspace=function(a){var b=new hax.core.ActionResponse,c=!1;try{var d=a.getActiveWorkspaceUI();if(null===d){var e="There is no workspace open.",f=new hax.core.ActionError(e,"User",null);return b.addError(f),b}var g=d.getWorkspace(),h=g.getName(),i=confirm("Are you sure you want to close the workspace "+h+"?");if(!i)return b;c=a.removeWorkspaceUI(h),d.close(),g.close()}catch(j){var k=!c,f=hax.core.ActionError.processException(j,"AppException",k);b.addError(f)}return b},hax.app.visiui.updatecomponent={},hax.app.visiui.updatecomponent.getAddComponentCallback=function(a,b,c,d){var e=function(){var e=a.getActiveWorkspaceUI();if(!e)return void alert("There is no open workspace.");var f=hax.app.visiui.updatecomponent.getDialogLayout(e,b,!0,c),g=function(a){var c=b.createComponent(e,a,d);return c.getSuccess()||alert(c.getErrorMsg()),!0};hax.app.visiui.dialog.showConfigurableDialog(f,g)};return e},hax.app.visiui.updatecomponent.getUpdateComponentCallback=function(a,b){var c=function(){var c=a.getWorkspaceUI(),d=a.getPropertyValues(),e=hax.app.visiui.updatecomponent.getDialogLayout(c,b,!1,d),f=function(b){var c=!1;for(var e in b)b[e]!==d[e]&&(c=!0);if(!c)return!0;var f=a.updatePropertyValues(d,b);return f.getSuccess()||alert(f.getErrorMsg()),!0};hax.app.visiui.dialog.showConfigurableDialog(e,f)};return c},hax.app.visiui.updatecomponent.getDialogLayout=function(a,b,c,d){var e=hax.core.util.deepJsonCopy(b.propertyDialogLines),f={},g=[];f.lines=g;var h={};h.type="title",c?h.title="New "+b.displayName:h.title="Update "+b.displayName,g.push(h);var i={};i.type="dropdown",i.heading="Folder: ",i.entries=a.getFolderList(),i.resultKey="parentKey",g.push(i);var j={};if(j.type="inputElement",j.heading="Name: ",j.resultKey="name",g.push(j),e)for(var k=0;k<e.length;k++)g.push(e[k]);var l={};if(l.type="submit",c?l.submit="Create":l.submit="Update",l.cancel="Cancel",g.push(l),d)for(var k=0;k<g.length;k++){var m=g[k];m.resultKey&&(m.initial=d[m.resultKey])}return f},hax.app.visiui.addadditionalcomponent={},hax.app.visiui.addadditionalcomponent.getAddAdditionalComponentCallback=function(a,b,c){return function(){var d=function(d){var e=a.getComponentGenerator(d);if(e){var f=hax.app.visiui.updatecomponent.getAddComponentCallback(a,e,b,c);f()}else alert("Unknown component type: "+d)};hax.app.visiui.dialog.showSelectComponentDialog(a.additionalComponents,d)}},hax.app.visiui.updatelinks={},hax.app.visiui.updatelinks.getUpdateLinksCallback=function(a){return function(){var b=a.getActiveWorkspaceUI();return b?void hax.app.visiui.dialog.showUpdateLinksDialog(b):void alert("There is no open workspace.")}},hax.app.visiui.Hax.prototype.createMenuBar=function(){var a=document.createElement("div"),b={position:"relative",display:"table-row",width:"100%",padding:"2px"};hax.visiui.applyStyle(a,b),a.className="visicomp_menuBarStyle";var c;c=hax.visiui.Menu.createMenu("Workspace"),a.appendChild(c.getElement());var d=hax.app.visiui.createworkspace.getCreateCallback(this);c.addCallbackMenuItem("New",d);var e=hax.app.visiui.openworkspace.getOpenCallback(this);c.addCallbackMenuItem("Open",e);var f=hax.app.visiui.saveworkspace.getSaveCallback(this);c.addCallbackMenuItem("Save",f);var g=hax.app.visiui.closeworkspace.getCloseCallback(this);c.addCallbackMenuItem("Close",g),c=hax.visiui.Menu.createMenu("Components"),a.appendChild(c.getElement()),this.populateAddChildMenu(c),c=hax.visiui.Menu.createMenu("Libraries"),a.appendChild(c.getElement());var h=hax.app.visiui.updatelinks.getUpdateLinksCallback(this);return c.addCallbackMenuItem("Update Links",h),a},hax.app.visiui.openworkspace={},hax.app.visiui.openworkspace.getOpenCallback=function(a){return function(){var b=function(b){var c=function(a){a.getSuccess()||alert(a.getErrorMsg())};return hax.app.visiui.openworkspace.openWorkspace(a,b,c),!0};hax.app.visiui.dialog.showOpenWorkspaceDialog(b)}},hax.app.visiui.openworkspace.openWorkspace=function(a,b,c){var d,e,f=new hax.core.ActionResponse;try{var g=JSON.parse(b);d=g.workspace.name;var h=new hax.app.visiui.WorkspaceUI;e=a.addWorkspaceUI(h,d);var i,j,k=!1;g.jsLinks&&g.jsLinks.length>0?(i=g.jsLinks,k=!0):i=[],g.cssLinks&&g.cssLinks.length>0?(j=g.cssLinks,k=!0):j=[];var l=function(){hax.app.visiui.openworkspace.loadWorkspace(h,g),c(f)};k?h.setLinks(i,j,l,d):l()}catch(m){e&&a.removeWorkspaceUI(d);var n=hax.core.ActionError.processException(m,"AppException",!1);f.addError(n),c(f)}},hax.app.visiui.openworkspace.loadWorkspace=function(a,b,c){var d=b.workspace,e=b.components,f=new hax.core.Workspace(d,c);a.setWorkspace(f,e)},hax.app.visiui.openworkspace.openWorkspaceFromUrl=function(a,b){var c=function(a){a.getSuccess()||alert(a.getErrorMsg())};hax.app.visiui.openworkspace.openWorkspaceFromUrlImpl(a,b,c)},hax.app.visiui.openworkspace.openWorkspaceFromUrlImpl=function(a,b,c){var d=function(b){hax.app.visiui.openworkspace.openWorkspace(a,b,c)},e=function(a){var b=new hax.core.ActionError(a,"AppException",null),d=new hax.core.ActionResponse;d.addError(b),c(d)};hax.app.visiui.openworkspace.doRequest(b,d,e)},hax.app.visiui.openworkspace.doRequest=function(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){var a;4==d.readyState&&200==d.status?b(d.responseText):4==d.readyState&&d.status>=400&&(a="Error in http request. Status: "+d.status,c(a))},d.open("GET",a,!0),d.send()},hax.app.visiui.saveworkspace={},hax.app.visiui.saveworkspace.getSaveCallback=function(a){return function(){var b=a.getActiveWorkspaceUI();return null===b?void alert("There is no workspace open."):void hax.app.visiui.dialog.showSaveWorkspaceDialog(a,b)}},hax.app.visiui.dialog.showOpenWorkspaceDialog=function(a){var b=hax.visiui.createDialog({resizable:!0,movable:!0});b.setTitle("&nbsp;");var c=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});b.setContent(c);var d,e=hax.visiui.createElement("div",null,{display:"table",overflow:"hidden"});c.appendChild(e),d=hax.visiui.createElement("div",{className:"dialogLine"}),d.appendChild(hax.visiui.createElement("div",{className:"dialogTitle",innerHTML:"Open Workspace"})),e.appendChild(d),d=hax.visiui.createElement("div",{className:"dialogLine"}),d.appendChild(hax.visiui.createElement("div",{innerHTML:"Paste saved workspace data in the space below."})),e.appendChild(d),d=hax.visiui.createElement("div",{className:"dialogLine"});var f=hax.visiui.createElement("textarea",{rows:"15",cols:"75"});d.appendChild(f),e.appendChild(d),d=hax.visiui.createElement("div",{className:"dialogLine"});var g=function(){hax.visiui.closeDialog(b)},h=function(){var c=f.value;if(0==c.length)return void alert("Please paste the file into the input field");var d=a(c);d&&hax.visiui.closeDialog(b)};d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Open",onclick:h})),d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:g})),e.appendChild(d),b.show(),b.fitToContent(e),b.centerInParent()},hax.app.visiui.dialog.showSaveWorkspaceDialog=function(a,b){if(!b||!b.getWorkspace())return void alert("There is no workspace open.");var c=b.toJson(),d=JSON.stringify(c),e=hax.visiui.createDialog({resizable:!0,movable:!0});e.setTitle("&nbsp;");var f=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});e.setContent(f);var g,h=hax.visiui.createElement("div",null,{display:"table",overflow:"hidden"});f.appendChild(h);var g;g=hax.visiui.createElement("div",{className:"dialogLine"}),g.appendChild(hax.visiui.createElement("div",{className:"dialogTitle",innerHTML:"Save Workspace"})),h.appendChild(g),g=hax.visiui.createElement("div",{className:"dialogLine"}),g.appendChild(hax.visiui.createElement("div",{innerHTML:"Copy the data below and save it in a file to open later."})),h.appendChild(g),g=hax.visiui.createElement("div",{className:"dialogLine"});var i=hax.visiui.createElement("textarea",{value:d,rows:"15",cols:"75"});g.appendChild(i),h.appendChild(g),g=hax.visiui.createElement("div",{className:"dialogLine"});var j=function(){hax.visiui.closeDialog(e)};g.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"OK",onclick:j})),h.appendChild(g),e.setContent(h),e.show(),e.fitToContent(h),e.centerInParent()},hax.app.visiui.TextAreaEditor=function(a,b,c){this.outsideDiv=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"hidden"});var d=hax.visiui.createElement("TEXTAREA",null,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",overflow:"auto"});this.textArea=d,this.textArea.readOnly=!0,this.outsideDiv.appendChild(this.textArea),this.component=a,this.table=a.getObject(),this.workingData=null,this.editOk=!1,this.editMode=!1,this.parentSave=b,this.parentCancel=c;var e=this,f=function(){e.onMouseClick()};this.textArea.addEventListener("click",f)},hax.app.visiui.TextAreaEditor.prototype.save=function(){var a=this.textArea.value,b=this.parentSave(a);b&&this.endEditMode()},hax.app.visiui.TextAreaEditor.prototype.cancel=function(){var a=this.parentCancel();a&&this.endEditMode()},hax.app.visiui.TextAreaEditor.prototype.getElement=function(){return this.outsideDiv},hax.app.visiui.TextAreaEditor.prototype.showData=function(a,b){this.editOk=b,this.textArea.readOnly=!b,this.textArea.value=a,this.editOk?this.textArea.style.backgroundColor="":this.textArea.style.backgroundColor=hax.app.visiui.TableEditComponent.NO_EDIT_BACKGROUND_COLOR},hax.app.visiui.TextAreaEditor.prototype.destroy=function(){},hax.app.visiui.TextAreaEditor.prototype.endEditMode=function(){this.editMode=!1,this.textArea.readOnly=!0,this.component.endEditUI();
},hax.app.visiui.TextAreaEditor.prototype.onMouseClick=function(){if(this.editOk&&!this.editMode){var a=this,b=function(){a.save()},c=function(){a.cancel()};this.component.startEditUI(b,c),this.textArea.readOnly=!1,this.editMode=!0}},hax.app.visiui.TextAreaMode=function(a){this.component=a,this.editOk=!1;var b=this,c=function(a){return b.onSave(a)},d=function(){return b.onCancel()};this.editor=new hax.app.visiui.TextAreaEditor(a,c,d)},hax.app.visiui.TextAreaMode.formatString="\t",hax.app.visiui.TextAreaMode.prototype.isData=!0,hax.app.visiui.TextAreaMode.prototype.getElement=function(){return this.editor.getElement()},hax.app.visiui.TextAreaMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editOk=a;var d;d=null===c?"null":void 0===c?"undefined":JSON.stringify(c,null,hax.app.visiui.TextAreaMode.formatString),this.editor.showData(d,a)},hax.app.visiui.TextAreaMode.prototype.destroy=function(){this.editor.destroy()},hax.app.visiui.TextAreaMode.prototype.onSave=function(a){var b;if(a.length>0)try{b=JSON.parse(a)}catch(c){return alert("There was an error parsing the JSON input: "+c.message),!1}else b="";var d=this.component.getObject();return hax.core.updatemember.updateData(d,b),!0},hax.app.visiui.TextAreaMode.prototype.onCancel=function(){return this.showData(this.editOk),!0},hax.app.visiui.AceTextEditor=function(a,b,c,d){this.outsideDiv=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"hidden"}),this.editorDiv=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"auto"}),this.outsideDiv.appendChild(this.editorDiv),this.component=a,this.table=a.getObject(),this.workingData=null,this.editOk=!1,this.editMode=!1,this.parentSave=c,this.parentCancel=d;var e=ace.edit(this.editorDiv);e.renderer.setShowGutter(!0),e.setReadOnly(!0),e.setTheme("ace/theme/eclipse"),e.getSession().setMode(b),e.$blockScrolling=1/0,this.editor=e;var f=function(){e.resize()};hax.visiui.setResizeListener(this.outsideDiv,f);var g=this,h=function(){g.onMouseClick()};this.editorDiv.addEventListener("click",h)},hax.app.visiui.AceTextEditor.prototype.save=function(){var a=this.editor.getSession().getValue(),b=this.parentSave(a);b&&this.endEditMode()},hax.app.visiui.AceTextEditor.prototype.cancel=function(){var a=this.parentCancel();a&&this.endEditMode()},hax.app.visiui.AceTextEditor.prototype.getElement=function(){return this.outsideDiv},hax.app.visiui.AceTextEditor.prototype.showData=function(a,b){this.editOk=b,this.editor.getSession().setValue(a),this.editOk?this.editorDiv.style.backgroundColor="":this.editorDiv.style.backgroundColor=hax.app.visiui.TableEditComponent.NO_EDIT_BACKGROUND_COLOR},hax.app.visiui.AceTextEditor.prototype.destroy=function(){this.editor&&(this.editor.destroy(),this.editor=null)},hax.app.visiui.AceTextEditor.prototype.endEditMode=function(){this.editMode=!1,this.editor.setReadOnly(!0),this.component.endEditUI()},hax.app.visiui.AceTextEditor.prototype.onMouseClick=function(){if(this.editOk&&!this.editMode){var a=this,b=function(){a.save()},c=function(){a.cancel()};this.component.startEditUI(b,c),this.editor.setReadOnly(!1),this.editMode=!0}},hax.app.visiui.AceCodeModeBase=function(a,b){this.component=a,this.editOk=!1;var c=this,d=function(a){return c.onSave(a)},e=function(){return c.onCancel()};this.editor=new hax.app.visiui.AceTextEditor(a,b,d,e)},hax.app.visiui.AceCodeModeBase.prototype.isData=!1,hax.app.visiui.AceCodeModeBase.prototype.getElement=function(){return this.editor.getElement()},hax.app.visiui.AceCodeModeBase.prototype.getComponent=function(){return this.component},hax.app.visiui.AceCodeModeBase.prototype.destroy=function(){this.editor.destroy()},hax.app.visiui.AceCodeModeBase.prototype.onCancel=function(){return this.showData(this.editOk),!0},hax.app.visiui.AceCodeMode=function(a,b,c){hax.app.visiui.AceCodeModeBase.call(this,a,"ace/mode/javascript"),this.onBlankData=b,this.editorCodeWrapper=c},hax.app.visiui.AceCodeMode.prototype=Object.create(hax.app.visiui.AceCodeModeBase.prototype),hax.app.visiui.AceCodeMode.prototype.constructor=hax.app.visiui.AceCodeMode,hax.app.visiui.AceCodeMode.prototype.showData=function(a){var b,c=this.component.getObject(),d=c.getFunctionBody();b=this.editorCodeWrapper?this.editorCodeWrapper.unwrapCode(d):d,this.editOk=a,this.editor.showData(b,a)},hax.app.visiui.AceCodeMode.prototype.onSave=function(a){var b=this.component.getObject();if(this.onBlankData&&""===a){var c=this.onBlankData.dataValue;hax.core.updatemember.updateData(b,c)}else{var d;d=this.editorCodeWrapper?this.editorCodeWrapper.wrapCode(a):a;var e=b.getSupplementalCode(),f=b.getArgList(),g=hax.core.updatemember.updateCode(b,f,d,e);if(!g.getSuccess()){var h=g.getErrorMsg();alert(h)}}return!0},hax.app.visiui.AceDataMode=function(a,b){this.component=a,this.editOk=!1;var c=this,d=function(a){return c.onSave(a)},e=function(){return c.onCancel()},f=b?"ace/mode/json":"ace/mode/text";this.editor=new hax.app.visiui.AceTextEditor(a,f,d,e)},hax.app.visiui.AceDataMode.formatString="\t",hax.app.visiui.AceDataMode.prototype.isData=!0,hax.app.visiui.AceDataMode.prototype.getElement=function(){return this.editor.getElement()},hax.app.visiui.AceDataMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editOk=a;var d;d=null===c?"null":void 0===c?"undefined":JSON.stringify(c,null,hax.app.visiui.AceDataMode.formatString),this.editor.showData(d,a)},hax.app.visiui.AceDataMode.prototype.destroy=function(){this.editor.destroy()},hax.app.visiui.AceDataMode.prototype.onSave=function(a){var b;if(a.length>0)try{b=JSON.parse(a)}catch(c){return alert("There was an error parsing the JSON input: "+c.message),!1}else b="";var d=this.component.getObject();return hax.core.updatemember.updateData(d,b),!0},hax.app.visiui.AceDataMode.prototype.onCancel=function(){return this.showData(this.editOk),!0},hax.app.visiui.AceSupplementalMode=function(a){hax.app.visiui.AceCodeModeBase.call(this,a,"ace/mode/javascript")},hax.app.visiui.AceSupplementalMode.prototype=Object.create(hax.app.visiui.AceCodeModeBase.prototype),hax.app.visiui.AceSupplementalMode.prototype.constructor=hax.app.visiui.AceSupplementalMode,hax.app.visiui.AceSupplementalMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getSupplementalCode();this.editor.showData(c,a)},hax.app.visiui.AceSupplementalMode.prototype.onSave=function(a){var b=this.component.getObject(),c=b.getFunctionBody(),d=a,e=b.getArgList(),f=hax.core.updatemember.updateCode(b,e,c,d);if(!f.getSuccess()){var g=f.getErrorMsg();alert(g)}return!0},hax.app.visiui.AceCustomCodeMode=function(a){hax.app.visiui.AceCodeModeBase.call(this,a,"ace/mode/javascript")},hax.app.visiui.AceCustomCodeMode.prototype=Object.create(hax.app.visiui.AceCodeModeBase.prototype),hax.app.visiui.AceCustomCodeMode.prototype.constructor=hax.app.visiui.AceCustomCodeMode,hax.app.visiui.AceCustomCodeMode.prototype.showData=function(a){var b=this.component.getCustomizeScript();this.editOk=a,this.editor.showData(b,a)},hax.app.visiui.AceCustomCodeMode.prototype.onSave=function(a){var b="",c="",d=a,e=this.component.getSupplementalCode(),f=this.component.update(b,d,e,c);if(!f.getSuccess()){var g=f.getErrorMsg();alert(g)}return!0},hax.app.visiui.AceCustomSupplementalMode=function(a){hax.app.visiui.AceCodeModeBase.call(this,a,"ace/mode/javascript")},hax.app.visiui.AceCustomSupplementalMode.prototype=Object.create(hax.app.visiui.AceCodeModeBase.prototype),hax.app.visiui.AceCustomSupplementalMode.prototype.constructor=hax.app.visiui.AceCustomSupplementalMode,hax.app.visiui.AceCustomSupplementalMode.prototype.showData=function(a){var b=this.component.getSupplementalCode();this.editor.showData(b,a)},hax.app.visiui.AceCustomSupplementalMode.prototype.onSave=function(a){var b="",c="",d=this.component.getCustomizeScript(),e=a,f=this.getComponent(),g=f.update(b,d,e,c);if(!g.getSuccess()){var h=g.getErrorMsg();alert(h)}return!0},hax.app.visiui.JsonFormEditor=function(a){this.editorDiv=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"auto"}),this.workingData={d:"c"},this.editOk=!1,this.editor=null;var b=this;this.editCallback=function(){var c=b.editor.getCurrentValue();b.workingData=c,a(c)}},hax.app.visiui.JsonFormEditor.prototype.getElement=function(){return this.editorDiv},hax.app.visiui.JsonFormEditor.prototype.showData=function(a,b){a===this.workingData&&this.editOk===b||(void 0===a&&(a=null),this.workingData=hax.core.util.deepJsonCopy(a),this.editOk=b,hax.core.util.removeAllChildren(this.editorDiv),this.editor=new hax.jsonedit.JsonEditArea(this.editorDiv,a,b),this.editor.setEditCallback(this.editCallback),this.editOk?this.editorDiv.style.backgroundColor="":this.editorDiv.style.backgroundColor=hax.app.visiui.TableEditComponent.NO_EDIT_BACKGROUND_COLOR)},hax.app.visiui.FormDataMode=function(a){this.component=a;var b=this,c=function(a){b.onSave(a)};this.editor=new hax.app.visiui.JsonFormEditor(c)},hax.app.visiui.FormDataMode.prototype.isData=!0,hax.app.visiui.FormDataMode.prototype.getElement=function(){return this.editor.getElement()},hax.app.visiui.FormDataMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editor.showData(c,a)},hax.app.visiui.FormDataMode.prototype.destroy=function(){},hax.app.visiui.FormDataMode.prototype.onSave=function(a){var b=this.component.getObject();return hax.core.updatemember.updateData(b,a),!0},hax.app.visiui.HandsonGridEditor=function(a,b,c){this.outsideDiv=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"hidden"}),this.gridDiv=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",width:"50px",height:"50px",overflow:"hidden",zIndex:0}),this.outsideDiv.appendChild(this.gridDiv),this.component=a,this.table=a.getObject(),this.inputData=null,this.editOk=!1,this.parentSave=b,this.parentCancel=c;var d=this,e=function(){d.gridDiv.style.width=d.outsideDiv.clientWidth+"px",d.gridDiv.style.height=d.outsideDiv.clientHeight+"px",d.gridControl&&d.gridControl.render()};hax.visiui.setResizeListener(this.outsideDiv,e),this.gridEdited=function(a){d.save(arguments)},this.timerInProcess=!1;var f=50;this.delayGridEdited=function(a){if(!d.timerInProcess){d.timerInProcess=!0;var b=function(a){d.timerInProcess=!1,d.gridEdited(arguments)};setTimeout(b,f)}}},hax.app.visiui.HandsonGridEditor.prototype.save=function(a){"loadData"!=a[1]&&(this.inputData=hax.core.util.deepJsonCopy(this.gridControl.getData()),this.parentSave(this.inputData))},hax.app.visiui.HandsonGridEditor.prototype.cancel=function(){this.parentCancel()},hax.app.visiui.HandsonGridEditor.prototype.getElement=function(){return this.outsideDiv},hax.app.visiui.HandsonGridEditor.prototype.showData=function(a,b){if(this.inputData!==a||!b){var c=this.editOk;this.editOk=b,this.inputData=a;var d=hax.core.util.deepJsonCopy(a);this.gridControl&&c===b||this.createNewGrid(),d||(d=[[]]),this.gridControl.loadData(d),this.editOk?this.gridDiv.style.backgroundColor="":this.gridDiv.style.backgroundColor=hax.app.visiui.TableEditComponent.NO_EDIT_BACKGROUND_COLOR}},hax.app.visiui.HandsonGridEditor.prototype.destroy=function(){this.gridControl&&(this.gridControl.destroy(),this.gridControl=null)},hax.app.visiui.HandsonGridEditor.prototype.createNewGrid=function(){this.gridControl&&(this.gridControl.destroy(),this.gridControl=null);var a;this.editOk?(a={rowHeaders:!0,colHeaders:!0,contextMenu:!0,afterChange:this.gridEdited,afterCreateCol:this.delayGridEdited,afterCreateRow:this.delayGridEdited,afterRemoveCol:this.gridEdited,afterRemoveRow:this.gridEdited},this.gridEditable=!0):(a={readOnly:!0,rowHeaders:!0,colHeaders:!0},this.gridEditable=!1),this.gridControl=new Handsontable(this.gridDiv,a)},hax.app.visiui.HandsonGridMode=function(a){this.component=a,this.editOk=!1;var b=this,c=function(a){return b.onSave(a)},d=function(){return b.onCancel()};this.editor=new hax.app.visiui.HandsonGridEditor(a,c,d)},hax.app.visiui.HandsonGridMode.prototype.isData=!0,hax.app.visiui.HandsonGridMode.prototype.getElement=function(){return this.editor.getElement()},hax.app.visiui.HandsonGridMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getData();this.editOk=a,this.editor.showData(c,a)},hax.app.visiui.HandsonGridMode.prototype.destroy=function(){this.editor.destroy()},hax.app.visiui.HandsonGridMode.prototype.onSave=function(a){var b=this.component.getObject();return hax.core.updatemember.updateData(b,a),!0},hax.app.visiui.HandsonGridMode.prototype.onCancel=function(){return this.showData(this.editOk),!0},hax.app.visiui.ResourceOutputMode=function(a){this.component=a,this.outputElement=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",overflow:"auto"})},hax.app.visiui.ResourceOutputMode.prototype.isData=!0,hax.app.visiui.ResourceOutputMode.prototype.getElement=function(){return this.outputElement},hax.app.visiui.ResourceOutputMode.prototype.showData=function(a){var b=this.component.getObject(),c=b.getResource();c&&c.show&&c.show()},hax.app.visiui.ResourceOutputMode.prototype.destroy=function(){var a=this.component.getObject(),b=a.getResource();b&&b.hide&&b.hide()},hax.app.visiui.ResourceOutputMode.prototype.onSave=function(a){},hax.app.visiui.dialog.showConfigurableDialog=function(a,b){var c=hax.visiui.createDialog({movable:!0}),d=[],e={};e.onClose=function(){for(var a=0;a<d.length;a++)i=d[a],i.onClose&&i.onClose();hax.visiui.closeDialog(c)},e.onCancel=function(){e.onClose()},e.onSubmit=function(){for(var a,c={},f=0;f<d.length;f++)a=d[f],a.addToResult&&a.addToResult(c);var g=b(c);g&&e.onClose()};for(var f=hax.visiui.createElement("div",{className:"dialogBody"}),g=0;g<a.lines.length;g++){var h=a.lines[g],i=hax.app.visiui.dialog.showConfigurableDialog.createLine(h,e);d.push(i),i.element&&f.appendChild(i.element)}c.setContent(f),c.show(),c.fitToContent(f),c.centerInParent()},hax.app.visiui.dialog.showConfigurableDialog.createLine=function(a,b){var c=hax.app.visiui.dialog.showConfigurableDialog.lineFunctions[a.type];return c?c(a,b):(alert("Error: Unknown for element type: "+a.type),null)},hax.app.visiui.dialog.showConfigurableDialog.lineFunctions={title:function(a,b){var c={},d=hax.visiui.createElement("div",{className:"dialogLine"});return d.appendChild(hax.visiui.createElement("div",{className:"dialogTitle",innerHTML:a.title})),c.element=d,c},dropdown:function(a,b){var c={},d=hax.visiui.createElement("div",{className:"dialogLine"});a.heading&&d.appendChild(document.createTextNode(a.heading));for(var e=hax.visiui.createElement("select"),f=0;f<a.entries.length;f++){var g=a.entries[f];e.add(hax.visiui.createElement("option",{text:g}))}return a.initial&&(e.value=a.initial),a.disabled&&(e.disabled=!0),d.appendChild(e),c.element=d,c.addToResult=function(b){var c=e.value;b[a.resultKey]=c},c},inputElement:function(a,b){var c={},d=hax.visiui.createElement("div",{className:"dialogLine"});a.heading&&d.appendChild(document.createTextNode(a.heading));var e=hax.visiui.createElement("input",{type:"text"});return a.initial&&(e.value=a.initial),a.disabled&&(e.disabled=!0),d.appendChild(e),c.element=d,c.addToResult=function(b){var c=e.value.trim();b[a.resultKey]=c},c},aceEditor:function(a,b){},radioButton:function(a,b){},submit:function(a,b){var c={},d=hax.visiui.createElement("div",{className:"dialogLine"});return a.submit&&d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:a.submit,onclick:b.onSubmit})),a.cancel&&d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:a.cancel,onclick:b.onCancel})),c.element=d,c},custom:function(a,b){return a.createLineObject(b)},invisible:function(a,b){var c={};return c.element=null,c.addToResult=function(b){b[a.resultKey]=a.initial},c}},hax.app.visiui.dialog.showCreateWorkspaceDialog=function(a){var b=hax.visiui.createDialog({movable:!0});b.setTitle("&nbsp;");var c=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});b.setContent(c);var d,e=hax.visiui.createElement("div",null,{display:"table",overflow:"hidden"});c.appendChild(e);var d;d=hax.visiui.createElement("div",{className:"dialogLine"}),d.appendChild(hax.visiui.createElement("div",{className:"dialogTitle",innerHTML:"New Workspace"})),e.appendChild(d),d=hax.visiui.createElement("div",{className:"dialogLine"}),d.appendChild(document.createTextNode("Name:"));var f=hax.visiui.createElement("input",{type:"text"});d.appendChild(f),e.appendChild(d),d=hax.visiui.createElement("div",{className:"dialogLine"});var g=function(){hax.visiui.closeDialog(b)},h=function(){var c=f.value.trim();if(0==c.length)return void alert("The name is invalid");var d=a(c);d&&hax.visiui.closeDialog(b)};d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Create",onclick:h})),d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:g})),e.appendChild(d),b.setContent(e),b.show(),b.fitToContent(e),b.centerInParent()},hax.app.visiui.dialog.showUpdateLinksDialog=function(a){var b=hax.visiui.createDialog({minimizable:!0,maximizable:!0,movable:!0,resizable:!0}),c=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});b.setContent(c);var d,e=hax.visiui.createElement("div",null,{display:"table",overflow:"hidden"});c.appendChild(e);var d;d=hax.visiui.createElement("div",{className:"dialogLine"}),d.appendChild(hax.visiui.createElement("div",{className:"dialogTitle",innerHTML:"Update Links"})),e.appendChild(d),d=hax.visiui.createElement("div",{className:"dialogLine"});var f=hax.visiui.createElement("input",{type:"radio",name:"componentContent",value:"jsLinks"});d.appendChild(f),d.appendChild(document.createTextNode("JS Links")),e.appendChild(d);var g=hax.visiui.createElement("input",{type:"radio",name:"componentContent",value:"cssLinks"});d.appendChild(g),d.appendChild(document.createTextNode("CSS Links")),d=hax.visiui.createElement("div",{className:"dialogLine"});var h=hax.visiui.createElement("div",null,{position:"relative",width:"500px",height:"300px",border:"1px solid darkgray"});d.appendChild(h),e.appendChild(d);var i=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",bottom:"0px",right:"0px",left:"0px"}),j=null;h.appendChild(i);var k=hax.visiui.createElement("div",null,{position:"absolute",top:"0px",bottom:"0px",right:"0px",left:"0px"}),l=null;h.appendChild(k),d=hax.visiui.createElement("div",{className:"dialogLine"});var m=function(){o()},n=function(){var b,c;if(j){var d=j.getSession().getValue().trim();b=hax.app.visiui.dialog.createLinkArray(d)}else b=[];if(l){var e=l.getSession().getValue().trim();c=hax.app.visiui.dialog.createLinkArray(e)}else c=[];a.setLinks(b,c),o()},o=function(){hax.visiui.closeDialog(b),j&&(j.destroy(),j=null),l&&(l.destroy(),l=null)};d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Save",onclick:n})),d.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:m})),e.appendChild(d),b.setContent(e),b.show(),b.fitToContent(e),b.centerInParent();var p=function(){if(k.style.display="none",i.style.display="",!j){j=ace.edit(i),j.$blockScrolling=1/0,j.setTheme("ace/theme/eclipse"),j.getSession().setMode("ace/mode/text");var b=a.getJsLinks();if(b){var c=b.join("\n");j.getSession().setValue(c)}}},q=function(){if(k.style.display="",i.style.display="none",!l){l=ace.edit(k),l.$blockScrolling=1/0,l.setTheme("ace/theme/eclipse"),l.getSession().setMode("ace/mode/text");var b=a.getCssLinks();if(b){var c=b.join("\n");l.getSession().setValue(c)}}};f.checked=!0,p();var r=function(){g.checked?q():f.checked&&p()};g.onchange=r,f.onchange=r;var s=function(){var a=e.parentElement,b=d.offsetLeft,c=d.offsetTop+d.offsetHeight+b,f=a.clientWidth-2*b,g=a.clientHeight-c;h.style.width=f-5+"px",h.style.height=h.offsetHeight+g-5+"px",l&&l.resize(),j&&j.resize()},t=e.parentElement;hax.visiui.setResizeListener(t,s)},hax.app.visiui.dialog.createLinkText=function(a){return a.join("\n")},hax.app.visiui.dialog.createLinkArray=function(a){return a&&0!==a.length?a.split(/\s/):[]},hax.app.visiui.dialog.showSelectComponentDialog=function(a,b){var c=hax.visiui.createDialog({movable:!0}),d=hax.visiui.createElement("div",null,{display:"block",position:"relative",top:"0px",height:"100%",overflow:"auto"});c.setContent(d);var e,f=hax.visiui.createElement("div",null,{display:"table",overflow:"hidden"});d.appendChild(f);var e;e=hax.visiui.createElement("div",{className:"dialogLine"}),e.appendChild(hax.visiui.createElement("div",{className:"dialogTitle",innerHTML:"Select Component Type"})),f.appendChild(e),e=hax.visiui.createElement("div",{className:"dialogLine"}),e.appendChild(document.createTextNode("Component:"));var g=hax.visiui.createElement("select");e.appendChild(g);for(var h=0;h<a.length;h++){var i=a[h];g.add(hax.visiui.createElement("option",{text:i}))}f.appendChild(e),e=hax.visiui.createElement("div",{className:"dialogLine"});var j=function(){hax.visiui.closeDialog(c)},k=function(){var a=g.value;b(a),hax.visiui.closeDialog(c)};e.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Create",onclick:k})),e.appendChild(hax.visiui.createElement("button",{className:"dialogButton",innerHTML:"Cancel",onclick:j})),f.appendChild(e),c.setContent(f),c.show(),c.fitToContent(f),c.centerInParent()};